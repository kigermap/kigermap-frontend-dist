import{b as e,j as t}from"./query-DSsWWIdM.js";import{a as s}from"./sentry-DvvTOdwe.js";import{a as r,u as a,j as l,b as o}from"./index-D0yqgRjz.js";import{c as n,L as i}from"./router-jbVFofSC.js";import"./store-BXxpTH1V.js";function d(){const{t:d}=r(),{isAuthenticated:c}=a(),[x,h]=n(),[m,u]=s.useState(1),[g,p]=s.useState(""),[v,b]=s.useState(x.get("tag")||""),[j,f]=s.useState(!1);s.useEffect(()=>{const e=x.get("tag");e&&b(e)},[x]);const{data:k,isLoading:y}=e({queryKey:["highlights",m,g,v],queryFn:()=>{const e=new URLSearchParams({page:String(m),limit:"12"});return g&&e.set("search",g),v&&e.set("tag",v),o.get("/highlights?".concat(e)).then(e=>e.data)}}),{data:N}=e({queryKey:["highlight-tags"],queryFn:()=>o.get("/highlights/tags").then(e=>e.data)}),w=(null==k?void 0:k.highlights)||[],L=(null==k?void 0:k.totalPages)||1,C=(null==k?void 0:k.total)||0,M=(null==N?void 0:N.tags)||[],W=e=>{const t=e===v?"":e;b(t),u(1),h(t?{tag:t}:{})},B=e=>{const t=new Date(e),s=(new Date).getTime()-t.getTime(),r=Math.floor(s/864e5);return 0===r?d("highlights.today"):1===r?d("highlights.yesterday"):r<30?"".concat(r,"d"):t.toLocaleDateString()};return t.jsxs("div",{className:"min-h-screen",style:{background:"var(--color-background)"},children:[t.jsxs("div",{className:"relative overflow-hidden",children:[t.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[t.jsx("div",{className:"absolute -top-1/2 -left-1/4 w-[600px] h-[600px] rounded-full opacity-[0.07]",style:{background:"radial-gradient(circle, #8b5cf6, transparent 70%)"}}),t.jsx("div",{className:"absolute -top-1/3 -right-1/4 w-[500px] h-[500px] rounded-full opacity-[0.05]",style:{background:"radial-gradient(circle, #ec4899, transparent 70%)"}})]}),t.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 pt-12 pb-8 md:pt-20 md:pb-12",children:t.jsxs("div",{className:"text-center max-w-3xl mx-auto",children:[t.jsxs("div",{className:"inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-medium mb-5",style:{background:"rgba(139,92,246,0.1)",color:"#8b5cf6",border:"1px solid rgba(139,92,246,0.2)"},children:[t.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-purple-500 animate-pulse"}),C>0?"".concat(C," ").concat(d("highlights.spotsCount")):d("highlights.discover")]}),t.jsx("h1",{className:"text-3xl sm:text-4xl md:text-5xl font-bold mb-4 tracking-tight",style:{color:"var(--color-text)"},children:t.jsx("span",{className:"text-gradient",children:d("highlights.title")})}),t.jsx("p",{className:"text-sm sm:text-base md:text-lg mb-8 max-w-xl mx-auto leading-relaxed",style:{color:"var(--color-text-muted)"},children:d("highlights.subtitle")}),t.jsxs("div",{className:"flex items-center gap-3 justify-center max-w-lg mx-auto",children:[t.jsxs("div",{className:"relative flex-1 transition-all duration-300",style:{transform:j?"scale(1.02)":"scale(1)"},children:[t.jsx("input",{type:"text",value:g,onChange:e=>{p(e.target.value),u(1)},onFocus:()=>f(!0),onBlur:()=>f(!1),placeholder:d("highlights.searchPlaceholder"),className:"w-full h-11 sm:h-12 px-5 pl-11 rounded-2xl text-sm outline-none transition-all duration-300",style:{background:"var(--card-bg)",border:j?"1.5px solid rgba(139,92,246,0.4)":"1px solid var(--glass-border)",color:"var(--color-text)",boxShadow:j?"0 0 0 4px rgba(139,92,246,0.08), 0 8px 32px rgba(0,0,0,0.08)":"0 2px 12px rgba(0,0,0,0.04)",backdropFilter:"blur(20px)"}}),t.jsx("svg",{className:"absolute left-3.5 top-1/2 -translate-y-1/2 w-4 h-4 transition-colors",style:{color:j?"#8b5cf6":"var(--color-text-muted)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),g&&t.jsx("button",{onClick:()=>{p(""),u(1)},className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 rounded-full flex items-center justify-center transition-colors",style:{background:"var(--hover-bg)",color:"var(--color-text-muted)"},children:t.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),c&&t.jsxs(i,{to:"/highlights/create",className:"h-11 sm:h-12 px-5 sm:px-6 rounded-2xl text-sm font-medium text-white flex items-center gap-2 transition-all active:scale-95 flex-shrink-0",style:{background:"linear-gradient(135deg, #8b5cf6, #a855f7, #ec4899)",boxShadow:"0 4px 16px rgba(139,92,246,0.3)"},children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),t.jsx("span",{className:"hidden sm:inline",children:d("highlights.create")})]})]})]})})]}),M.length>0&&t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 mb-8",children:t.jsx("div",{className:"relative",children:t.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-1 scrollbar-hide",style:{scrollbarWidth:"none"},children:[t.jsx("button",{onClick:()=>W(""),className:"px-4 py-2 rounded-xl text-xs font-medium transition-all flex-shrink-0 whitespace-nowrap",style:{background:v?"var(--card-bg)":"linear-gradient(135deg, #8b5cf6, #ec4899)",color:v?"var(--color-text-muted)":"#fff",border:v?"1px solid var(--glass-border)":"none",boxShadow:v?"none":"0 2px 8px rgba(139,92,246,0.25)"},children:d("highlights.allTags")}),M.map(e=>t.jsxs("button",{onClick:()=>W(e),className:"px-4 py-2 rounded-xl text-xs font-medium transition-all flex-shrink-0 whitespace-nowrap",style:{background:e===v?"linear-gradient(135deg, #8b5cf6, #ec4899)":"var(--card-bg)",color:e===v?"#fff":"var(--color-text-muted)",border:e===v?"none":"1px solid var(--glass-border)",boxShadow:e===v?"0 2px 8px rgba(139,92,246,0.25)":"none"},children:["#",e]},e))]})})}),t.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 pb-20",children:y?t.jsxs("div",{className:"flex flex-col items-center justify-center py-24 gap-4",children:[t.jsxs("div",{className:"relative w-12 h-12",children:[t.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-purple-500/20"}),t.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-purple-500 border-t-transparent animate-spin"})]}),t.jsx("p",{className:"text-sm",style:{color:"var(--color-text-muted)"},children:d("highlights.loading")})]}):0===w.length?t.jsxs("div",{className:"text-center py-24",children:[t.jsx("div",{className:"w-20 h-20 mx-auto mb-6 rounded-2xl flex items-center justify-center",style:{background:"var(--card-bg)",border:"1px solid var(--glass-border)"},children:t.jsxs("svg",{className:"w-8 h-8 opacity-40",style:{color:"var(--color-text-muted)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})}),t.jsx("p",{className:"text-base font-medium mb-2",style:{color:"var(--color-text)"},children:d("highlights.empty")}),t.jsx("p",{className:"text-sm mb-6",style:{color:"var(--color-text-muted)"},children:d("highlights.emptyHint")}),c&&t.jsxs(i,{to:"/highlights/create",className:"inline-flex items-center gap-2 px-5 py-2.5 rounded-xl text-sm font-medium text-white transition-all active:scale-95",style:{background:"linear-gradient(135deg, #8b5cf6, #ec4899)"},children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),d("highlights.create")]})]}):t.jsxs(t.Fragment,{children:[t.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 sm:gap-5",children:w.map((e,s)=>{var r,a,o,n;return t.jsxs(i,{to:"/highlights/".concat(e.id),className:"group rounded-2xl overflow-hidden transition-all duration-500 hover:-translate-y-1",style:{background:"var(--card-bg)",border:"1px solid var(--glass-border)",boxShadow:"0 1px 3px rgba(0,0,0,0.04)",animationDelay:"".concat(50*s,"ms")},children:[t.jsxs("div",{className:"relative aspect-[4/3] overflow-hidden",children:[t.jsx("img",{src:e.photos[0],alt:e.title,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110",onError:l,loading:"lazy"}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/10 to-transparent opacity-80 group-hover:opacity-90 transition-opacity"}),e.photos.length>1&&t.jsxs("div",{className:"absolute top-3 right-3 flex items-center gap-1 bg-black/40 backdrop-blur-md rounded-lg px-2 py-1 text-white/90 text-[11px]",children:[t.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14"})}),e.photos.length]}),t.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-3.5",children:[t.jsx("h3",{className:"text-white font-semibold text-sm leading-snug line-clamp-1 mb-1.5 drop-shadow-sm",children:e.title}),t.jsxs("div",{className:"flex items-center gap-1.5 text-white/75 text-xs",children:[t.jsx("svg",{className:"w-3 h-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"})}),t.jsx("span",{className:"truncate",children:e.city||e.province||e.country})]})]})]}),t.jsxs("div",{className:"p-3.5",children:[t.jsxs("div",{className:"flex items-center justify-between mb-2.5",children:[t.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[(null==(r=e.author)?void 0:r.avatar)?t.jsx("img",{src:e.author.avatar,alt:"",className:"w-7 h-7 rounded-full object-cover ring-2 ring-white/10 flex-shrink-0",onError:l}):t.jsx("div",{className:"w-7 h-7 rounded-full flex items-center justify-center text-[10px] text-white flex-shrink-0",style:{background:"linear-gradient(135deg, #8b5cf6, #ec4899)"},children:(null==(o=null==(a=e.author)?void 0:a.cnName)?void 0:o[0])||"?"}),t.jsx("span",{className:"text-xs font-medium truncate",style:{color:"var(--color-text)"},children:null==(n=e.author)?void 0:n.cnName})]}),t.jsx("span",{className:"text-[10px] flex-shrink-0 ml-2",style:{color:"var(--color-text-muted)"},children:B(e.createdAt)})]}),t.jsxs("div",{className:"flex items-center gap-3 text-[11px]",style:{color:"var(--color-text-muted)"},children:[t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsxs("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),e.viewCount]}),t.jsxs("span",{className:"flex items-center gap-1",style:{color:e.liked?"#ec4899":void 0},children:[t.jsx("svg",{className:"w-3.5 h-3.5",fill:e.liked?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),e.likeCount]}),t.jsxs("span",{className:"flex items-center gap-1",style:{color:e.favorited?"#f59e0b":void 0},children:[t.jsx("svg",{className:"w-3.5 h-3.5",fill:e.favorited?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})}),e.favoriteCount]}),t.jsx("div",{className:"flex-1 flex justify-end gap-1 overflow-hidden",children:e.tags.slice(0,2).map(e=>t.jsxs("span",{className:"px-1.5 py-0.5 rounded text-[9px] truncate max-w-[60px]",style:{background:"var(--hover-bg)",color:"var(--color-text-muted)"},children:["#",e]},e))})]})]})]},e.id)})}),L>1&&t.jsxs("div",{className:"flex items-center justify-center gap-1.5 mt-12",children:[t.jsx("button",{onClick:()=>u(e=>Math.max(1,e-1)),disabled:1===m,className:"w-9 h-9 rounded-xl flex items-center justify-center transition-all disabled:opacity-30",style:{background:"var(--card-bg)",border:"1px solid var(--glass-border)",color:"var(--color-text-muted)"},children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),Array.from({length:Math.min(L,7)},(e,s)=>{let r;return r=L<=7||m<=4?s+1:m>=L-3?L-6+s:m-3+s,t.jsx("button",{onClick:()=>u(r),className:"w-9 h-9 rounded-xl text-xs font-medium transition-all",style:{background:r===m?"linear-gradient(135deg, #8b5cf6, #ec4899)":"var(--card-bg)",color:r===m?"#fff":"var(--color-text-muted)",border:r===m?"none":"1px solid var(--glass-border)",boxShadow:r===m?"0 2px 8px rgba(139,92,246,0.3)":"none"},children:r},r)}),t.jsx("button",{onClick:()=>u(e=>Math.min(L,e+1)),disabled:m===L,className:"w-9 h-9 rounded-xl flex items-center justify-center transition-all disabled:opacity-30",style:{background:"var(--card-bg)",border:"1px solid var(--glass-border)",color:"var(--color-text-muted)"},children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]})})]})}export{d as default};
