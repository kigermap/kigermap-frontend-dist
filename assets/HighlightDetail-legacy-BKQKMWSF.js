!function(){function e(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,o,n="function"==typeof Symbol?Symbol:{},s=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function a(e,n,s,i){var a=n&&n.prototype instanceof c?n:c,d=Object.create(a.prototype);return r(d,"_invoke",function(e,r,n){var s,i,a,c=0,d=n||[],u=!1,h={p:0,n:0,v:t,a:x,f:x.bind(t,4),d:function(e,r){return s=e,i=0,a=t,h.n=r,l}};function x(e,r){for(i=e,a=r,o=0;!u&&c&&!n&&o<d.length;o++){var n,s=d[o],x=h.p,p=s[2];e>3?(n=p===r)&&(a=s[(i=s[4])?5:(i=3,3)],s[4]=s[5]=t):s[0]<=x&&((n=e<2&&x<s[1])?(i=0,h.v=r,h.n=s[1]):x<p&&(n=e<3||s[0]>r||r>p)&&(s[4]=e,s[5]=r,h.n=p,i=0))}if(n||e>1)return l;throw u=!0,r}return function(n,d,p){if(c>1)throw TypeError("Generator is already running");for(u&&1===d&&x(d,p),i=d,a=p;(o=i<2?t:a)||!u;){s||(i?i<3?(i>1&&(h.n=-1),x(i,a)):h.n=a:h.v=a);try{if(c=2,s){if(i||(n="next"),o=s[n]){if(!(o=o.call(s,a)))throw TypeError("iterator result is not an object");if(!o.done)return o;a=o.value,i<2&&(i=0)}else 1===i&&(o=s.return)&&o.call(s),i<2&&(a=TypeError("The iterator does not provide a '"+n+"' method"),i=1);s=t}else if((o=(u=h.n<0)?a:e.call(r,h))!==l)break}catch(o){s=t,i=1,a=o}finally{c=1}}return{value:o,done:u}}}(e,s,i),!0),d}var l={};function c(){}function d(){}function u(){}o=Object.getPrototypeOf;var h=[][s]?o(o([][s]())):(r(o={},s,function(){return this}),o),x=u.prototype=c.prototype=Object.create(h);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,r(e,i,"GeneratorFunction")),e.prototype=Object.create(x),e}return d.prototype=u,r(x,"constructor",u),r(u,"constructor",d),d.displayName="GeneratorFunction",r(u,i,"GeneratorFunction"),r(x),r(x,i,"Generator"),r(x,s,function(){return this}),r(x,"toString",function(){return"[object Generator]"}),(e=function(){return{w:a,m:p}})()}function r(e,t,o,n){var s=Object.defineProperty;try{s({},"",{})}catch(e){s=0}r=function(e,t,o,n){function i(t,o){r(e,t,function(e){return this._invoke(t,o,e)})}t?s?s(e,t,{value:o,enumerable:!n,configurable:!n,writable:!n}):e[t]=o:(i("next",0),i("throw",1),i("return",2))},r(e,t,o,n)}function t(e,r,t,o,n,s,i){try{var a=e[s](i),l=a.value}catch(e){return void t(e)}a.done?r(l):Promise.resolve(l).then(o,n)}function o(e){return function(){var r=this,o=arguments;return new Promise(function(n,s){var i=e.apply(r,o);function a(e){t(i,n,s,a,l,"next",e)}function l(e){t(i,n,s,a,l,"throw",e)}a(void 0)})}}function n(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=t){var o,n,s,i,a=[],l=!0,c=!1;try{if(s=(t=t.call(e)).next,0===r){if(Object(t)!==t)return;l=!1}else for(;!(l=(o=s.call(t)).done)&&(a.push(o.value),a.length!==r);l=!0);}catch(e){c=!0,n=e}finally{try{if(!l&&null!=t.return&&(i=t.return(),Object(i)!==i))return}finally{if(c)throw n}}return a}}(e,r)||function(e,r){if(e){if("string"==typeof e)return s(e,r);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?s(e,r):void 0}}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,o=Array(r);t<r;t++)o[t]=e[t];return o}System.register(["./query-legacy-CLxXWLnl.js","./sentry-legacy-CTr2CudU.js","./index-legacy-DVoFAd51.js","./router-legacy-9xrJEksD.js","./store-legacy-Bt3CCSnU.js"],function(r,t){"use strict";var s,i,a,l,c,d,u,h,x,p,f;return{setters:[function(e){s=e.u,i=e.b,a=e.j},function(e){l=e.a},function(e){c=e.a,d=e.u,u=e.j,h=e.b},function(e){x=e.d,p=e.a,f=e.L},null],execute:function(){r("default",function(){var r,t,g=x().id,v=c().t,m=d().user,b=p(),j=s(),k=n(l.useState(0),2),y=k[0],w=k[1],N=n(l.useState(!1),2),L=N[0],C=N[1],M=i({queryKey:["highlight",g],queryFn:function(){return h.get("/highlights/".concat(g)).then(function(e){return e.data})},enabled:!!g}),W=M.data,B=M.isLoading,S=function(){var r=o(e().m(function r(){return e().w(function(e){for(;;)switch(e.p=e.n){case 0:if(W){e.n=1;break}return e.a(2);case 1:if(e.p=1,!W.liked){e.n=3;break}return e.n=2,h.delete("/highlights/".concat(g,"/like"));case 2:e.n=4;break;case 3:return e.n=4,h.post("/highlights/".concat(g,"/like"));case 4:j.invalidateQueries({queryKey:["highlight",g]}),e.n=6;break;case 5:e.p=5,e.v;case 6:return e.a(2)}},r,null,[[1,5]])}));return function(){return r.apply(this,arguments)}}(),O=function(){var r=o(e().m(function r(){return e().w(function(e){for(;;)switch(e.p=e.n){case 0:if(W){e.n=1;break}return e.a(2);case 1:if(e.p=1,!W.favorited){e.n=3;break}return e.n=2,h.delete("/highlights/".concat(g,"/favorite"));case 2:e.n=4;break;case 3:return e.n=4,h.post("/highlights/".concat(g,"/favorite"));case 4:j.invalidateQueries({queryKey:["highlight",g]}),e.n=6;break;case 5:e.p=5,e.v;case 6:return e.a(2)}},r,null,[[1,5]])}));return function(){return r.apply(this,arguments)}}(),z=function(){var r=o(e().m(function r(){return e().w(function(e){for(;;)switch(e.p=e.n){case 0:if(confirm(v("highlights.confirmDelete"))){e.n=1;break}return e.a(2);case 1:return e.p=1,e.n=2,h.delete("/highlights/".concat(g));case 2:b("/highlights"),e.n=4;break;case 3:e.p=3,e.v;case 4:return e.a(2)}},r,null,[[1,3]])}));return function(){return r.apply(this,arguments)}}();if(B)return a.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{background:"var(--color-background)"},children:a.jsxs("div",{className:"relative w-12 h-12",children:[a.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-purple-500/20"}),a.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-purple-500 border-t-transparent animate-spin"})]})});if(!W)return a.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center gap-4",style:{background:"var(--color-background)"},children:[a.jsx("div",{className:"w-16 h-16 rounded-2xl flex items-center justify-center",style:{background:"var(--card-bg)",border:"1px solid var(--glass-border)"},children:a.jsx("svg",{className:"w-7 h-7 opacity-40",style:{color:"var(--color-text-muted)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),a.jsx("p",{className:"text-sm",style:{color:"var(--color-text-muted)"},children:v("highlights.notFound")}),a.jsx(f,{to:"/highlights",className:"text-sm text-purple-400 hover:text-purple-300 transition-colors",children:v("highlights.backToList")})]});var P=(null==m?void 0:m.id)===(null===(r=W.author)||void 0===r?void 0:r.shareCode)||(null==m?void 0:m.profileId)===(null===(t=W.author)||void 0===t?void 0:t.id),A=[W.city,W.province,W.country].filter(Boolean).join(" Â· ");return a.jsxs("div",{className:"min-h-screen",style:{background:"var(--color-background)"},children:[L&&a.jsxs("div",{className:"fixed inset-0 z-50 bg-black/95 flex items-center justify-center",onClick:function(){return C(!1)},children:[a.jsx("button",{className:"absolute top-4 right-4 w-10 h-10 rounded-full bg-white/10 backdrop-blur-sm flex items-center justify-center text-white hover:bg-white/20 transition z-10",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),a.jsx("img",{src:W.photos[y],alt:"",className:"max-w-[95vw] max-h-[90vh] object-contain",onClick:function(e){return e.stopPropagation()}}),W.photos.length>1&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:function(e){e.stopPropagation(),w(function(e){return(e-1+W.photos.length)%W.photos.length})},className:"absolute left-4 top-1/2 -translate-y-1/2 w-12 h-12 rounded-full bg-white/10 backdrop-blur-sm flex items-center justify-center text-white hover:bg-white/20 transition",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),a.jsx("button",{onClick:function(e){e.stopPropagation(),w(function(e){return(e+1)%W.photos.length})},className:"absolute right-4 top-1/2 -translate-y-1/2 w-12 h-12 rounded-full bg-white/10 backdrop-blur-sm flex items-center justify-center text-white hover:bg-white/20 transition",children:a.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),a.jsxs("div",{className:"absolute bottom-6 left-1/2 -translate-x-1/2 text-white/60 text-sm",children:[y+1," / ",W.photos.length]})]})]}),a.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 py-6 md:py-10",children:[a.jsxs("nav",{className:"flex items-center gap-2 text-xs mb-6",style:{color:"var(--color-text-muted)"},children:[a.jsx(f,{to:"/highlights",className:"hover:text-purple-400 transition-colors",children:v("highlights.title")}),a.jsx("svg",{className:"w-3 h-3 opacity-40",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),a.jsx("span",{className:"truncate max-w-[200px]",style:{color:"var(--color-text)"},children:W.title})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[1fr,360px] gap-6 lg:gap-8",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"relative rounded-2xl overflow-hidden cursor-zoom-in group",style:{border:"1px solid var(--glass-border)"},onClick:function(){return C(!0)},children:[a.jsxs("div",{className:"relative aspect-[4/3] sm:aspect-[16/10] bg-black/5",children:[a.jsx("img",{src:W.photos[y],alt:W.title,className:"w-full h-full object-contain transition-transform duration-300 group-hover:scale-[1.02]",onError:u}),a.jsx("div",{className:"absolute top-3 right-3 w-8 h-8 rounded-lg bg-black/30 backdrop-blur-sm flex items-center justify-center text-white/70 opacity-0 group-hover:opacity-100 transition-opacity",children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"})})})]}),W.photos.length>1&&a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:function(e){e.stopPropagation(),w(function(e){return(e-1+W.photos.length)%W.photos.length})},className:"absolute left-3 top-1/2 -translate-y-1/2 w-10 h-10 rounded-full bg-black/40 backdrop-blur-md flex items-center justify-center text-white opacity-0 group-hover:opacity-100 hover:bg-black/60 transition-all",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),a.jsx("button",{onClick:function(e){e.stopPropagation(),w(function(e){return(e+1)%W.photos.length})},className:"absolute right-3 top-1/2 -translate-y-1/2 w-10 h-10 rounded-full bg-black/40 backdrop-blur-md flex items-center justify-center text-white opacity-0 group-hover:opacity-100 hover:bg-black/60 transition-all",children:a.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]}),W.photos.length>1&&a.jsx("div",{className:"flex gap-2 mt-3 overflow-x-auto pb-1",style:{scrollbarWidth:"none"},children:W.photos.map(function(e,r){return a.jsx("button",{onClick:function(){return w(r)},className:"w-16 h-16 sm:w-20 sm:h-20 rounded-xl overflow-hidden flex-shrink-0 transition-all duration-200",style:{border:r===y?"2px solid #8b5cf6":"2px solid transparent",opacity:r===y?1:.5,boxShadow:r===y?"0 0 0 2px rgba(139,92,246,0.2)":"none"},children:a.jsx("img",{src:e,alt:"",className:"w-full h-full object-cover",onError:u})},r)})}),a.jsx("div",{className:"lg:hidden mt-6",children:W.description&&a.jsx("div",{className:"rounded-2xl p-5",style:{background:"var(--card-bg)",border:"1px solid var(--glass-border)"},children:a.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",style:{color:"var(--color-text)"},children:W.description})})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"rounded-2xl p-5",style:{background:"var(--card-bg)",border:"1px solid var(--glass-border)"},children:[a.jsx("h1",{className:"text-lg sm:text-xl font-bold mb-4 leading-snug",style:{color:"var(--color-text)"},children:W.title}),a.jsxs("div",{className:"flex items-center gap-2 mb-5",children:[a.jsxs("button",{onClick:S,className:"flex-1 flex items-center justify-center gap-2 h-10 rounded-xl text-sm font-medium transition-all active:scale-95",style:{background:W.liked?"rgba(236,72,153,0.12)":"var(--hover-bg)",color:W.liked?"#ec4899":"var(--color-text-muted)",border:W.liked?"1px solid rgba(236,72,153,0.2)":"1px solid var(--glass-border)"},children:[a.jsx("svg",{className:"w-4 h-4",fill:W.liked?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),W.likeCount]}),a.jsxs("button",{onClick:O,className:"flex-1 flex items-center justify-center gap-2 h-10 rounded-xl text-sm font-medium transition-all active:scale-95",style:{background:W.favorited?"rgba(245,158,11,0.12)":"var(--hover-bg)",color:W.favorited?"#f59e0b":"var(--color-text-muted)",border:W.favorited?"1px solid rgba(245,158,11,0.2)":"1px solid var(--glass-border)"},title:W.favorited?v("highlights.unfavorite"):v("highlights.favorite"),children:[a.jsx("svg",{className:"w-4 h-4",fill:W.favorited?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})}),W.favoriteCount]}),P&&a.jsx("button",{onClick:z,className:"w-10 h-10 rounded-xl flex items-center justify-center transition-all hover:bg-red-500/10 flex-shrink-0",style:{border:"1px solid var(--glass-border)",color:"var(--color-text-muted)"},children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center gap-2.5 text-sm",style:{color:"var(--color-text-muted)"},children:[a.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0",style:{background:"var(--hover-bg)"},children:a.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),a.jsx("span",{children:A})]}),a.jsxs("div",{className:"flex items-center gap-2.5 text-sm",style:{color:"var(--color-text-muted)"},children:[a.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0",style:{background:"var(--hover-bg)"},children:a.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),a.jsxs("span",{children:[W.viewCount," ",v("highlights.views")]})]}),a.jsxs("div",{className:"flex items-center gap-2.5 text-sm",style:{color:"var(--color-text-muted)"},children:[a.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0",style:{background:"var(--hover-bg)"},children:a.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),a.jsx("span",{children:new Date(W.createdAt).toLocaleDateString()})]})]})]}),W.description&&a.jsxs("div",{className:"hidden lg:block rounded-2xl p-5",style:{background:"var(--card-bg)",border:"1px solid var(--glass-border)"},children:[a.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider mb-3",style:{color:"var(--color-text-muted)"},children:v("highlights.descriptionLabel")}),a.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",style:{color:"var(--color-text)"},children:W.description})]}),W.tags.length>0&&a.jsx("div",{className:"rounded-2xl p-5",style:{background:"var(--card-bg)",border:"1px solid var(--glass-border)"},children:a.jsx("div",{className:"flex flex-wrap gap-2",children:W.tags.map(function(e){return a.jsxs(f,{to:"/highlights?tag=".concat(encodeURIComponent(e)),className:"px-3 py-1.5 rounded-lg text-xs font-medium transition-all hover:scale-105",style:{background:"var(--hover-bg)",color:"var(--color-text-muted)"},children:["#",e]},e)})})}),W.author&&a.jsxs(f,{to:"/u/".concat(W.author.shareCode),className:"flex items-center gap-3.5 rounded-2xl p-4 group transition-all hover:scale-[1.01]",style:{background:"var(--card-bg)",border:"1px solid var(--glass-border)"},children:[W.author.avatar?a.jsx("img",{src:W.author.avatar,alt:"",className:"w-12 h-12 rounded-xl object-cover ring-2 ring-purple-500/20",onError:u}):a.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center text-sm text-white",style:{background:"linear-gradient(135deg, #8b5cf6, #ec4899)"},children:W.author.cnName[0]}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm font-semibold group-hover:text-purple-400 transition-colors truncate",style:{color:"var(--color-text)"},children:W.author.cnName}),a.jsx("p",{className:"text-xs mt-0.5",style:{color:"var(--color-text-muted)"},children:v("highlights.author")})]}),a.jsx("svg",{className:"w-4 h-4 opacity-40 group-hover:opacity-70 transition-opacity flex-shrink-0",style:{color:"var(--color-text-muted)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]})]})]})})}}})}();
