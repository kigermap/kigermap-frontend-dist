import{u as e,b as t,j as r}from"./query-DSsWWIdM.js";import{a as s}from"./sentry-DvvTOdwe.js";import{a as o,u as l,j as a,b as i}from"./index-D0yqgRjz.js";import{d as n,a as c,L as d}from"./router-jbVFofSC.js";import"./store-BXxpTH1V.js";function h(){var h,x;const{id:u}=n(),{t:g}=o(),{user:m}=l(),p=c(),v=e(),[j,b]=s.useState(0),[k,f]=s.useState(!1),{data:y,isLoading:w}=t({queryKey:["highlight",u],queryFn:()=>i.get("/highlights/".concat(u)).then(e=>e.data),enabled:!!u});if(w)return r.jsx("div",{className:"min-h-screen flex items-center justify-center",style:{background:"var(--color-background)"},children:r.jsxs("div",{className:"relative w-12 h-12",children:[r.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-purple-500/20"}),r.jsx("div",{className:"absolute inset-0 rounded-full border-2 border-purple-500 border-t-transparent animate-spin"})]})});if(!y)return r.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center gap-4",style:{background:"var(--color-background)"},children:[r.jsx("div",{className:"w-16 h-16 rounded-2xl flex items-center justify-center",style:{background:"var(--card-bg)",border:"1px solid var(--glass-border)"},children:r.jsx("svg",{className:"w-7 h-7 opacity-40",style:{color:"var(--color-text-muted)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),r.jsx("p",{className:"text-sm",style:{color:"var(--color-text-muted)"},children:g("highlights.notFound")}),r.jsx(d,{to:"/highlights",className:"text-sm text-purple-400 hover:text-purple-300 transition-colors",children:g("highlights.backToList")})]});const N=(null==m?void 0:m.id)===(null==(h=y.author)?void 0:h.shareCode)||(null==m?void 0:m.profileId)===(null==(x=y.author)?void 0:x.id),L=[y.city,y.province,y.country].filter(Boolean).join(" Â· ");return r.jsxs("div",{className:"min-h-screen",style:{background:"var(--color-background)"},children:[k&&r.jsxs("div",{className:"fixed inset-0 z-50 bg-black/95 flex items-center justify-center",onClick:()=>f(!1),children:[r.jsx("button",{className:"absolute top-4 right-4 w-10 h-10 rounded-full bg-white/10 backdrop-blur-sm flex items-center justify-center text-white hover:bg-white/20 transition z-10",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),r.jsx("img",{src:y.photos[j],alt:"",className:"max-w-[95vw] max-h-[90vh] object-contain",onClick:e=>e.stopPropagation()}),y.photos.length>1&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:e=>{e.stopPropagation(),b(e=>(e-1+y.photos.length)%y.photos.length)},className:"absolute left-4 top-1/2 -translate-y-1/2 w-12 h-12 rounded-full bg-white/10 backdrop-blur-sm flex items-center justify-center text-white hover:bg-white/20 transition",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),r.jsx("button",{onClick:e=>{e.stopPropagation(),b(e=>(e+1)%y.photos.length)},className:"absolute right-4 top-1/2 -translate-y-1/2 w-12 h-12 rounded-full bg-white/10 backdrop-blur-sm flex items-center justify-center text-white hover:bg-white/20 transition",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),r.jsxs("div",{className:"absolute bottom-6 left-1/2 -translate-x-1/2 text-white/60 text-sm",children:[j+1," / ",y.photos.length]})]})]}),r.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 py-6 md:py-10",children:[r.jsxs("nav",{className:"flex items-center gap-2 text-xs mb-6",style:{color:"var(--color-text-muted)"},children:[r.jsx(d,{to:"/highlights",className:"hover:text-purple-400 transition-colors",children:g("highlights.title")}),r.jsx("svg",{className:"w-3 h-3 opacity-40",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),r.jsx("span",{className:"truncate max-w-[200px]",style:{color:"var(--color-text)"},children:y.title})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-[1fr,360px] gap-6 lg:gap-8",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"relative rounded-2xl overflow-hidden cursor-zoom-in group",style:{border:"1px solid var(--glass-border)"},onClick:()=>f(!0),children:[r.jsxs("div",{className:"relative aspect-[4/3] sm:aspect-[16/10] bg-black/5",children:[r.jsx("img",{src:y.photos[j],alt:y.title,className:"w-full h-full object-contain transition-transform duration-300 group-hover:scale-[1.02]",onError:a}),r.jsx("div",{className:"absolute top-3 right-3 w-8 h-8 rounded-lg bg-black/30 backdrop-blur-sm flex items-center justify-center text-white/70 opacity-0 group-hover:opacity-100 transition-opacity",children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"})})})]}),y.photos.length>1&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:e=>{e.stopPropagation(),b(e=>(e-1+y.photos.length)%y.photos.length)},className:"absolute left-3 top-1/2 -translate-y-1/2 w-10 h-10 rounded-full bg-black/40 backdrop-blur-md flex items-center justify-center text-white opacity-0 group-hover:opacity-100 hover:bg-black/60 transition-all",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),r.jsx("button",{onClick:e=>{e.stopPropagation(),b(e=>(e+1)%y.photos.length)},className:"absolute right-3 top-1/2 -translate-y-1/2 w-10 h-10 rounded-full bg-black/40 backdrop-blur-md flex items-center justify-center text-white opacity-0 group-hover:opacity-100 hover:bg-black/60 transition-all",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})]}),y.photos.length>1&&r.jsx("div",{className:"flex gap-2 mt-3 overflow-x-auto pb-1",style:{scrollbarWidth:"none"},children:y.photos.map((e,t)=>r.jsx("button",{onClick:()=>b(t),className:"w-16 h-16 sm:w-20 sm:h-20 rounded-xl overflow-hidden flex-shrink-0 transition-all duration-200",style:{border:t===j?"2px solid #8b5cf6":"2px solid transparent",opacity:t===j?1:.5,boxShadow:t===j?"0 0 0 2px rgba(139,92,246,0.2)":"none"},children:r.jsx("img",{src:e,alt:"",className:"w-full h-full object-cover",onError:a})},t))}),r.jsx("div",{className:"lg:hidden mt-6",children:y.description&&r.jsx("div",{className:"rounded-2xl p-5",style:{background:"var(--card-bg)",border:"1px solid var(--glass-border)"},children:r.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",style:{color:"var(--color-text)"},children:y.description})})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"rounded-2xl p-5",style:{background:"var(--card-bg)",border:"1px solid var(--glass-border)"},children:[r.jsx("h1",{className:"text-lg sm:text-xl font-bold mb-4 leading-snug",style:{color:"var(--color-text)"},children:y.title}),r.jsxs("div",{className:"flex items-center gap-2 mb-5",children:[r.jsxs("button",{onClick:async()=>{if(y)try{y.liked?await i.delete("/highlights/".concat(u,"/like")):await i.post("/highlights/".concat(u,"/like")),v.invalidateQueries({queryKey:["highlight",u]})}catch(e){}},className:"flex-1 flex items-center justify-center gap-2 h-10 rounded-xl text-sm font-medium transition-all active:scale-95",style:{background:y.liked?"rgba(236,72,153,0.12)":"var(--hover-bg)",color:y.liked?"#ec4899":"var(--color-text-muted)",border:y.liked?"1px solid rgba(236,72,153,0.2)":"1px solid var(--glass-border)"},children:[r.jsx("svg",{className:"w-4 h-4",fill:y.liked?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),y.likeCount]}),r.jsxs("button",{onClick:async()=>{if(y)try{y.favorited?await i.delete("/highlights/".concat(u,"/favorite")):await i.post("/highlights/".concat(u,"/favorite")),v.invalidateQueries({queryKey:["highlight",u]})}catch(e){}},className:"flex-1 flex items-center justify-center gap-2 h-10 rounded-xl text-sm font-medium transition-all active:scale-95",style:{background:y.favorited?"rgba(245,158,11,0.12)":"var(--hover-bg)",color:y.favorited?"#f59e0b":"var(--color-text-muted)",border:y.favorited?"1px solid rgba(245,158,11,0.2)":"1px solid var(--glass-border)"},title:y.favorited?g("highlights.unfavorite"):g("highlights.favorite"),children:[r.jsx("svg",{className:"w-4 h-4",fill:y.favorited?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})}),y.favoriteCount]}),N&&r.jsx("button",{onClick:async()=>{if(confirm(g("highlights.confirmDelete")))try{await i.delete("/highlights/".concat(u)),p("/highlights")}catch(e){}},className:"w-10 h-10 rounded-xl flex items-center justify-center transition-all hover:bg-red-500/10 flex-shrink-0",style:{border:"1px solid var(--glass-border)",color:"var(--color-text-muted)"},children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center gap-2.5 text-sm",style:{color:"var(--color-text-muted)"},children:[r.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0",style:{background:"var(--hover-bg)"},children:r.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]})}),r.jsx("span",{children:L})]}),r.jsxs("div",{className:"flex items-center gap-2.5 text-sm",style:{color:"var(--color-text-muted)"},children:[r.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0",style:{background:"var(--hover-bg)"},children:r.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),r.jsxs("span",{children:[y.viewCount," ",g("highlights.views")]})]}),r.jsxs("div",{className:"flex items-center gap-2.5 text-sm",style:{color:"var(--color-text-muted)"},children:[r.jsx("div",{className:"w-8 h-8 rounded-lg flex items-center justify-center flex-shrink-0",style:{background:"var(--hover-bg)"},children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),r.jsx("span",{children:new Date(y.createdAt).toLocaleDateString()})]})]})]}),y.description&&r.jsxs("div",{className:"hidden lg:block rounded-2xl p-5",style:{background:"var(--card-bg)",border:"1px solid var(--glass-border)"},children:[r.jsx("h3",{className:"text-xs font-semibold uppercase tracking-wider mb-3",style:{color:"var(--color-text-muted)"},children:g("highlights.descriptionLabel")}),r.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",style:{color:"var(--color-text)"},children:y.description})]}),y.tags.length>0&&r.jsx("div",{className:"rounded-2xl p-5",style:{background:"var(--card-bg)",border:"1px solid var(--glass-border)"},children:r.jsx("div",{className:"flex flex-wrap gap-2",children:y.tags.map(e=>r.jsxs(d,{to:"/highlights?tag=".concat(encodeURIComponent(e)),className:"px-3 py-1.5 rounded-lg text-xs font-medium transition-all hover:scale-105",style:{background:"var(--hover-bg)",color:"var(--color-text-muted)"},children:["#",e]},e))})}),y.author&&r.jsxs(d,{to:"/u/".concat(y.author.shareCode),className:"flex items-center gap-3.5 rounded-2xl p-4 group transition-all hover:scale-[1.01]",style:{background:"var(--card-bg)",border:"1px solid var(--glass-border)"},children:[y.author.avatar?r.jsx("img",{src:y.author.avatar,alt:"",className:"w-12 h-12 rounded-xl object-cover ring-2 ring-purple-500/20",onError:a}):r.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center text-sm text-white",style:{background:"linear-gradient(135deg, #8b5cf6, #ec4899)"},children:y.author.cnName[0]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-semibold group-hover:text-purple-400 transition-colors truncate",style:{color:"var(--color-text)"},children:y.author.cnName}),r.jsx("p",{className:"text-xs mt-0.5",style:{color:"var(--color-text-muted)"},children:g("highlights.author")})]}),r.jsx("svg",{className:"w-4 h-4 opacity-40 group-hover:opacity-70 transition-opacity flex-shrink-0",style:{color:"var(--color-text-muted)"},fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]})]})]})}export{h as default};
