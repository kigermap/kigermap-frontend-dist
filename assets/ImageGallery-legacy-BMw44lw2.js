!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function r(e){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?t(Object(o),!0).forEach(function(t){n(e,t,o[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))})}return e}function n(t,r,n){return(r=function(t){var r=function(t,r){if("object"!=e(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var o=n.call(t,r||"default");if("object"!=e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"==e(r)?r:r+""}(r))in t?Object.defineProperty(t,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[r]=n,t}function o(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,r="function"==typeof Symbol?Symbol:{},n=r.iterator||"@@iterator",l=r.toStringTag||"@@toStringTag";function i(r,n,o,l){var i=n&&n.prototype instanceof c?n:c,u=Object.create(i.prototype);return a(u,"_invoke",function(r,n,o){var a,l,i,c=0,u=o||[],d=!1,f={p:0,n:0,v:e,a:m,f:m.bind(e,4),d:function(t,r){return a=t,l=0,i=e,f.n=r,s}};function m(r,n){for(l=r,i=n,t=0;!d&&c&&!o&&t<u.length;t++){var o,a=u[t],m=f.p,p=a[2];r>3?(o=p===n)&&(i=a[(l=a[4])?5:(l=3,3)],a[4]=a[5]=e):a[0]<=m&&((o=r<2&&m<a[1])?(l=0,f.v=n,f.n=a[1]):m<p&&(o=r<3||a[0]>n||n>p)&&(a[4]=r,a[5]=n,f.n=p,l=0))}if(o||r>1)return s;throw d=!0,n}return function(o,u,p){if(c>1)throw TypeError("Generator is already running");for(d&&1===u&&m(u,p),l=u,i=p;(t=l<2?e:i)||!d;){a||(l?l<3?(l>1&&(f.n=-1),m(l,i)):f.n=i:f.v=i);try{if(c=2,a){if(l||(o="next"),t=a[o]){if(!(t=t.call(a,i)))throw TypeError("iterator result is not an object");if(!t.done)return t;i=t.value,l<2&&(l=0)}else 1===l&&(t=a.return)&&t.call(a),l<2&&(i=TypeError("The iterator does not provide a '"+o+"' method"),l=1);a=e}else if((t=(d=f.n<0)?i:r.call(n,f))!==s)break}catch(t){a=e,l=1,i=t}finally{c=1}}return{value:t,done:d}}}(r,o,l),!0),u}var s={};function c(){}function u(){}function d(){}t=Object.getPrototypeOf;var f=[][n]?t(t([][n]())):(a(t={},n,function(){return this}),t),m=d.prototype=c.prototype=Object.create(f);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,a(e,l,"GeneratorFunction")),e.prototype=Object.create(m),e}return u.prototype=d,a(m,"constructor",d),a(d,"constructor",u),u.displayName="GeneratorFunction",a(d,l,"GeneratorFunction"),a(m),a(m,l,"Generator"),a(m,n,function(){return this}),a(m,"toString",function(){return"[object Generator]"}),(o=function(){return{w:i,m:p}})()}function a(e,t,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,r,n){function l(t,r){a(e,t,function(e){return this._invoke(t,r,e)})}t?o?o(e,t,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[t]=r:(l("next",0),l("throw",1),l("return",2))},a(e,t,r,n)}function l(e,t,r,n,o,a,l){try{var i=e[a](l),s=i.value}catch(e){return void r(e)}i.done?t(s):Promise.resolve(s).then(n,o)}function i(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var a=e.apply(t,r);function i(e){l(a,n,o,i,s,"next",e)}function s(e){l(a,n,o,i,s,"throw",e)}i(void 0)})}}function s(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a,l,i=[],s=!0,c=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(n=a.call(r)).done)&&(i.push(n.value),i.length!==t);s=!0);}catch(e){c=!0,o=e}finally{try{if(!s&&null!=r.return&&(l=r.return(),Object(l)!==l))return}finally{if(c)throw o}}return i}}(e,t)||u(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){if(e){if("string"==typeof e)return d(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}System.register(["./query-legacy-CLxXWLnl.js","./sentry-legacy-CTr2CudU.js","./index-legacy-DVoFAd51.js","./router-legacy-9xrJEksD.js","./store-legacy-Bt3CCSnU.js"],function(e,t){"use strict";var n,a,l,u,d,f;return{setters:[function(e){n=e.j},function(e){a=e.a},function(e){l=e.u,u=e.k,d=e.b},function(e){f=e.L},null],execute:function(){e("default",function(){var e=l().user,t=u().t,m=c(a.useState([]),2),p=m[0],x=m[1],h=c(a.useState([]),2),v=h[0],y=h[1],b=c(a.useState(""),2),g=b[0],j=b[1],k=c(a.useState(1),2),w=k[0],N=k[1],C=c(a.useState(0),2),S=C[0],O=C[1],L=c(a.useState(!0),2),A=L[0],P=L[1],M=c(a.useState(null),2),T=M[0],E=M[1];a.useEffect(function(){d.get("/imagegen/themes").then(function(e){y([{id:"",name:t("tools.gallery.all"),icon:"ðŸŽ¨"}].concat(s(e.data.categories||[])))}).catch(function(){})},[]);var I=a.useCallback(function(){var e=i(o().m(function e(t,r){var n,a;return o().w(function(e){for(;;)switch(e.p=e.n){case 0:return P(!0),e.p=1,n={page:t,limit:20},r&&(n.themeId=r),e.n=2,d.get("/imagegen/gallery",{params:n});case 2:a=e.v,x(1===t?a.data.creations||[]:function(e){return[].concat(s(e),s(a.data.creations||[]))}),O(a.data.total||0),e.n=4;break;case 3:e.p=3,e.v;case 4:return e.p=4,P(!1),e.f(4);case 5:return e.a(2)}},e,null,[[1,3,4,5]])}));return function(t,r){return e.apply(this,arguments)}}(),[]);a.useEffect(function(){N(1),I(1,g)},[g,I]);var D=function(){var t=i(o().m(function t(n){var a,l;return o().w(function(t){for(;;)switch(t.p=t.n){case 0:if(e){t.n=1;break}return t.a(2);case 1:if(-1!==(a=p.findIndex(function(e){return e.id===n.id}))){t.n=2;break}return t.a(2);case 2:if(l=n.liked,x(function(e){return e.map(function(e,t){return t===a?r(r({},e),{},{liked:!l,likeCount:e.likeCount+(l?-1:1)}):e})}),t.p=3,!l){t.n=5;break}return t.n=4,d.delete("/imagegen/gallery/".concat(n.id,"/like"));case 4:t.n=6;break;case 5:return t.n=6,d.post("/imagegen/gallery/".concat(n.id,"/like"));case 6:t.n=8;break;case 7:t.p=7,t.v,x(function(e){return e.map(function(e,t){return t===a?r(r({},e),{},{liked:l,likeCount:e.likeCount+(l?1:-1)}):e})});case 8:return t.a(2)}},t,null,[[3,7]])}));return function(e){return t.apply(this,arguments)}}(),z=function(){var e=i(o().m(function e(r){return o().w(function(e){for(;;)switch(e.p=e.n){case 0:if(confirm(t("tools.gallery.confirmDelete"))){e.n=1;break}return e.a(2);case 1:return e.p=1,e.n=2,d.delete("/imagegen/gallery/".concat(r));case 2:x(function(e){return e.filter(function(e){return e.id!==r})}),O(function(e){return e-1}),e.n=4;break;case 3:e.p=3,e.v;case 4:return e.a(2)}},e,null,[[1,3]])}));return function(t){return e.apply(this,arguments)}}(),B=function(e){var r=Date.now()-new Date(e).getTime(),n=Math.floor(r/6e4);if(n<1)return t("tools.gallery.justNow");if(n<60)return t("tools.gallery.minutesAgo",{n:n});var o=Math.floor(n/60);if(o<24)return t("tools.gallery.hoursAgo",{n:o});var a=Math.floor(o/24);return a<30?t("tools.gallery.daysAgo",{n:a}):new Date(e).toLocaleDateString()},G=p.length<S;return n.jsxs("div",{className:"min-h-screen",style:{backgroundColor:"var(--color-background)"},children:[n.jsx("header",{className:"sticky top-0 z-50 backdrop-blur-xl border-b",style:{backgroundColor:"var(--glass-dark-bg)",borderColor:"var(--color-border)"},children:n.jsxs("div",{className:"max-w-7xl mx-auto px-4 h-14 flex items-center justify-between",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(f,{to:"/tools",className:"hover:opacity-80 transition-opacity mr-3",style:{color:"var(--color-text-muted)"},children:n.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),n.jsx("h1",{className:"text-lg font-semibold",style:{color:"var(--color-text)"},children:t("tools.gallery.title")}),S>0&&n.jsxs("span",{className:"ml-2 text-xs px-2 py-0.5 rounded-full",style:{backgroundColor:"var(--input-bg)",color:"var(--color-text-muted)"},children:[S," ",t("tools.gallery.works")]})]}),n.jsx(f,{to:"/tools/image-generator",className:"px-4 py-2 rounded-xl bg-gradient-to-r from-purple-600 to-pink-600 text-white text-sm font-medium hover:from-purple-500 hover:to-pink-500 transition-all",children:t("tools.gallery.goCreate")})]})}),n.jsxs("main",{className:"max-w-7xl mx-auto px-3 sm:px-4 py-4 sm:py-6",children:[n.jsx("div",{className:"flex gap-2 mb-5 overflow-x-auto pb-1 scrollbar-hide flex-wrap",children:v.map(function(e){return n.jsxs("button",{onClick:function(){return j(e.id)},className:"shrink-0 px-3 sm:px-4 py-1.5 sm:py-2 rounded-full text-xs sm:text-sm transition-all ".concat(g===e.id?"bg-purple-500/20 text-purple-300 border border-purple-500/30":"border border-transparent"),style:g!==e.id?{backgroundColor:"var(--input-bg)",color:"var(--color-text-muted)"}:void 0,children:[e.icon," ",e.name]},e.id)})}),0!==p.length||A?n.jsx("div",{className:"columns-2 md:columns-3 lg:columns-4 xl:columns-5 gap-3 sm:gap-4",children:p.map(function(r){var o,a;return n.jsxs("div",{className:"break-inside-avoid mb-3 sm:mb-4 group relative rounded-xl sm:rounded-2xl overflow-hidden transition-all hover:shadow-lg hover:shadow-purple-500/5",style:{backgroundColor:"var(--glass-bg)",border:"1px solid var(--color-border)"},children:[n.jsxs("div",{className:"relative cursor-pointer",onClick:function(){return E(r.resultUrl)},children:[n.jsx("img",{src:r.resultUrl,alt:r.themeName,className:"w-full block",loading:"lazy"}),n.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-200 hidden sm:flex flex-col justify-end p-3",children:n.jsxs("div",{className:"flex items-center gap-2",children:[r.userAvatar?n.jsx("img",{src:r.userAvatar,alt:"",className:"w-6 h-6 rounded-full object-cover ring-1 ring-white/20"}):n.jsx("div",{className:"w-6 h-6 rounded-full bg-purple-500/30 flex items-center justify-center text-[10px] text-white",children:(null===(o=r.userName)||void 0===o?void 0:o[0])||"?"}),n.jsx("span",{className:"text-xs text-white/90 truncate flex-1",children:r.userCode?n.jsx(f,{to:"/u/".concat(r.userCode),className:"hover:underline",onClick:function(e){return e.stopPropagation()},children:r.userName}):r.userName}),n.jsx("span",{className:"text-[10px] text-white/50 shrink-0",children:B(r.createdAt)})]})})]}),n.jsxs("div",{className:"px-2.5 py-2 sm:px-3 sm:py-2.5",children:[n.jsxs("div",{className:"flex items-center gap-1.5 mb-1.5 sm:hidden",children:[r.userAvatar?n.jsx("img",{src:r.userAvatar,alt:"",className:"w-5 h-5 rounded-full object-cover"}):n.jsx("div",{className:"w-5 h-5 rounded-full bg-purple-500/20 flex items-center justify-center text-[10px]",style:{color:"var(--color-text-muted)"},children:(null===(a=r.userName)||void 0===a?void 0:a[0])||"?"}),n.jsx("span",{className:"text-[11px] truncate flex-1",style:{color:"var(--color-text-muted)"},children:r.userCode?n.jsx(f,{to:"/u/".concat(r.userCode),className:"hover:text-purple-400 transition-colors",children:r.userName}):r.userName}),n.jsx("span",{className:"text-[10px] shrink-0",style:{color:"var(--color-text-muted)",opacity:.5},children:B(r.createdAt)})]}),n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("span",{className:"text-[10px] sm:text-xs px-1.5 sm:px-2 py-0.5 rounded-full truncate max-w-[60%]",style:{backgroundColor:"var(--input-bg)",color:"var(--color-text-muted)"},children:[r.themeIcon," ",r.themeName]}),n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsxs("button",{onClick:function(){return D(r)},className:"flex items-center gap-0.5 text-xs transition-colors ".concat(r.liked?"text-pink-400":"hover:text-pink-400"),style:r.liked?void 0:{color:"var(--color-text-muted)"},children:[n.jsx("svg",{className:"w-3.5 h-3.5",fill:r.liked?"currentColor":"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),r.likeCount>0&&n.jsx("span",{className:"text-[10px]",children:r.likeCount})]}),n.jsx(f,{to:"/tools/image-generator?theme=".concat(r.themeId),className:"hover:text-purple-300 transition-colors",style:{color:"var(--color-text-muted)"},title:t("tools.gallery.useSame"),children:n.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),e&&r.userId===e.id&&n.jsx("button",{onClick:function(){return z(r.id)},className:"hover:text-red-400 transition-colors",style:{color:"var(--color-text-muted)"},children:n.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})]})]},r.id)})}):n.jsxs("div",{className:"flex flex-col items-center justify-center py-20",style:{color:"var(--color-text-muted)"},children:[n.jsx("svg",{className:"w-16 h-16 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),n.jsx("p",{className:"text-sm",children:t("tools.gallery.emptyText")}),n.jsx(f,{to:"/tools/image-generator",className:"mt-4 text-purple-400 text-sm hover:text-purple-300",children:t("tools.gallery.goCreateFirst")})]}),G&&n.jsx("div",{className:"flex justify-center mt-8",children:n.jsx("button",{onClick:function(){var e=w+1;N(e),I(e,g)},disabled:A,className:"px-8 py-3 rounded-xl transition-colors text-sm disabled:opacity-40",style:{backgroundColor:"var(--input-bg)",color:"var(--color-text-muted)"},children:t(A?"tools.gallery.loading":"tools.gallery.loadMore")})}),A&&0===p.length&&n.jsx("div",{className:"flex justify-center py-20",children:n.jsx("div",{className:"w-10 h-10 border-2 border-purple-500 border-t-transparent rounded-full animate-spin"})})]}),T&&n.jsxs("div",{className:"fixed inset-0 z-[100] bg-black/90 flex items-center justify-center p-4",onClick:function(){return E(null)},children:[n.jsx("button",{className:"absolute top-4 right-4 text-white/60 hover:text-white transition-colors z-10",children:n.jsx("svg",{className:"w-8 h-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:n.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),n.jsx("img",{src:T,alt:t("tools.gallery.preview"),className:"max-w-full max-h-full object-contain rounded-lg",onClick:function(e){return e.stopPropagation()}})]})]})})}}})}();
