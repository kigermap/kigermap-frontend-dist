import{u as e,b as t,j as s}from"./query-DSsWWIdM.js";import{a as r}from"./sentry-DvvTOdwe.js";import{u as i,e as l,g as a,o as n,s as o,j as d,q as c,r as x,p as h}from"./index-D0yqgRjz.js";import{d as m,a as u,L as p}from"./router-jbVFofSC.js";import"./store-BXxpTH1V.js";function g(){var g;const{slug:j}=m(),{isAuthenticated:v}=i(),[f,b]=r.useState("info"),[w,N]=r.useState(null),[k,y]=r.useState(!1),[L,M]=r.useState(!1),[C,z]=r.useState(!1),[B,W]=r.useState(""),[S,H]=r.useState(new Set),[T,q]=r.useState(null),[V,E]=r.useState(null),[F,I]=r.useState(!0),{showNotification:K,NotificationComponent:P}=l({position:"center"}),R=u(),O=e(),{data:_,isLoading:A,error:D}=t({queryKey:["shop",j],queryFn:()=>h.getShop(j).then(e=>e.data),enabled:!!j}),J=(null==_?void 0:_.shop)||null,Q=(null==_?void 0:_.users)||[],X=(null==_?void 0:_.userCount)||0;r.useEffect(()=>{J&&(document.title="".concat(J.name," - Kigurumiå¤´å£³å·¥åŠå¯¼èˆª | KigerMap"))},[J]);const{data:G}=t({queryKey:["shop-categories",null==J?void 0:J.id],queryFn:()=>h.getCategories(J.id).then(e=>e.data),enabled:!!(null==J?void 0:J.id)}),{data:U}=t({queryKey:["shop-products",null==J?void 0:J.id,B],queryFn:()=>h.getProducts(J.id,B||void 0).then(e=>e.data),enabled:!!(null==J?void 0:J.id)}),Y=(null==G?void 0:G.categories)||[],Z=(null==U?void 0:U.products)||[],$=(e,t)=>{navigator.clipboard.writeText(e),E(t),K("å·²å¤åˆ¶","success"),setTimeout(()=>{E(null)},2e3)};if(A)return s.jsx("div",{className:"min-h-screen bg-[#0a0a0f] flex items-center justify-center",children:s.jsx("div",{className:"w-12 h-12 border-4 border-purple-500/30 border-t-purple-500 rounded-full animate-spin"})});if(D||!J)return s.jsxs("div",{className:"min-h-screen bg-[#0a0a0f] flex flex-col items-center justify-center px-4",children:[s.jsx("div",{className:"w-24 h-24 mb-6 rounded-full bg-white/5 flex items-center justify-center",children:s.jsx("span",{className:"text-5xl",children:"ðŸ˜¢"})}),s.jsx("h1",{className:"text-2xl font-bold mb-2",children:"å·¥åŠä¸å­˜åœ¨"}),s.jsx("p",{className:"text-white/50 mb-6",children:"è¯¥å·¥åŠå¯èƒ½å·²è¢«åˆ é™¤æˆ–é“¾æŽ¥é”™è¯¯"}),s.jsx(p,{to:"/shops",className:"px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl font-medium",children:"è¿”å›žå·¥åŠåˆ—è¡¨"})]});const ee=J.tags?"string"==typeof J.tags?JSON.parse(J.tags):J.tags:[],te=(J.gallery?"string"==typeof J.gallery?JSON.parse(J.gallery):J.gallery:[]).map(e=>a(e)||e),se=(null==(g=J.features)?void 0:g.split(/[,ï¼Œã€\n]/).filter(Boolean))||[],re=[{key:"website",icon:"ðŸŒ",label:"ç½‘ç«™",value:J.website,isLink:!0},{key:"taobao",icon:"ðŸ›’",label:"æ·˜å®",value:J.taobao,isLink:!0},{key:"xianyu",icon:"ðŸŸ",label:"é—²é±¼",value:J.xianyu,isLink:!0},{key:"twitter",icon:"ð•",label:"X",value:J.twitter?"https://x.com/".concat(J.twitter):null,isLink:!0},{key:"weibo",icon:"ðŸ“±",label:"å¾®åš",value:J.weibo,isLink:!0}].filter(e=>e.value);return s.jsxs("div",{className:"min-h-screen bg-[#0a0a0f]",children:[P,s.jsx("style",{children:"\n        @keyframes gradientShift {\n          0%, 100% { background-position: 0% 50%; }\n          50% { background-position: 100% 50%; }\n        }\n        .animated-gradient {\n          background: linear-gradient(-45deg, #1a1a2e, #16213e, #0f3460, #1a1a2e, #2d1b4e, #1a1a2e);\n          background-size: 400% 400%;\n          animation: gradientShift 8s ease infinite;\n        }\n      "}),s.jsxs("div",{className:"fixed top-4 left-4 z-50 flex items-center gap-2",children:[s.jsx(p,{to:"https://kighub.cn/",className:"flex items-center justify-center w-10 h-10 bg-black/50 backdrop-blur-sm rounded-full text-white/80 hover:text-white hover:bg-black/70 transition",title:"è¿”å›žé¦–é¡µ",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"})})}),s.jsxs(p,{to:"/shops",className:"flex items-center gap-2 px-4 py-2 bg-black/50 backdrop-blur-sm rounded-full text-sm text-white/80 hover:text-white hover:bg-black/70 transition",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"è¿”å›žåˆ—è¡¨"]})]}),s.jsxs("div",{className:"relative h-64 sm:h-80 lg:h-96",children:[J.coverImage?s.jsx("img",{src:a(J.coverImage),alt:"".concat(J.name," å°é¢å›¾"),className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full animated-gradient"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#0a0a0f] via-[#0a0a0f]/50 to-transparent"})]}),s.jsxs("div",{className:"relative max-w-5xl mx-auto px-4 -mt-32 sm:-mt-40",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start gap-4 sm:gap-6 mb-6",children:[s.jsxs("div",{className:"relative flex-shrink-0",children:[s.jsx("div",{className:"w-24 h-24 sm:w-28 sm:h-28 rounded-2xl bg-gradient-to-br from-purple-600 to-pink-600 flex items-center justify-center overflow-hidden shadow-2xl ring-4 ring-[#0a0a0f]",children:s.jsx("img",{src:a(J.logo)||n,alt:J.name,className:"w-full h-full object-cover",onError:e=>{e.target.src=n}})}),J.isVerified&&s.jsx("div",{className:"absolute -bottom-2 -right-2 w-8 h-8 bg-cyan-500 rounded-full flex items-center justify-center shadow-lg",children:s.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]}),s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex flex-wrap gap-2 mb-2",children:[s.jsxs("span",{className:"inline-flex items-center gap-1.5 px-3 py-1 rounded-full text-xs font-medium ".concat(J.acceptingOrders?"bg-green-500/20 text-green-400 border border-green-500/30":"bg-red-500/20 text-red-400 border border-red-500/30"),children:[s.jsx("span",{className:"w-1.5 h-1.5 rounded-full ".concat(J.acceptingOrders?"bg-green-400":"bg-red-400")}),J.acceptingOrders?"æŽ¥å•ä¸­":"æš‚åœæŽ¥å•"]}),J.isFeatured&&s.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-gradient-to-r from-amber-500/20 to-orange-500/20 border border-amber-500/30 rounded-full text-xs font-medium text-amber-400",children:[s.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),"æŽ¨èå·¥åŠ"]}),J.lat&&J.lng&&s.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-gradient-to-r from-cyan-500/20 to-blue-500/20 border border-cyan-500/30 rounded-full text-xs font-medium text-cyan-400",children:[s.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})}),"å·²å®šä½"]}),!J.hasManager&&s.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-white/10 border border-white/20 rounded-full text-xs font-medium text-white/60",children:[s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"})}),"ç¾¤å‹åˆ†äº«"]})]}),s.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-white mb-1",children:J.name}),J.nameEn&&s.jsx("p",{className:"text-white/50 mb-2",children:J.nameEn}),s.jsxs("div",{className:"flex items-center gap-3 text-sm text-white/50",children:[s.jsx("span",{children:J.region||J.country}),s.jsx("span",{children:"Â·"}),s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),(J.viewCount||0).toLocaleString()," æµè§ˆ"]})]}),s.jsxs("div",{className:"flex gap-3 mt-4",children:[s.jsxs("button",{onClick:async()=>{if(!v)return K("è¯·å…ˆç™»å½•","error"),void setTimeout(()=>{R("/login")},1e3);J&&(z(!0),setTimeout(()=>{M(!L),z(!1)},500))},disabled:C,className:"flex items-center gap-2 px-5 py-2.5 rounded-xl text-sm font-medium transition ".concat(L?"bg-pink-500 text-white":"bg-gradient-to-r from-pink-500 to-purple-500 text-white hover:opacity-90"," ").concat(C?"opacity-50":""),children:[s.jsx("svg",{className:"w-4 h-4",fill:L?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),L?"å·²æ”¶è—":"æ”¶è—å·¥åŠ"]}),s.jsxs("button",{onClick:()=>y(!0),className:"flex items-center gap-2 px-5 py-2.5 bg-white/10 border border-white/10 rounded-xl text-sm font-medium text-white hover:bg-white/20 transition lg:hidden",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),"è”ç³»"]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-3 mb-8",children:[s.jsxs("div",{className:"p-4 bg-white/5 border border-white/5 rounded-2xl",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-green-500/20 flex items-center justify-center mb-3",children:s.jsx("svg",{className:"w-5 h-5 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})})}),s.jsx("div",{className:"text-xl sm:text-2xl font-bold text-white",children:"ç²¾å·¥å®šåˆ¶"}),s.jsx("div",{className:"text-xs text-white/40",children:"å·¥è‰ºç‰¹è‰²"})]}),s.jsxs("div",{className:"p-4 bg-white/5 border border-white/5 rounded-2xl",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-blue-500/20 flex items-center justify-center mb-3",children:s.jsx("svg",{className:"w-5 h-5 text-blue-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsx("div",{className:"text-xl sm:text-2xl font-bold text-white",children:(null==J?void 0:J.leadTimeNote)?J.leadTimeNote:(null==J?void 0:J.leadTimeMin)||(null==J?void 0:J.leadTimeMax)?J.leadTimeMin&&J.leadTimeMax?"".concat(J.leadTimeMin,"-").concat(J.leadTimeMax,"å¤©"):"".concat(J.leadTimeMax||J.leadTimeMin,"å¤©"):"å·¥æœŸé¢è®®"}),s.jsx("div",{className:"text-xs text-white/40",children:"åˆ¶ä½œå·¥æœŸ"})]}),s.jsxs("div",{className:"p-4 bg-white/5 border border-white/5 rounded-2xl",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-purple-500/20 flex items-center justify-center mb-3",children:s.jsx("svg",{className:"w-5 h-5 text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0z"})})}),s.jsx("div",{className:"text-xl sm:text-2xl font-bold text-white",children:X.toLocaleString()}),s.jsx("div",{className:"text-xs text-white/40",children:"ç”¨æˆ·é€‰æ‹©"})]}),s.jsxs("div",{className:"p-4 bg-white/5 border border-white/5 rounded-2xl",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-pink-500/20 flex items-center justify-center mb-3",children:s.jsx("svg",{className:"w-5 h-5 text-pink-400",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})}),s.jsx("div",{className:"text-xl sm:text-2xl font-bold text-white",children:(J.favoriteCount||0).toLocaleString()}),s.jsx("div",{className:"text-xs text-white/40",children:"æ”¶è—æ•°"})]})]}),!J.hasManager&&s.jsx("div",{className:"mb-8 p-4 bg-amber-500/10 border border-amber-500/20 rounded-2xl",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"w-10 h-10 rounded-xl bg-amber-500/20 flex items-center justify-center flex-shrink-0",children:s.jsx("svg",{className:"w-5 h-5 text-amber-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),s.jsxs("div",{children:[s.jsx("h4",{className:"text-sm font-medium text-amber-400 mb-1",children:"ç¾¤å‹åˆ†äº«"}),s.jsx("p",{className:"text-sm text-white/60",children:"å½“å‰å·¥åŠæ•°æ®æ¥è‡ªç¾¤å‹åˆ†äº«ï¼Œä»…ä¾›å‚è€ƒã€‚å¦‚æœ‰ç–‘é—®è¯·è”ç³»å·¥åŠç¡®è®¤ã€‚"})]})]})}),s.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"flex gap-1 p-1 bg-white/5 rounded-xl mb-6 w-fit",children:[{id:"info",label:"ä»‹ç»"},{id:"works",label:"ä½œå“"},{id:"gallery",label:"å›¾åº“"},{id:"users",label:"ç”¨æˆ·"}].map(e=>s.jsx("button",{onClick:()=>b(e.id),className:"px-6 py-2 rounded-lg text-sm font-medium transition ".concat(f===e.id?"bg-gradient-to-r from-pink-500 to-purple-500 text-white":"text-white/50 hover:text-white"),children:e.label},e.id))}),"info"===f&&s.jsxs("div",{className:"space-y-6",children:[(J.descriptionHtml||J.description)&&s.jsxs("section",{children:[s.jsx("h2",{className:"text-lg font-bold text-white mb-3",children:"å…³äºŽå·¥åŠ"}),J.descriptionHtml?s.jsx("div",{className:"prose prose-invert prose-sm max-w-none text-white/70\n                          prose-p:my-2 prose-p:leading-relaxed\n                          prose-headings:text-white prose-headings:font-bold\n                          prose-a:text-purple-400 prose-a:no-underline hover:prose-a:underline\n                          prose-strong:text-white prose-strong:font-semibold\n                          prose-ul:my-2 prose-ol:my-2\n                          prose-li:my-0.5\n                          prose-img:rounded-xl prose-img:my-4",dangerouslySetInnerHTML:{__html:o(J.descriptionHtml)}}):s.jsx("p",{className:"text-white/70 leading-relaxed whitespace-pre-wrap",children:J.description})]}),se.length>0&&s.jsxs("section",{children:[s.jsx("h2",{className:"text-lg font-bold text-white mb-3",children:"ç‰¹è‰²ä¸Žä¼˜åŠ¿"}),s.jsx("div",{className:"space-y-2",children:se.map((e,t)=>s.jsxs("div",{className:"flex items-center gap-3 p-4 bg-white/5 border border-white/5 rounded-xl",children:[s.jsx("div",{className:"w-6 h-6 rounded-full bg-purple-500/20 flex items-center justify-center flex-shrink-0",children:s.jsx("svg",{className:"w-4 h-4 text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),s.jsx("span",{className:"text-white/80",children:e.trim()})]},t))})]}),ee.length>0&&s.jsxs("section",{children:[s.jsx("h2",{className:"text-lg font-bold text-white mb-3",children:"å·¥è‰ºæ ‡ç­¾"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:ee.map((e,t)=>s.jsx("span",{className:"px-3 py-1.5 bg-white/5 border border-white/10 rounded-lg text-sm text-white/70",children:e},t))})]}),!J.description&&!J.descriptionHtml&&0===se.length&&0===ee.length&&s.jsxs("div",{className:"text-center py-16",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-white/5 flex items-center justify-center",children:s.jsx("span",{className:"text-3xl",children:"ðŸ“"})}),s.jsx("p",{className:"text-white/50",children:"æš‚æ— ä»‹ç»ä¿¡æ¯"})]})]}),"works"===f&&s.jsxs("div",{className:"space-y-8",children:[Y.length>0&&s.jsxs("div",{className:"flex flex-wrap gap-2 p-1 bg-white/[0.02] rounded-2xl border border-white/[0.04]",children:[s.jsx("button",{onClick:()=>W(""),className:"px-5 py-2.5 rounded-xl text-sm font-medium transition-all duration-300 ".concat(""===B?"bg-gradient-to-r from-violet-500 via-purple-500 to-fuchsia-500 text-white shadow-lg shadow-purple-500/25":"text-white/50 hover:text-white hover:bg-white/[0.06]"),children:"å…¨éƒ¨ä½œå“"}),Y.map(e=>s.jsxs("button",{onClick:()=>W(e.id),className:"px-5 py-2.5 rounded-xl text-sm font-medium transition-all duration-300 ".concat(B===e.id?"bg-gradient-to-r from-violet-500 via-purple-500 to-fuchsia-500 text-white shadow-lg shadow-purple-500/25":"text-white/50 hover:text-white hover:bg-white/[0.06]"),children:[e.name,e.productCount?s.jsx("span",{className:"ml-1.5 px-1.5 py-0.5 text-[10px] bg-white/10 rounded-md",children:e.productCount}):null]},e.id))]}),Z.length>0?s.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-6",children:Z.map((e,t)=>{var r,i;const l=((null==(r=e.images)?void 0:r.length)||0)+(e.coverImage?1:0);return s.jsx(p,{to:"/shops/".concat(j,"/products/").concat(e.slug||e.id),className:"group relative block",style:{animationDelay:"".concat(50*t,"ms")},children:s.jsxs("div",{className:"relative bg-gradient-to-b from-white/[0.08] to-white/[0.02] rounded-2xl sm:rounded-3xl overflow-hidden border border-white/[0.08] transition-all duration-500 group-hover:border-purple-500/30 group-hover:shadow-2xl group-hover:shadow-purple-500/10 group-hover:-translate-y-1",children:[s.jsxs("div",{className:"relative aspect-[3/4] overflow-hidden",children:[e.coverImage?s.jsxs(s.Fragment,{children:[s.jsx("img",{src:a(e.coverImage),alt:e.name,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-110"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-black/30 to-transparent opacity-60"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-600/0 to-pink-600/0 group-hover:from-purple-600/20 group-hover:to-pink-600/20 transition-all duration-500"})]}):s.jsx("div",{className:"w-full h-full bg-gradient-to-br from-purple-900/50 via-violet-900/30 to-fuchsia-900/50 flex items-center justify-center",children:s.jsx("span",{className:"text-6xl sm:text-7xl opacity-50 group-hover:opacity-70 group-hover:scale-110 transition-all duration-500",children:"ðŸŽ­"})}),s.jsxs("div",{className:"absolute top-2 sm:top-3 left-2 sm:left-3 right-2 sm:right-3 flex justify-between items-start",children:[s.jsxs("div",{className:"flex flex-wrap gap-1 sm:gap-1.5",children:[e.isNew&&s.jsxs("span",{className:"px-2 py-0.5 sm:px-2.5 sm:py-1 bg-emerald-500 text-white text-[9px] sm:text-[10px] font-bold rounded-full shadow-lg shadow-emerald-500/50 flex items-center gap-1",children:[s.jsx("span",{className:"w-1 h-1 sm:w-1.5 sm:h-1.5 bg-white rounded-full animate-pulse"}),"NEW"]}),e.isFeatured&&s.jsxs("span",{className:"px-2 py-0.5 sm:px-2.5 sm:py-1 bg-gradient-to-r from-amber-400 to-orange-500 text-white text-[9px] sm:text-[10px] font-bold rounded-full shadow-lg shadow-amber-500/50 flex items-center gap-1",children:[s.jsx("svg",{className:"w-2 h-2 sm:w-2.5 sm:h-2.5",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),"ç²¾é€‰"]})]}),l>1&&s.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 bg-black/60 backdrop-blur-sm rounded-full",children:[s.jsx("svg",{className:"w-3 h-3 text-white/80",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),s.jsx("span",{className:"text-[10px] text-white/80 font-medium",children:l})]})]}),s.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-3 sm:p-4",children:[s.jsx("h3",{className:"text-sm sm:text-base font-bold text-white mb-1.5 sm:mb-2 line-clamp-2 drop-shadow-lg",children:e.name}),s.jsxs("div",{className:"flex flex-wrap gap-1 mb-2 sm:mb-3",children:[e.categoryName&&s.jsx("span",{className:"text-[9px] sm:text-[10px] text-white/90 bg-white/20 backdrop-blur-sm px-1.5 sm:px-2 py-0.5 rounded-full",children:e.categoryName}),null==(i=e.tags)?void 0:i.slice(0,2).map(e=>s.jsxs("span",{className:"text-[9px] sm:text-[10px] text-purple-200 bg-purple-500/40 backdrop-blur-sm px-1.5 sm:px-2 py-0.5 rounded-full",children:["#",e]},e))]}),s.jsxs("div",{className:"flex items-end justify-between",children:[s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("svg",{className:"w-4 h-4 text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"})}),s.jsx("span",{className:"text-xs sm:text-sm text-white/70",children:"ç²¾å·¥å®šåˆ¶"})]}),s.jsxs("div",{className:"flex items-center gap-1 text-[10px] sm:text-xs text-white/60 group-hover:text-white transition-colors",children:[s.jsx("span",{className:"hidden sm:inline",children:"æŸ¥çœ‹è¯¦æƒ…"}),s.jsx("svg",{className:"w-3 h-3 sm:w-4 sm:h-4 transform group-hover:translate-x-0.5 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]})]}),s.jsx("div",{className:"px-3 sm:px-4 py-2.5 sm:py-3 bg-black/20 border-t border-white/[0.05]",children:s.jsxs("div",{className:"flex items-center justify-between",children:[e.leadTime?s.jsxs("div",{className:"flex items-center gap-1.5 text-white/50",children:[s.jsx("svg",{className:"w-3.5 h-3.5 text-cyan-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),s.jsx("span",{className:"text-[10px] sm:text-xs",children:e.leadTime})]}):s.jsx("div",{}),s.jsxs("div",{className:"flex items-center gap-3 text-[10px] sm:text-xs text-white/40",children:[void 0!==e.viewCount&&e.viewCount>0&&s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsxs("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),e.viewCount]}),s.jsxs("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),(async e=>{if(!v)return K("è¯·å…ˆç™»å½•","error"),void setTimeout(()=>{R("/login")},1e3);if(!T){q(e);try{S.has(e)?(await x.unlikeProduct(e),H(t=>{const s=new Set(t);return s.delete(e),s})):(await x.likeProduct(e),H(t=>new Set(t).add(e))),O.invalidateQueries({queryKey:["shop-products",null==J?void 0:J.id]})}catch(t){}finally{q(null)}}})(e.id)},disabled:T===e.id,className:"flex items-center gap-1 transition-all ".concat(S.has(e.id)?"text-pink-400":"hover:text-pink-400"," ").concat(T===e.id?"opacity-50":""),children:[s.jsx("svg",{className:"w-3.5 h-3.5",fill:S.has(e.id)?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),(e.likeCount||0)+(S.has(e.id)?1:0)]})]})]})})]})},e.id)})}):te.length>0?s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:te.map((e,t)=>s.jsxs("button",{onClick:()=>N(e),className:"group relative aspect-square rounded-2xl overflow-hidden bg-white/5 ring-1 ring-white/10 hover:ring-purple-500/50 transition-all duration-300",children:[s.jsx("img",{src:e,alt:"",className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:s.jsx("div",{className:"w-12 h-12 bg-white/20 backdrop-blur-md rounded-full flex items-center justify-center",children:s.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"})})})})]},t))}):s.jsxs("div",{className:"text-center py-20",children:[s.jsxs("div",{className:"relative inline-block",children:[s.jsx("div",{className:"absolute inset-0 blur-3xl bg-purple-500/20 rounded-full"}),s.jsx("div",{className:"relative w-24 h-24 mx-auto mb-6 rounded-full bg-gradient-to-br from-white/10 to-white/5 border border-white/10 flex items-center justify-center",children:s.jsx("span",{className:"text-4xl",children:"ðŸŽ¨"})})]}),s.jsx("p",{className:"text-white/40 text-lg",children:"æš‚æ— ä½œå“å±•ç¤º"}),s.jsx("p",{className:"text-white/20 text-sm mt-2",children:"æ•¬è¯·æœŸå¾…æ›´å¤šç²¾å½©ä½œå“"})]})]}),"gallery"===f&&s.jsx("div",{children:te.length>0?s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-4",children:te.map((e,t)=>s.jsxs("div",{className:"group relative aspect-square rounded-2xl overflow-hidden bg-white/5 ring-1 ring-white/10 hover:ring-purple-500/50 transition-all duration-300",children:[s.jsx("img",{src:e,alt:"",className:"w-full h-full object-cover transition-transform duration-500 group-hover:scale-110 cursor-pointer",onClick:()=>N(e)}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/70 via-transparent to-transparent"}),s.jsxs("div",{className:"absolute bottom-0 left-0 right-0 p-3 flex items-center justify-between",children:[s.jsxs("span",{className:"text-xs text-white/60",children:["#",t+1]}),s.jsx("button",{onClick:()=>N(e),className:"w-8 h-8 bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center hover:bg-white/30 transition",children:s.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"})})})]})]},t))}):s.jsxs("div",{className:"text-center py-20",children:[s.jsxs("div",{className:"relative inline-block",children:[s.jsx("div",{className:"absolute inset-0 blur-3xl bg-purple-500/20 rounded-full"}),s.jsx("div",{className:"relative w-24 h-24 mx-auto mb-6 rounded-full bg-gradient-to-br from-white/10 to-white/5 border border-white/10 flex items-center justify-center",children:s.jsx("span",{className:"text-4xl",children:"ðŸ–¼ï¸"})})]}),s.jsx("p",{className:"text-white/40 text-lg",children:"æš‚æ— å›¾åº“å±•ç¤º"}),s.jsx("p",{className:"text-white/20 text-sm mt-2",children:"å·¥åŠè¿˜æœªä¸Šä¼ å±•ç¤ºå›¾ç‰‡"})]})}),"users"===f&&s.jsx("div",{children:Q.length>0?s.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-4",children:Q.map(e=>s.jsxs(p,{to:"/u/".concat(e.shareCode),className:"group text-center",children:[s.jsx("div",{className:"aspect-square rounded-xl overflow-hidden mb-2 bg-white/5 ring-2 ring-transparent group-hover:ring-purple-500/50 transition",children:s.jsx("img",{src:c(e.avatar),alt:e.cnName,className:"w-full h-full object-cover",onError:d})}),s.jsx("p",{className:"text-sm text-white/70 truncate group-hover:text-purple-400 transition",children:e.cnName})]},e.id))}):s.jsxs("div",{className:"text-center py-16",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-white/5 flex items-center justify-center",children:s.jsx("span",{className:"text-3xl",children:"ðŸ‘¥"})}),s.jsx("p",{className:"text-white/50",children:"æš‚æ— ç”¨æˆ·å…³è”"})]})})]}),v&&s.jsx("div",{className:"hidden lg:block lg:w-80 flex-shrink-0",children:s.jsxs("div",{className:"sticky top-4 p-5 bg-white/5 border border-white/5 rounded-2xl",children:[s.jsxs("h3",{className:"flex items-center gap-2 text-sm font-medium text-white/60 mb-4",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),"è”ç³»æ–¹å¼"]}),v?re.length>0?s.jsx("div",{className:"space-y-2",children:re.map(e=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-xl",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-lg",children:e.icon}),s.jsx("span",{className:"text-sm text-white/70",children:e.label})]}),e.isLink?s.jsx("a",{href:e.value,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-white/40 hover:text-purple-400 transition",children:"è®¿é—® â†’"}):s.jsxs("button",{onClick:()=>$(e.value,e.key),className:"flex items-center gap-1 text-xs text-white/40 hover:text-purple-400 transition",children:[e.value,V===e.key?s.jsx("svg",{className:"w-3.5 h-3.5",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{clipRule:"evenodd",fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z"})}):s.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})]})]},e.key))}):s.jsx("p",{className:"text-center text-white/40 py-4",children:"æš‚æ— è”ç³»æ–¹å¼"}):s.jsxs("div",{className:"text-center py-6",children:[s.jsx("div",{className:"w-12 h-12 mx-auto mb-3 rounded-full bg-white/5 flex items-center justify-center",children:s.jsx("svg",{className:"w-6 h-6 text-white/30",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),s.jsx("p",{className:"text-sm text-white/40 mb-3",children:"ç™»å½•åŽæŸ¥çœ‹è”ç³»æ–¹å¼"}),s.jsx(p,{to:"/login",className:"inline-block px-5 py-2 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl text-sm font-medium text-white hover:opacity-90 transition",children:"åŽ»ç™»å½•"})]})]})})]})]}),w&&s.jsxs("div",{className:"fixed inset-0 bg-black/95 z-50 flex items-center justify-center p-4",onClick:()=>N(null),children:[s.jsx("button",{className:"absolute top-4 right-4 w-12 h-12 rounded-full bg-white/10 hover:bg-white/20 flex items-center justify-center transition",onClick:()=>N(null),children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),s.jsx("img",{src:w,alt:"",className:"max-w-full max-h-full object-contain rounded-lg",onClick:e=>e.stopPropagation()})]}),k&&s.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-end sm:items-center justify-center",onClick:()=>y(!1),children:s.jsxs("div",{className:"bg-[#1a1a24] rounded-t-3xl sm:rounded-2xl w-full sm:max-w-md max-h-[80vh] overflow-y-auto",onClick:e=>e.stopPropagation(),children:[s.jsxs("div",{className:"sticky top-0 bg-[#1a1a24] p-4 border-b border-white/10 flex items-center justify-between",children:[s.jsx("h3",{className:"text-lg font-semibold",children:"è”ç³»æ–¹å¼"}),s.jsx("button",{onClick:()=>y(!1),className:"w-8 h-8 rounded-full bg-white/10 flex items-center justify-center",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsx("div",{className:"p-4 space-y-3",children:v?re.length>0?re.map(e=>s.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-xl",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-xl",children:e.icon}),s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium",children:e.label}),!e.isLink&&s.jsx("div",{className:"text-xs text-white/50",children:e.value})]})]}),e.isLink?s.jsx("a",{href:e.value,target:"_blank",rel:"noopener noreferrer",className:"px-4 py-2 bg-purple-500/20 text-purple-400 rounded-lg text-sm hover:bg-purple-500/30 transition",children:"è®¿é—®"}):s.jsx("button",{onClick:()=>$(e.value,e.key),className:"px-4 py-2 bg-white/10 rounded-lg text-sm hover:bg-white/20 transition",children:V===e.key?"å·²å¤åˆ¶":"å¤åˆ¶"})]},e.key)):s.jsx("div",{className:"text-center py-8 text-white/50",children:"æš‚æ— è”ç³»æ–¹å¼"}):s.jsxs("div",{className:"text-center py-8",children:[s.jsx("div",{className:"w-14 h-14 mx-auto mb-4 rounded-full bg-white/5 flex items-center justify-center",children:s.jsx("svg",{className:"w-7 h-7 text-white/30",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),s.jsx("p",{className:"text-sm text-white/40 mb-4",children:"ç™»å½•åŽæŸ¥çœ‹è”ç³»æ–¹å¼"}),s.jsx(p,{to:"/login",onClick:()=>y(!1),className:"inline-block px-6 py-2.5 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl text-sm font-medium text-white hover:opacity-90 transition",children:"åŽ»ç™»å½•"})]})})]})}),s.jsx("div",{className:"h-20"}),F&&s.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-black/80 backdrop-blur-md border-t border-white/10 py-3 px-4 text-center text-sm text-white/60",children:s.jsxs("div",{className:"max-w-4xl mx-auto flex items-center justify-center gap-4",children:[s.jsx("span",{className:"flex-1",children:"* å†…å®¹æ¥è‡ªäº’è”ç½‘ï¼Œæœ¬ç«™ä»…ä½œæ”¶é›†æ•´ç†ï¼Œæœªå¼€å±•ä»»ä½•å•†ä¸šæ´»åŠ¨"}),s.jsx("button",{onClick:()=>I(!1),className:"w-6 h-6 rounded-full bg-white/10 flex items-center justify-center hover:bg-white/20 transition-colors",children:s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})]})}export{g as default};
