!function(){function e(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var n,r,a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",o=a.toStringTag||"@@toStringTag";function c(e,a,i,o){var c=a&&a.prototype instanceof u?a:u,l=Object.create(c.prototype);return t(l,"_invoke",function(e,t,a){var i,o,c,u=0,l=a||[],d=!1,f={p:0,n:0,v:n,a:p,f:p.bind(n,4),d:function(e,t){return i=e,o=0,c=n,f.n=t,s}};function p(e,t){for(o=e,c=t,r=0;!d&&u&&!a&&r<l.length;r++){var a,i=l[r],p=f.p,m=i[2];e>3?(a=m===t)&&(c=i[(o=i[4])?5:(o=3,3)],i[4]=i[5]=n):i[0]<=p&&((a=e<2&&p<i[1])?(o=0,f.v=t,f.n=i[1]):p<m&&(a=e<3||i[0]>t||t>m)&&(i[4]=e,i[5]=t,f.n=m,o=0))}if(a||e>1)return s;throw d=!0,t}return function(a,l,m){if(u>1)throw TypeError("Generator is already running");for(d&&1===l&&p(l,m),o=l,c=m;(r=o<2?n:c)||!d;){i||(o?o<3?(o>1&&(f.n=-1),p(o,c)):f.n=c:f.v=c);try{if(u=2,i){if(o||(a="next"),r=i[a]){if(!(r=r.call(i,c)))throw TypeError("iterator result is not an object");if(!r.done)return r;c=r.value,o<2&&(o=0)}else 1===o&&(r=i.return)&&r.call(i),o<2&&(c=TypeError("The iterator does not provide a '"+a+"' method"),o=1);i=n}else if((r=(d=f.n<0)?c:e.call(t,f))!==s)break}catch(r){i=n,o=1,c=r}finally{u=1}}return{value:r,done:d}}}(e,i,o),!0),l}var s={};function u(){}function l(){}function d(){}r=Object.getPrototypeOf;var f=[][i]?r(r([][i]())):(t(r={},i,function(){return this}),r),p=d.prototype=u.prototype=Object.create(f);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,t(e,o,"GeneratorFunction")),e.prototype=Object.create(p),e}return l.prototype=d,t(p,"constructor",d),t(d,"constructor",l),l.displayName="GeneratorFunction",t(d,o,"GeneratorFunction"),t(p),t(p,o,"Generator"),t(p,i,function(){return this}),t(p,"toString",function(){return"[object Generator]"}),(e=function(){return{w:c,m:m}})()}function t(e,n,r,a){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}t=function(e,n,r,a){function o(n,r){t(e,n,function(e){return this._invoke(n,r,e)})}n?i?i(e,n,{value:r,enumerable:!a,configurable:!a,writable:!a}):e[n]=r:(o("next",0),o("throw",1),o("return",2))},t(e,n,r,a)}function n(e,t,n,r,a,i,o){try{var c=e[i](o),s=c.value}catch(e){return void n(e)}c.done?t(s):Promise.resolve(s).then(r,a)}function r(e){return function(){var t=this,r=arguments;return new Promise(function(a,i){var o=e.apply(t,r);function c(e){n(o,a,i,c,s,"next",e)}function s(e){n(o,a,i,c,s,"throw",e)}c(void 0)})}}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,i,o,c=[],s=!0,u=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);s=!0);}catch(e){u=!0,a=e}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw a}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}System.register(["./query-legacy-CLxXWLnl.js","./sentry-legacy-CTr2CudU.js","./index-legacy-DVoFAd51.js","./router-legacy-9xrJEksD.js","./store-legacy-Bt3CCSnU.js"],function(t,n){"use strict";var i,o,c,s,u,l;return{setters:[function(e){i=e.j},function(e){o=e.a},function(e){c=e.u,s=e.b},function(e){u=e.c,l=e.a},null],execute:function(){t("default",function(){var t=a(u(),1)[0],n=l(),d=c(function(e){return e.fetchUser}),f=a(o.useState(""),2),p=f[0],m=f[1],h=a(o.useState(!0),2),x=h[0],v=h[1],b=a(o.useState(null),2),y=b[0],j=b[1],w=a(o.useState(""),2),g=w[0],N=w[1],k=a(o.useState(""),2),q=k[0],S=k[1],O=a(o.useState(!1),2),T=O[0],Q=O[1],A=a(o.useState(""),2),C=A[0],G=A[1];o.useEffect(function(){var a=t.get("code");if(!a)return m("æŽˆæƒå¤±è´¥ï¼Œç¼ºå°‘æŽˆæƒç "),void v(!1);s.get("/auth/qq/callback",{params:{code:a,state:t.get("state")||""}}).then(function(){var t=r(e().m(function t(r){var a;return e().w(function(e){for(;;)switch(e.n){case 0:if(null===(a=r.data)||void 0===a||!a.needBind){e.n=1;break}j({bindToken:r.data.bindToken,qqNickname:r.data.qqNickname||"",qqAvatar:r.data.qqAvatar||""}),v(!1),e.n=3;break;case 1:return e.n=2,d();case 2:n("/",{replace:!0});case 3:return e.a(2)}},t)}));return function(e){return t.apply(this,arguments)}}()).catch(function(e){var t;m((null===(t=e.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.error)||"QQ ç™»å½•å¤±è´¥ï¼Œè¯·é‡è¯•"),v(!1)})},[t,n,d]);var P=function(){var t=r(e().m(function t(r){var a,i;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:if(r.preventDefault(),y){e.n=1;break}return e.a(2);case 1:return Q(!0),G(""),e.p=2,e.n=3,s.post("/auth/qq/bind",{bindToken:y.bindToken,email:g,password:q});case 3:return e.n=4,d();case 4:n("/",{replace:!0}),e.n=6;break;case 5:e.p=5,i=e.v,G((null===(a=i.response)||void 0===a||null===(a=a.data)||void 0===a?void 0:a.error)||"ç»‘å®šå¤±è´¥"),Q(!1);case 6:return e.a(2)}},t,null,[[2,5]])}));return function(e){return t.apply(this,arguments)}}(),_=function(){var t=r(e().m(function t(){var r,a;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:if(y){e.n=1;break}return e.a(2);case 1:return Q(!0),G(""),e.p=2,e.n=3,s.post("/auth/qq/bind-new",{bindToken:y.bindToken});case 3:return e.n=4,d();case 4:n("/",{replace:!0}),e.n=6;break;case 5:e.p=5,a=e.v,G((null===(r=a.response)||void 0===r||null===(r=r.data)||void 0===r?void 0:r.error)||"åˆ›å»ºå¤±è´¥"),Q(!1);case 6:return e.a(2)}},t,null,[[2,5]])}));return function(){return t.apply(this,arguments)}}();if(x)return i.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:i.jsxs("div",{className:"glass-dark rounded-3xl p-8 w-full max-w-md text-center",children:[i.jsx("div",{className:"w-10 h-10 border-2 border-purple-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),i.jsx("p",{className:"text-white/70",children:"æ­£åœ¨é€šè¿‡ QQ ç™»å½•..."})]})});if(p)return i.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:i.jsxs("div",{className:"glass-dark rounded-3xl p-8 w-full max-w-md text-center",children:[i.jsx("div",{className:"text-4xl mb-4",children:"ðŸ˜¢"}),i.jsx("p",{className:"text-red-400 mb-4",children:p}),i.jsx("button",{onClick:function(){return n("/login",{replace:!0})},className:"px-6 py-2 btn-gradient rounded-xl text-white",children:"è¿”å›žç™»å½•"})]})});if(y)return i.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4 relative",children:[i.jsx("div",{className:"bg-animated"}),i.jsxs("div",{className:"glass-dark rounded-3xl p-8 w-full max-w-md",children:[i.jsxs("div",{className:"text-center mb-6",children:[y.qqAvatar&&i.jsx("img",{src:y.qqAvatar,alt:"QQå¤´åƒ",className:"w-16 h-16 rounded-full mx-auto mb-3"}),i.jsx("p",{className:"text-white text-lg",children:y.qqNickname||"QQ ç”¨æˆ·"}),i.jsx("p",{className:"text-white/50 text-sm mt-1",children:"é¦–æ¬¡ä½¿ç”¨ QQ ç™»å½•ï¼Œè¯·é€‰æ‹©æ“ä½œ"})]}),C&&i.jsx("div",{className:"p-3 bg-red-500/20 border border-red-500/30 rounded-xl text-red-300 text-sm mb-4",children:C}),i.jsxs("div",{className:"mb-6",children:[i.jsx("p",{className:"text-white/70 text-sm mb-3",children:"å·²æœ‰è´¦æˆ·ï¼Ÿè¾“å…¥é‚®ç®±å¯†ç ç»‘å®š QQï¼š"}),i.jsxs("form",{onSubmit:P,className:"space-y-3",children:[i.jsx("input",{type:"email",value:g,onChange:function(e){return N(e.target.value)},placeholder:"é‚®ç®±",required:!0,className:"w-full px-4 py-3 input-modern rounded-xl text-white placeholder-white/30 outline-none"}),i.jsx("input",{type:"password",value:q,onChange:function(e){return S(e.target.value)},placeholder:"å¯†ç ",required:!0,minLength:6,className:"w-full px-4 py-3 input-modern rounded-xl text-white placeholder-white/30 outline-none"}),i.jsx("button",{type:"submit",disabled:T,className:"w-full py-3 btn-gradient rounded-xl font-medium text-white disabled:opacity-50",children:T?"ç»‘å®šä¸­...":"ç»‘å®šå·²æœ‰è´¦æˆ·"})]})]}),i.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[i.jsx("div",{className:"flex-1 h-px bg-white/10"}),i.jsx("span",{className:"text-white/30 text-xs",children:"æˆ–è€…"}),i.jsx("div",{className:"flex-1 h-px bg-white/10"})]}),i.jsx("button",{onClick:_,disabled:T,className:"w-full py-3 rounded-xl font-medium text-white/80 border border-white/20 hover:border-white/40 transition disabled:opacity-50",children:T?"åˆ›å»ºä¸­...":"ç›´æŽ¥åˆ›å»ºæ–°è´¦æˆ·"}),i.jsx("div",{className:"mt-4 text-center",children:i.jsx("button",{onClick:function(){return n("/login",{replace:!0})},className:"text-white/40 hover:text-white/60 text-sm transition",children:"è¿”å›žç™»å½•"})})]})]});return null})}}})}();
