import{b as e,j as t}from"./query-DSsWWIdM.js";import{a as s}from"./sentry-DvvTOdwe.js";import{u as r,a as i,g as l,c as o,d as n}from"./index-D0yqgRjz.js";import{S as a}from"./ShareCard-BU7LqUqe.js";import{S as c}from"./SocialLinks-6XJGczaC.js";import{a as d,L as x}from"./router-jbVFofSC.js";import"./store-BXxpTH1V.js";function h(){const{user:h,isAuthenticated:m,logout:u}=r(),{t:p}=i(),f=d(),[j,v]=s.useState(0),[b,w]=s.useState(!1),[g,k]=s.useState(!1),[N,y]=s.useState(null),[L,C]=s.useState("photos"),{data:M,isLoading:W}=e({queryKey:["profile"],queryFn:()=>n.getProfile().then(e=>e.data),enabled:m,staleTime:0,refetchOnWindowFocus:!0}),B=null==M?void 0:M.profile;if(W)return t.jsxs("div",{className:"min-h-screen bg-[#0a0a0f]",children:[t.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-purple-900/10 via-transparent to-cyan-900/10 pointer-events-none"}),t.jsx("div",{className:"relative h-64 sm:h-80 bg-gradient-to-br from-purple-900/30 to-[#0a0a0f]",children:t.jsx("div",{className:"absolute inset-0 animate-pulse bg-white/5"})}),t.jsx("div",{className:"max-w-4xl mx-auto px-4 -mt-20 relative z-10",children:t.jsx("div",{className:"bg-white/[0.02] border border-white/[0.06] rounded-2xl p-6 animate-pulse",children:t.jsxs("div",{className:"flex items-end gap-4 mb-6",children:[t.jsx("div",{className:"w-32 h-32 rounded-2xl bg-white/10"}),t.jsxs("div",{className:"flex-1 pb-4",children:[t.jsx("div",{className:"h-6 bg-white/10 rounded w-1/3 mb-2"}),t.jsx("div",{className:"h-4 bg-white/10 rounded w-1/4"})]})]})})})]});if(!B||!(null==h?void 0:h.hasProfile))return t.jsxs("div",{className:"min-h-screen bg-[#0a0a0f] flex items-center justify-center",children:[t.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-purple-900/10 via-transparent to-cyan-900/10 pointer-events-none"}),t.jsxs("div",{className:"text-center max-w-md mx-auto px-4 relative",children:[t.jsx("div",{className:"w-32 h-32 mx-auto mb-8 rounded-2xl bg-gradient-to-br from-purple-500/20 to-pink-500/20 flex items-center justify-center",children:t.jsx("span",{className:"text-6xl",children:"ðŸŽ­"})}),t.jsx("h1",{className:"text-3xl font-bold text-white mb-4",children:p("profile.createTitle")}),t.jsx("p",{className:"text-white/60 mb-8 leading-relaxed",children:p("profile.createDescription")}),t.jsxs(x,{to:"/profile/edit",className:"inline-flex items-center gap-2 px-8 py-4 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl text-white font-semibold hover:opacity-90 transition shadow-lg shadow-purple-500/25",children:[t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),p("profile.startCreate")]})]})]});const P=B.photos||[],H=B.location?[B.location.city,B.location.province,B.location.country].filter(e=>e&&"æœªçŸ¥"!==e).join(" Â· "):[B.city,B.province,B.country].filter(e=>e&&"æœªçŸ¥"!==e).join(" Â· ")||p("profile.defaultLocation"),z=l(B.avatar)||l(P[0]),S=l(B.coverImage)||l(P[0])||null,V=B.coverPosition||{x:50,y:50},q=B.socialLinks?Object.keys(c).filter(e=>{var t,s,r,i;return(null==(s=null==(t=B.socialLinks)?void 0:t[e])?void 0:s.nickname)||(null==(i=null==(r=B.socialLinks)?void 0:r[e])?void 0:i.url)}).map(e=>({key:e,data:B.socialLinks[e],platform:c[e]})):[],A={id:B.id,cnName:B.cnName,avatar:B.avatar,introduction:B.introduction,photos:B.photos,shareCode:B.shareCode,location:B.location||{lat:B.lat||0,lng:B.lng||0,country:B.country,province:B.province,city:B.city}};return t.jsxs("div",{className:"min-h-screen bg-[#0a0a0f]",children:[t.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-purple-900/10 via-transparent to-cyan-900/10 pointer-events-none"}),t.jsxs("div",{className:"relative h-[40vh] md:h-[45vh] min-h-[280px] max-h-[400px]",children:[S?t.jsx("img",{src:S,alt:"",className:"w-full h-full object-cover",style:{objectPosition:"".concat(V.x,"% ").concat(V.y,"%")}}):t.jsx("div",{className:"w-full h-full bg-gradient-to-br from-purple-600 via-pink-500 to-cyan-500"}),t.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#0a0a0f] via-[#0a0a0f]/50 to-transparent"}),t.jsx("div",{className:"absolute top-6 right-6 flex gap-2",children:t.jsxs(x,{to:"/profile/edit",className:"inline-flex items-center gap-2 px-4 py-2 bg-white/10 backdrop-blur-sm border border-white/20 rounded-xl text-sm text-white hover:bg-white/20 transition",children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),p("profile.edit")]})})]}),t.jsx("div",{className:"relative max-w-4xl mx-auto px-4 -mt-20 md:-mt-24",children:t.jsxs("div",{className:"flex flex-col md:flex-row items-center md:items-end gap-4 md:gap-6",children:[t.jsxs("div",{className:"relative flex-shrink-0",children:[t.jsx("div",{className:"w-28 h-28 md:w-32 md:h-32 rounded-2xl overflow-hidden ring-4 ring-[#0a0a0f] shadow-2xl bg-white/5",children:z?t.jsx("img",{src:z,alt:B.cnName,className:"w-full h-full object-cover"}):t.jsx("div",{className:"w-full h-full flex items-center justify-center text-5xl",children:"ðŸŽ­"})}),t.jsx("div",{className:"absolute bottom-1 right-1 w-5 h-5 bg-green-500 rounded-full border-2 border-[#0a0a0f]"})]}),t.jsxs("div",{className:"flex-1 text-center md:text-left",children:[t.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-white mb-2",children:B.cnName}),t.jsxs("div",{className:"flex items-center justify-center md:justify-start gap-2 text-white/60 text-sm mb-3",children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"})}),t.jsx("span",{children:H})]}),t.jsx("p",{className:"text-white/70 text-sm md:text-base leading-relaxed max-w-2xl",children:B.introduction})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:async()=>{if(!B)return;const e="".concat(window.location.origin,"/u/").concat(B.shareCode);await navigator.clipboard.writeText(e),k(!0),setTimeout(()=>k(!1),2e3)},className:"px-4 py-2 rounded-xl backdrop-blur-md text-sm transition-all ".concat(g?"bg-green-500/30 text-green-400":"bg-white/10 hover:bg-white/20"),children:p(g?"profile.copied":"profile.share")}),t.jsx("button",{onClick:()=>w(!0),className:"px-4 py-2 rounded-xl bg-white/10 hover:bg-white/20 text-sm transition-all",children:p("profile.qrCode")})]})]})}),t.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[t.jsxs("div",{className:"bg-white/[0.02] border border-white/[0.06] rounded-2xl overflow-hidden",children:[t.jsxs("div",{className:"px-4 py-3 border-b border-white/[0.06] flex items-center gap-2",children:[t.jsx("svg",{className:"w-4 h-4 text-white/40",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),t.jsx("h3",{className:"text-sm font-medium text-white/60",children:p("profile.socialMedia")})]}),t.jsx("div",{className:"p-4",children:q.length>0?t.jsx("div",{className:"space-y-2",children:q.map(({key:e,data:s,platform:r})=>{const i=t.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white/[0.03] hover:bg-white/[0.06] rounded-xl transition-all group",children:[t.jsx("div",{className:"w-10 h-10 ".concat(r.color," text-white rounded-xl flex items-center justify-center flex-shrink-0"),children:r.icon}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("div",{className:"text-xs text-white/40 mb-0.5",children:r.name}),t.jsx("div",{className:"text-sm text-white/90 truncate",children:s.nickname||p("profile.clickVisit")})]}),s.url&&t.jsx("svg",{className:"w-4 h-4 text-white/30 group-hover:text-white/60 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})})]});return s.url?t.jsx("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",children:i},e):t.jsx("div",{children:i},e)})}):t.jsxs("div",{className:"text-center py-6",children:[t.jsx("div",{className:"w-12 h-12 mx-auto mb-3 bg-white/5 rounded-xl flex items-center justify-center",children:t.jsx("svg",{className:"w-6 h-6 text-white/30",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})})}),t.jsx("p",{className:"text-sm text-white/40",children:p("profile.noSocial")}),t.jsx(x,{to:"/profile/edit",className:"text-xs text-purple-400 hover:text-purple-300 mt-2 inline-block",children:p("profile.goAdd")})]})})]}),t.jsxs("div",{className:"bg-white/[0.02] border border-white/[0.06] rounded-2xl overflow-hidden",children:[t.jsxs("div",{className:"px-4 py-3 border-b border-white/[0.06] flex items-center gap-2",children:[t.jsx("svg",{className:"w-4 h-4 text-white/40",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),t.jsx("h3",{className:"text-sm font-medium text-white/60",children:p("profile.quickActions")})]}),t.jsxs("div",{className:"p-4 space-y-2",children:[t.jsxs(x,{to:"/profile/edit",className:"flex items-center gap-3 p-3 bg-white/[0.03] hover:bg-white/[0.06] rounded-xl transition-all group",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500/20 to-pink-500/20 rounded-xl flex items-center justify-center",children:t.jsx("svg",{className:"w-5 h-5 text-purple-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"text-sm text-white/90",children:p("profile.editProfile")}),t.jsx("div",{className:"text-xs text-white/40",children:p("profile.editProfileDesc")})]}),t.jsx("svg",{className:"w-4 h-4 text-white/30 group-hover:text-white/60",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),t.jsxs(x,{to:"/u/".concat(B.shareCode),className:"flex items-center gap-3 p-3 bg-white/[0.03] hover:bg-white/[0.06] rounded-xl transition-all group",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-cyan-500/20 to-blue-500/20 rounded-xl flex items-center justify-center",children:t.jsxs("svg",{className:"w-5 h-5 text-cyan-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"text-sm text-white/90",children:p("profile.viewPublic")}),t.jsx("div",{className:"text-xs text-white/40",children:p("profile.viewPublicDesc")})]}),t.jsx("svg",{className:"w-4 h-4 text-white/30 group-hover:text-white/60",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),t.jsxs("button",{onClick:()=>{u(),f("/")},className:"w-full flex items-center gap-3 p-3 bg-white/[0.03] hover:bg-red-500/10 rounded-xl transition-all group",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-red-500/20 to-orange-500/20 rounded-xl flex items-center justify-center",children:t.jsx("svg",{className:"w-5 h-5 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})}),t.jsxs("div",{className:"flex-1 text-left",children:[t.jsx("div",{className:"text-sm text-white/90",children:p("logout")}),t.jsx("div",{className:"text-xs text-white/40",children:p("profile.logoutDesc")})]}),t.jsx("svg",{className:"w-4 h-4 text-white/30 group-hover:text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]})]}),t.jsxs("div",{className:"flex gap-1 p-1 bg-white/[0.03] border border-white/[0.06] rounded-xl mb-6",children:[t.jsxs("button",{onClick:()=>C("photos"),className:"flex-1 py-2.5 rounded-lg text-sm font-medium transition-all ".concat("photos"===L?"bg-white/10 text-white":"text-white/50 hover:text-white/70"),children:[p("profile.photoWall")," (",P.length,")"]}),t.jsx("button",{onClick:()=>C("albums"),className:"flex-1 py-2.5 rounded-lg text-sm font-medium transition-all ".concat("albums"===L?"bg-white/10 text-white":"text-white/50 hover:text-white/70"),children:p("profile.albums")})]}),"photos"===L&&t.jsx("div",{className:"pb-20 md:pb-8",children:P.length>0?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"relative aspect-[4/3] rounded-xl overflow-hidden mb-4 bg-white/5",children:[t.jsx("img",{src:l(P[j])||P[j],alt:"".concat(p("profile.photoAlt")," ").concat(j+1),className:"w-full h-full object-contain cursor-pointer",onClick:()=>y(l(P[j])||P[j])}),P.length>1&&t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>v(e=>0===e?P.length-1:e-1),className:"absolute left-4 top-1/2 -translate-y-1/2 w-10 h-10 bg-black/50 backdrop-blur-sm rounded-full flex items-center justify-center text-white hover:bg-black/70 transition",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),t.jsx("button",{onClick:()=>v(e=>e===P.length-1?0:e+1),className:"absolute right-4 top-1/2 -translate-y-1/2 w-10 h-10 bg-black/50 backdrop-blur-sm rounded-full flex items-center justify-center text-white hover:bg-black/70 transition",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),t.jsxs("div",{className:"absolute bottom-4 right-4 px-3 py-1 bg-black/50 backdrop-blur-sm rounded-full text-sm text-white",children:[j+1," / ",P.length]})]}),P.length>1&&t.jsx("div",{className:"flex gap-2 overflow-x-auto scrollbar-hide pb-2",children:P.map((e,s)=>t.jsx("button",{onClick:()=>v(s),className:"flex-shrink-0 w-20 h-20 rounded-lg overflow-hidden transition ".concat(s===j?"ring-2 ring-purple-500 ring-offset-2 ring-offset-[#0a0a0f]":"opacity-60 hover:opacity-100"),children:t.jsx("img",{src:o(e)||l(e)||e,alt:"".concat(p("profile.thumbAlt")," ").concat(s+1),className:"w-full h-full object-cover"})},s))})]}):t.jsxs("div",{className:"text-center py-16",children:[t.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-white/5 rounded-2xl flex items-center justify-center",children:t.jsx("svg",{className:"w-8 h-8 text-white/30",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),t.jsx("p",{className:"text-white/40 text-sm mb-4",children:p("profile.noPhotos")}),t.jsx(x,{to:"/profile/edit",className:"text-purple-400 hover:text-purple-300 text-sm",children:p("profile.goUpload")})]})}),"albums"===L&&t.jsx("div",{className:"pb-20 md:pb-8",children:t.jsxs("div",{className:"text-center py-16",children:[t.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-white/5 rounded-2xl flex items-center justify-center",children:t.jsx("svg",{className:"w-8 h-8 text-white/30",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),t.jsx("p",{className:"text-white/40 text-sm",children:p("profile.albumsComing")})]})})]}),N&&t.jsxs("div",{className:"fixed inset-0 bg-black/95 z-50 flex items-center justify-center",onClick:()=>y(null),children:[t.jsx("button",{className:"absolute top-4 right-4 w-12 h-12 rounded-full bg-white/10 hover:bg-white/20 flex items-center justify-center transition",onClick:()=>y(null),children:t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),t.jsx("img",{src:N,alt:"",className:"max-w-full max-h-full object-contain",onClick:e=>e.stopPropagation()})]}),b&&t.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>w(!1),children:t.jsxs("div",{className:"rounded-2xl p-5 max-w-sm w-full",style:{backgroundColor:"#1a1a24",color:"#ffffff"},onClick:e=>e.stopPropagation(),children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"font-bold text-lg",style:{color:"#ffffff"},children:p("profile.shareTitle")}),t.jsx("button",{onClick:()=>w(!1),className:"w-9 h-9 rounded-full flex items-center justify-center transition",style:{backgroundColor:"rgba(255,255,255,0.1)",color:"#ffffff"},children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),t.jsx(a,{user:A})]})})]})}export{h as default};
