!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=h(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){o=!0,s=e},f:function(){try{a||null==n.return||n.return()}finally{if(o)throw s}}}}function n(t){if(null!=t){var n=t["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],i=0;if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length))return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}}}throw new TypeError(e(t)+" is not iterable")}function i(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,t,n="function"==typeof Symbol?Symbol:{},s=n.iterator||"@@iterator",a=n.toStringTag||"@@toStringTag";function o(n,i,s,a){var o=i&&i.prototype instanceof c?i:c,d=Object.create(o.prototype);return r(d,"_invoke",function(n,i,r){var s,a,o,c=0,d=r||[],u=!1,h={p:0,n:0,v:e,a:x,f:x.bind(e,4),d:function(t,n){return s=t,a=0,o=e,h.n=n,l}};function x(n,i){for(a=n,o=i,t=0;!u&&c&&!r&&t<d.length;t++){var r,s=d[t],x=h.p,m=s[2];n>3?(r=m===i)&&(o=s[(a=s[4])?5:(a=3,3)],s[4]=s[5]=e):s[0]<=x&&((r=n<2&&x<s[1])?(a=0,h.v=i,h.n=s[1]):x<m&&(r=n<3||s[0]>i||i>m)&&(s[4]=n,s[5]=i,h.n=m,a=0))}if(r||n>1)return l;throw u=!0,i}return function(r,d,m){if(c>1)throw TypeError("Generator is already running");for(u&&1===d&&x(d,m),a=d,o=m;(t=a<2?e:o)||!u;){s||(a?a<3?(a>1&&(h.n=-1),x(a,o)):h.n=o:h.v=o);try{if(c=2,s){if(a||(r="next"),t=s[r]){if(!(t=t.call(s,o)))throw TypeError("iterator result is not an object");if(!t.done)return t;o=t.value,a<2&&(a=0)}else 1===a&&(t=s.return)&&t.call(s),a<2&&(o=TypeError("The iterator does not provide a '"+r+"' method"),a=1);s=e}else if((t=(u=h.n<0)?o:n.call(i,h))!==l)break}catch(t){s=e,a=1,o=t}finally{c=1}}return{value:t,done:u}}}(n,s,a),!0),d}var l={};function c(){}function d(){}function u(){}t=Object.getPrototypeOf;var h=[][s]?t(t([][s]())):(r(t={},s,function(){return this}),t),x=u.prototype=c.prototype=Object.create(h);function m(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,r(e,a,"GeneratorFunction")),e.prototype=Object.create(x),e}return d.prototype=u,r(x,"constructor",u),r(u,"constructor",d),d.displayName="GeneratorFunction",r(u,a,"GeneratorFunction"),r(x),r(x,a,"Generator"),r(x,s,function(){return this}),r(x,"toString",function(){return"[object Generator]"}),(i=function(){return{w:o,m:m}})()}function r(e,t,n,i){var s=Object.defineProperty;try{s({},"",{})}catch(e){s=0}r=function(e,t,n,i){function a(t,n){r(e,t,function(e){return this._invoke(t,n,e)})}t?s?s(e,t,{value:n,enumerable:!i,configurable:!i,writable:!i}):e[t]=n:(a("next",0),a("throw",1),a("return",2))},r(e,t,n,i)}function s(e,t,n,i,r,s,a){try{var o=e[s](a),l=o.value}catch(e){return void n(e)}o.done?t(l):Promise.resolve(l).then(i,r)}function a(e){return function(){var t=this,n=arguments;return new Promise(function(i,r){var a=e.apply(t,n);function o(e){s(a,i,r,o,l,"next",e)}function l(e){s(a,i,r,o,l,"throw",e)}o(void 0)})}}function o(e){return function(e){if(Array.isArray(e))return x(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||h(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,i)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach(function(t){d(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function d(t,n,i){return(n=function(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,n||"default");if("object"!=e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}(n))in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,s,a,o=[],l=!0,c=!1;try{if(s=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=s.call(n)).done)&&(o.push(i.value),o.length!==t);l=!0);}catch(e){c=!0,r=e}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw r}}return o}}(e,t)||h(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){if(e){if("string"==typeof e)return x(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(e,t):void 0}}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}System.register(["./query-legacy-CLxXWLnl.js","./sentry-legacy-CTr2CudU.js","./index-legacy-DVoFAd51.js","./LocationPicker-legacy-BoEIOYqg.js","./SocialLinks-legacy-CDCyjHb5.js","./router-legacy-9xrJEksD.js","./store-legacy-Bt3CCSnU.js"],function(e,r){"use strict";var s,l,h,x,m,f,p,b,v,g,w,j,y,k,N,C;return{setters:[function(e){s=e.j,l=e.u,h=e.b},function(e){x=e.a},function(e){m=e.k,f=e.b,p=e.c,b=e.g,v=e.u,g=e.m,w=e.d,j=e.v},function(e){y=e.L},function(e){k=e.a},function(e){N=e.a,C=e.L},null],execute:function(){function r(e){var t,n,i,r=e.value,a=e.onChange,l=m().t,h=u(x.useState(!1),2),f=h[0],p=h[1],b=u(x.useState(""),2),v=b[0],g=b[1],w=[{label:l("ai.presetLively"),value:"ÊÄßÊ†ºÊ¥ªÊ≥ºÂºÄÊúóÔºåÂñúÊ¨¢Âíå‰∫∫ËÅäÂ§©ÔºåËØ¥ËØùÂÖÖÊª°Ê¥ªÂäõ"},{label:l("ai.presetGentle"),value:"ÊÄßÊ†ºÊ∏©ÊüîÂèØÁà±ÔºåËØ¥ËØùËΩªÂ£∞ÁªÜËØ≠ÔºåÂæàÊúâËÄêÂøÉ"},{label:l("ai.presetTsundere"),value:"Ë°®Èù¢ÂÇ≤Â®á‰ΩÜÂÜÖÂøÉÊ∏©ÊüîÔºåÂò¥‰∏äËØ¥‰∏çË¶Å‰ΩÜË∫´‰ΩìÂæàËØöÂÆû"},{label:l("ai.presetEnergetic"),value:"ÂÖÉÊ∞îÊª°Êª°ÁöÑÁ±ªÂûãÔºåÊÄªÊòØÂÖÖÊª°Ê≠£ËÉΩÈáèÔºåÂñúÊ¨¢ÈºìÂä±Âà´‰∫∫"},{label:l("ai.presetMysterious"),value:"ÊúâÁÇπÁ•ûÁßòÈ´òÂÜ∑ÔºåËØù‰∏çÂ§ö‰ΩÜËØ¥ÁöÑÈÉΩÂæàÊúâÊ∑±Â∫¶"}],j=[{label:l("ai.toneCute"),value:'ËØ¥ËØùÂèØÁà±ÔºåÂñúÊ¨¢Áî®"Âë¢"„ÄÅ"Âì¶"„ÄÅ"Âï¶"Á≠âËØ≠Ê∞îËØçÔºåÂÅ∂Â∞îÁî®È¢úÊñáÂ≠ó'},{label:l("ai.toneEnergetic"),value:"ËØ¥ËØùÂÖÖÊª°Ê¥ªÂäõÔºåÂñúÊ¨¢Áî®ÊÑüÂèπÂè∑ÔºåËØ≠Ê∞îÁßØÊûÅÂêë‰∏ä"},{label:l("ai.toneLiterary"),value:"ËØ¥ËØùÊñáËâ∫‰ºòÈõÖÔºåÁî®ËØçËÆ≤Á©∂ÔºåÂÅ∂Â∞îÂºïÁî®ËØóÂè•"},{label:l("ai.toneJapanese"),value:"Â∏¶ÊúâÊó•Á≥ª‰∫åÊ¨°ÂÖÉÈ£éÊ†ºÔºåÂÅ∂Â∞îÁî®Êó•ËØ≠ËØçÊ±áÂíåË°®ÊÉÖ"},{label:l("ai.toneNatural"),value:"ËØ¥ËØùËá™ÁÑ∂ÈöèÂíåÔºåÂÉèÊúãÂèã‰∏ÄÊ†∑ËÅäÂ§©"}],y=["Cosplay","Kigurumi",l("ai.interestAnime"),l("ai.interestGaming"),l("ai.interestDrawing"),l("ai.interestPhotography"),l("ai.interestMusic"),l("ai.interestDance"),l("ai.interestHandcraft"),l("ai.interestTravel"),l("ai.interestFood"),l("ai.interestSubculture")],k={extroversion:{label:l("ai.traitExtroversion"),low:l("ai.traitExtroversionLow"),high:l("ai.traitExtroversionHigh")},friendliness:{label:l("ai.traitFriendliness"),low:l("ai.traitFriendlinessLow"),high:l("ai.traitFriendlinessHigh")},creativity:{label:l("ai.traitCreativity"),low:l("ai.traitCreativityLow"),high:l("ai.traitCreativityHigh")},humor:{label:l("ai.traitHumor"),low:l("ai.traitHumorLow"),high:l("ai.traitHumorHigh")},energy:{label:l("ai.traitEnergy"),low:l("ai.traitEnergyLow"),high:l("ai.traitEnergyHigh")}},N=r?c(c({},r),{},{interests:r.interests||[],traits:r.traits||{extroversion:50,friendliness:70,creativity:50,humor:50,energy:60},advanced:r.advanced||{speakingSpeed:"normal",emojiUsage:"normal",responseLength:"medium",catchphrase:"",tabooTopics:[]},mood:r.mood||{baseMode:"positive",traits:[],intensity:50}}):{enabled:!1,personality:"",tone:"",interests:[],customPrompt:"",traits:{extroversion:50,friendliness:70,creativity:50,humor:50,energy:60},advanced:{speakingSpeed:"normal",emojiUsage:"normal",responseLength:"medium",catchphrase:"",tabooTopics:[]},mood:{baseMode:"positive",traits:[],intensity:50}},C=function(e){a(c(c({},N),e))},L=function(e){C({advanced:c(c({},N.advanced),e)})},P=function(e){C({mood:c(c({},N.mood),e)})},S=function(e){var t,n=(null===(t=N.mood)||void 0===t?void 0:t.traits)||[],i=n.includes(e)?n.filter(function(t){return t!==e}):[].concat(o(n),[e]);P({traits:i})},M=function(e){var t=N.interests.includes(e)?N.interests.filter(function(t){return t!==e}):[].concat(o(N.interests),[e]);C({interests:t})},E=function(){var e=v.trim();e&&!N.interests.includes(e)&&(C({interests:[].concat(o(N.interests),[e])}),g(""))};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/5 rounded-xl",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-white",children:l("ai.enableChat")}),s.jsx("p",{className:"text-sm text-white/50",children:l("ai.enableChatDesc")})]}),s.jsx("button",{type:"button",onClick:function(){return C({enabled:!N.enabled})},className:"relative w-14 h-8 rounded-full transition-colors ".concat(N.enabled?"bg-gradient-to-r from-purple-500 to-pink-500":"bg-white/20"),children:s.jsx("span",{className:"absolute top-1 w-6 h-6 bg-white rounded-full transition-transform ".concat(N.enabled?"left-7":"left-1")})})]}),N.enabled&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-white/80",children:l("ai.personality")}),s.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:w.map(function(e){return s.jsx("button",{type:"button",onClick:function(){return C({personality:e.value})},className:"px-3 py-1.5 rounded-lg text-sm transition ".concat(N.personality===e.value?"bg-purple-500 text-white":"bg-white/10 text-white/70 hover:bg-white/20"),children:e.label},e.label)})}),s.jsx("textarea",{value:N.personality,onChange:function(e){return C({personality:e.target.value})},placeholder:l("ai.personalityPlaceholder"),rows:2,className:"w-full px-4 py-3 bg-white/10 rounded-xl text-white placeholder-white/30 outline-none resize-none"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-white/80",children:l("ai.tone")}),s.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:j.map(function(e){return s.jsx("button",{type:"button",onClick:function(){return C({tone:e.value})},className:"px-3 py-1.5 rounded-lg text-sm transition ".concat(N.tone===e.value?"bg-pink-500 text-white":"bg-white/10 text-white/70 hover:bg-white/20"),children:e.label},e.label)})}),s.jsx("textarea",{value:N.tone,onChange:function(e){return C({tone:e.target.value})},placeholder:l("ai.tonePlaceholder"),rows:2,className:"w-full px-4 py-3 bg-white/10 rounded-xl text-white placeholder-white/30 outline-none resize-none"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"block text-sm font-medium text-white/80",children:l("ai.interests")}),s.jsxs("div",{className:"flex flex-wrap gap-2 mb-2",children:[y.map(function(e){return s.jsx("button",{type:"button",onClick:function(){return M(e)},className:"px-3 py-1.5 rounded-lg text-sm transition ".concat(N.interests.includes(e)?"bg-cyan-500 text-white":"bg-white/10 text-white/70 hover:bg-white/20"),children:e},e)}),N.interests.filter(function(e){return!y.includes(e)}).map(function(e){return s.jsxs("button",{type:"button",onClick:function(){return M(e)},className:"px-3 py-1.5 rounded-lg text-sm bg-emerald-500 text-white flex items-center gap-1",children:[e,s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]},e)})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("input",{type:"text",value:v,onChange:function(e){return g(e.target.value)},onKeyDown:function(e){return"Enter"===e.key&&(e.preventDefault(),E())},placeholder:l("ai.customInterestPlaceholder"),maxLength:20,className:"flex-1 px-4 py-2 bg-white/10 rounded-xl text-white placeholder-white/30 outline-none text-sm"}),s.jsx("button",{type:"button",onClick:E,disabled:!v.trim(),className:"px-4 py-2 bg-emerald-500 hover:bg-emerald-400 disabled:opacity-50 rounded-xl text-white text-sm transition",children:l("ai.addButton")})]})]}),s.jsxs("button",{type:"button",onClick:function(){return p(!f)},className:"flex items-center gap-2 text-sm text-white/50 hover:text-white/70 transition",children:[s.jsx("svg",{className:"w-4 h-4 transition-transform ".concat(f?"rotate-90":""),fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),l("ai.advancedSettings")]}),f&&s.jsxs("div",{className:"space-y-6 p-4 bg-white/5 rounded-xl",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsxs("h5",{className:"text-sm font-medium text-white/80 flex items-center gap-2",children:[s.jsx("span",{className:"w-1 h-4 bg-gradient-to-b from-purple-500 to-pink-500 rounded-full"}),l("ai.traitIndex")]}),Object.keys(k).map(function(e){var t,n;return s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex justify-between text-xs text-white/60",children:[s.jsx("span",{children:k[e].low}),s.jsxs("span",{className:"text-white/80",children:[k[e].label,": ",(null===(t=N.traits)||void 0===t?void 0:t[e])||50]}),s.jsx("span",{children:k[e].high})]}),s.jsx("input",{type:"range",min:"0",max:"100",value:(null===(n=N.traits)||void 0===n?void 0:n[e])||50,onChange:function(t){return function(e,t){C({traits:c(c({},N.traits),{},d({},e,t))})}(e,parseInt(t.target.value))},className:"w-full h-2 bg-white/10 rounded-lg appearance-none cursor-pointer accent-purple-500"})]},e)})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("h5",{className:"text-sm font-medium text-white/80 flex items-center gap-2",children:[s.jsx("span",{className:"w-1 h-4 bg-gradient-to-b from-cyan-500 to-blue-500 rounded-full"}),l("ai.dialogPreference")]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-xs text-white/60",children:l("ai.speakingPace")}),s.jsx("div",{className:"flex gap-2",children:[{value:"slow",label:l("ai.paceSlow")},{value:"normal",label:l("ai.paceNormal")},{value:"fast",label:l("ai.paceFast")}].map(function(e){var t;return s.jsx("button",{type:"button",onClick:function(){return L({speakingSpeed:e.value})},className:"flex-1 px-3 py-2 rounded-lg text-sm transition ".concat((null===(t=N.advanced)||void 0===t?void 0:t.speakingSpeed)===e.value?"bg-cyan-500 text-white":"bg-white/10 text-white/70 hover:bg-white/20"),children:e.label},e.value)})})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-xs text-white/60",children:l("ai.emojiUsage")}),s.jsx("div",{className:"flex gap-2",children:[{value:"none",label:l("ai.emojiNone")},{value:"Â∞ëÈáè",label:l("ai.emojiRare")},{value:"normal",label:l("ai.emojiNormal")},{value:"frequent",label:l("ai.emojiFrequent")}].map(function(e){var t;return s.jsx("button",{type:"button",onClick:function(){return L({emojiUsage:e.value})},className:"flex-1 px-3 py-2 rounded-lg text-sm transition ".concat((null===(t=N.advanced)||void 0===t?void 0:t.emojiUsage)===e.value?"bg-cyan-500 text-white":"bg-white/10 text-white/70 hover:bg-white/20"),children:e.label},e.value)})})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-xs text-white/60",children:l("ai.responseLength")}),s.jsx("div",{className:"flex gap-2",children:[{value:"short",label:l("ai.lengthShort")},{value:"medium",label:l("ai.lengthMedium")},{value:"long",label:l("ai.lengthLong")}].map(function(e){var t;return s.jsx("button",{type:"button",onClick:function(){return L({responseLength:e.value})},className:"flex-1 px-3 py-2 rounded-lg text-sm transition ".concat((null===(t=N.advanced)||void 0===t?void 0:t.responseLength)===e.value?"bg-cyan-500 text-white":"bg-white/10 text-white/70 hover:bg-white/20"),children:e.label},e.value)})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-xs text-white/60",children:l("ai.catchphrase")}),s.jsx("input",{type:"text",value:(null===(t=N.advanced)||void 0===t?void 0:t.catchphrase)||"",onChange:function(e){return L({catchphrase:e.target.value})},placeholder:l("ai.catchphrasePlaceholder"),maxLength:30,className:"w-full px-4 py-2 bg-white/10 rounded-xl text-white placeholder-white/30 outline-none text-sm"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("h5",{className:"text-sm font-medium text-white/80 flex items-center gap-2",children:[s.jsx("span",{className:"w-1 h-4 bg-gradient-to-b from-amber-500 to-orange-500 rounded-full"}),l("ai.moodTendency")]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("label",{className:"text-xs text-white/60",children:l("ai.baseMood")}),s.jsx("div",{className:"grid grid-cols-4 gap-2",children:[{value:"positive",label:l("ai.moodPositive"),color:"bg-green-500"},{value:"neutral",label:l("ai.moodNeutral"),color:"bg-gray-500"},{value:"negative",label:l("ai.moodNegative"),color:"bg-blue-500"},{value:"mixed",label:l("ai.moodMixed"),color:"bg-purple-500"}].map(function(e){var t;return s.jsx("button",{type:"button",onClick:function(){return P({baseMode:e.value})},className:"px-2 py-2 rounded-lg text-xs transition ".concat((null===(t=N.mood)||void 0===t?void 0:t.baseMode)===e.value?"".concat(e.color," text-white"):"bg-white/10 text-white/70 hover:bg-white/20"),children:e.label},e.value)})})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-xs text-white/60",children:l("ai.moodTraits")}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("span",{className:"text-[10px] text-green-400",children:l("ai.moodPositiveLabel")}),s.jsx("div",{className:"flex flex-wrap gap-1.5",children:l("ai.moodPositiveTraits").split(",").map(function(e){var t;return s.jsx("button",{type:"button",onClick:function(){return S(e)},className:"px-2 py-1 rounded text-xs transition ".concat(null!==(t=N.mood)&&void 0!==t&&null!==(t=t.traits)&&void 0!==t&&t.includes(e)?"bg-green-500 text-white":"bg-white/10 text-white/60 hover:bg-white/20"),children:e},e)})})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("span",{className:"text-[10px] text-blue-400",children:l("ai.moodNegativeLabel")}),s.jsx("div",{className:"flex flex-wrap gap-1.5",children:l("ai.moodNegativeTraits").split(",").map(function(e){var t;return s.jsx("button",{type:"button",onClick:function(){return S(e)},className:"px-2 py-1 rounded text-xs transition ".concat(null!==(t=N.mood)&&void 0!==t&&null!==(t=t.traits)&&void 0!==t&&t.includes(e)?"bg-blue-500 text-white":"bg-white/10 text-white/60 hover:bg-white/20"),children:e},e)})})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("span",{className:"text-[10px] text-purple-400",children:l("ai.moodSpecialLabel")}),s.jsx("div",{className:"flex flex-wrap gap-1.5",children:l("ai.moodSpecialTraits").split(",").map(function(e){var t;return s.jsx("button",{type:"button",onClick:function(){return S(e)},className:"px-2 py-1 rounded text-xs transition ".concat(null!==(t=N.mood)&&void 0!==t&&null!==(t=t.traits)&&void 0!==t&&t.includes(e)?"bg-purple-500 text-white":"bg-white/10 text-white/60 hover:bg-white/20"),children:e},e)})})]})]}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex justify-between text-xs text-white/60",children:[s.jsx("span",{children:l("ai.moodIntensityLow")}),s.jsx("span",{className:"text-white/80",children:l("ai.moodIntensity").replace("{n}",String((null===(n=N.mood)||void 0===n?void 0:n.intensity)||50))}),s.jsx("span",{children:l("ai.moodIntensityHigh")})]}),s.jsx("input",{type:"range",min:"0",max:"100",value:(null===(i=N.mood)||void 0===i?void 0:i.intensity)||50,onChange:function(e){return P({intensity:parseInt(e.target.value)})},className:"w-full h-2 bg-white/10 rounded-lg appearance-none cursor-pointer accent-amber-500"}),s.jsx("p",{className:"text-[10px] text-white/40",children:l("ai.moodIntensityHint")})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-xs text-white/60",children:l("ai.customPrompt")}),s.jsx("textarea",{value:N.customPrompt||"",onChange:function(e){return C({customPrompt:e.target.value})},placeholder:l("ai.customPromptPlaceholder"),rows:3,className:"w-full px-4 py-3 bg-white/10 rounded-xl text-white placeholder-white/30 outline-none resize-none text-sm"}),s.jsx("p",{className:"text-xs text-white/40",children:l("ai.customPromptHint")})]})]})]})]})}function L(e){var t=e.profileId,n=u(x.useState([]),2),r=n[0],o=n[1],l=u(x.useState([]),2),d=l[0],h=l[1],v=u(x.useState(!0),2),g=v[0],w=v[1],j=u(x.useState(!1),2),y=j[0],k=j[1],N=u(x.useState(null),2),C=N[0],L=N[1],P=u(x.useState(!1),2),S=P[0],M=P[1],E=u(x.useState(""),2),O=E[0],W=E[1],z=m().t,B=u(x.useState(""),2),D=B[0],I=B[1],R=u(x.useState(""),2),T=R[0],H=R[1],U=u(x.useState(null),2),A=U[0],F=U[1],q=u(x.useState(""),2),K=q[0],V=q[1],G=u(x.useState("shop"),2),_=G[0],J=G[1],Y=u(x.useState(""),2),Q=Y[0],X=Y[1],$=u(x.useState(""),2),Z=$[0],ee=$[1],te=u(x.useState(!0),2),ne=te[0],ie=te[1],re=u(x.useState(""),2),se=re[0],ae=re[1],oe=u(x.useState(""),2),le=oe[0],ce=oe[1],de=u(x.useState(!1),2),ue=de[0],he=de[1],xe=x.useRef(null),me=x.useRef(null);x.useEffect(function(){fe(),pe()},[t]),x.useEffect(function(){var e=function(e){me.current&&!me.current.contains(e.target)&&he(!1)};return document.addEventListener("mousedown",e),function(){return document.removeEventListener("mousedown",e)}},[]);var fe=function(){var e=a(i().m(function e(){var n;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,f.get("/kigurumis?profileId=".concat(t));case 1:n=e.v,o(n.data.kigurumis||[]),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.p=3,w(!1),e.f(3);case 4:return e.a(2)}},e,null,[[0,2,3,4]])}));return function(){return e.apply(this,arguments)}}(),pe=function(){var e=a(i().m(function e(){var t;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,f.get("/shops?limit=200");case 1:t=e.v,h(t.data.shops||[]),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(){return e.apply(this,arguments)}}(),be=function(){I(""),H(""),F(null),K&&!K.startsWith("http")&&URL.revokeObjectURL(K),V(""),J("shop"),X(""),ee(""),ie(!0),ae(""),ce(""),he(!1),L(null),W("")},ve=function(){var e=a(i().m(function e(t){var n,r;return i().w(function(e){for(;;)switch(e.n){case 0:if(r=null===(n=t.target.files)||void 0===n?void 0:n[0]){e.n=1;break}return e.a(2);case 1:if(r.type.startsWith("image/")){e.n=2;break}return W(z("kigurumi.selectImage")),e.a(2);case 2:if(!(r.size>10485760)){e.n=3;break}return W(z("kigurumi.imageTooLarge")),e.a(2);case 3:F(r),K&&!K.startsWith("http")&&URL.revokeObjectURL(K),V(URL.createObjectURL(r)),W("");case 4:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),ge=function(){var e=a(i().m(function e(){var t,n,r,s,a,o;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:if(D.trim()){e.n=1;break}return W(z("kigurumi.enterName")),e.a(2);case 1:if("shop"!==_||Q){e.n=2;break}return W(z("kigurumi.selectShop")),e.a(2);case 2:if(M(!0),W(""),e.p=3,t=T,!A){e.n=5;break}return(n=new FormData).append("file",A),e.n=4,f.post("/oss/upload/user",n,{headers:{"Content-Type":"multipart/form-data"}});case 4:r=e.v,t=r.data.url;case 5:if(s={name:D,image:t||"",makerType:_,shopId:"shop"===_?Q:null,customMaker:"shop"!==_?Z:null,isPublic:ne,description:se},!C){e.n=7;break}return e.n=6,f.put("/kigurumis/".concat(C),s);case 6:e.n=8;break;case 7:return e.n=8,f.post("/kigurumis",s);case 8:return e.n=9,fe();case 9:k(!1),be(),e.n=11;break;case 10:e.p=10,o=e.v,W((null===(a=o.response)||void 0===a||null===(a=a.data)||void 0===a?void 0:a.error)||o.message||z("kigurumi.saveFailed"));case 11:return e.p=11,M(!1),e.f(11);case 12:return e.a(2)}},e,null,[[3,10,11,12]])}));return function(){return e.apply(this,arguments)}}(),we=function(){var e=a(i().m(function e(t){return i().w(function(e){for(;;)switch(e.p=e.n){case 0:if(confirm(z("kigurumi.deleteConfirm"))){e.n=1;break}return e.a(2);case 1:return e.p=1,e.n=2,f.delete("/kigurumis/".concat(t));case 2:o(function(e){return e.filter(function(e){return e.id!==t})}),e.n=4;break;case 3:e.p=3,e.v;case 4:return e.a(2)}},e,null,[[1,3]])}));return function(t){return e.apply(this,arguments)}}(),je=function(){var e=a(i().m(function e(t){return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,e.n=1,f.put("/kigurumis/".concat(t.id),{isPublic:!t.isPublic});case 1:o(function(e){return e.map(function(e){return e.id===t.id?c(c({},e),{},{isPublic:!e.isPublic}):e})}),e.n=3;break;case 2:e.p=2,e.v;case 3:return e.a(2)}},e,null,[[0,2]])}));return function(t){return e.apply(this,arguments)}}(),ye=d.filter(function(e){return e.name.toLowerCase().includes(le.toLowerCase())||e.nameEn&&e.nameEn.toLowerCase().includes(le.toLowerCase())}),ke=d.find(function(e){return e.id===Q}),Ne=function(e){return"shop"===e.makerType&&e.shop?e.shop.name:"handmade"===e.makerType?z("kigurumi.handmade"):e.customMaker||z("kigurumi.other")};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-white font-medium",children:z("kigurumi.myKigurumi")}),s.jsx("p",{className:"text-sm text-white/40",children:z("kigurumi.manageDesc")})]}),s.jsx("button",{onClick:function(){be(),k(!0)},className:"px-4 py-2 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl text-sm font-medium hover:opacity-90 transition",children:z("kigurumi.addKigurumi")})]}),g?s.jsx("div",{className:"space-y-3",children:[1,2,3].map(function(e){return s.jsx("div",{className:"h-20 bg-white/5 rounded-xl animate-pulse"},e)})}):0===r.length?s.jsxs("div",{className:"p-8 border-2 border-dashed border-white/10 rounded-xl text-center",children:[s.jsx("div",{className:"text-4xl mb-3",children:"üé≠"}),s.jsx("p",{className:"text-white/50 mb-2",children:z("kigurumi.empty")}),s.jsx("p",{className:"text-white/30 text-sm",children:z("kigurumi.emptyHint")})]}):s.jsx("div",{className:"space-y-3",children:r.map(function(e){return s.jsxs("div",{className:"group relative bg-gradient-to-br from-white/[0.08] to-white/[0.02] border border-white/10 rounded-xl overflow-hidden flex items-center gap-3 p-3",children:[e.image?s.jsx("div",{className:"w-16 h-16 rounded-lg overflow-hidden flex-shrink-0 bg-white/5",children:s.jsx("img",{src:p(e.image)||b(e.image)||e.image,alt:e.name,className:"w-full h-full object-cover"})}):s.jsx("div",{className:"w-16 h-16 rounded-lg flex-shrink-0 bg-gradient-to-br from-purple-500/20 to-pink-500/20 border border-white/10 flex items-center justify-center",children:s.jsx("span",{className:"text-2xl",children:"üé≠"})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("h4",{className:"font-medium text-white truncate",children:e.name}),s.jsx("span",{className:"px-1.5 py-0.5 rounded text-[10px] font-medium flex-shrink-0 ".concat(e.isPublic?"bg-green-500/20 text-green-400":"bg-gray-500/20 text-gray-400"),children:e.isPublic?z("kigurumi.public"):z("kigurumi.private")})]}),s.jsx("p",{className:"text-xs text-white/50 truncate mt-0.5",children:"shop"===e.makerType&&e.shop?"üè™ ".concat(e.shop.name):Ne(e)}),e.likeCount>0&&s.jsxs("div",{className:"flex items-center gap-1 mt-1 text-xs text-pink-400",children:[s.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{d:"M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"})}),s.jsx("span",{children:e.likeCount})]})]}),s.jsxs("div",{className:"flex items-center gap-1.5 flex-shrink-0 opacity-0 group-hover:opacity-100 transition",children:[s.jsx("button",{onClick:function(){return function(e){L(e.id),I(e.name),H(e.image),V(e.image),J(e.makerType),X(e.shopId||""),ee(e.customMaker||""),ie(e.isPublic),ae(e.description||""),k(!0)}(e)},className:"w-8 h-8 bg-white/10 hover:bg-white/20 rounded-lg flex items-center justify-center transition",title:z("kigurumi.edit"),children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),s.jsx("button",{onClick:function(){return je(e)},className:"w-8 h-8 rounded-lg flex items-center justify-center transition ".concat(e.isPublic?"bg-green-500/20 hover:bg-green-500/30 text-green-400":"bg-white/10 hover:bg-white/20"),title:e.isPublic?z("kigurumi.setPrivate"):z("kigurumi.setPublic"),children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.isPublic?s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"}):s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})})}),s.jsx("button",{onClick:function(){return we(e.id)},className:"w-8 h-8 bg-red-500/20 hover:bg-red-500/30 rounded-lg flex items-center justify-center transition text-red-400",title:z("kigurumi.deleteBtn"),children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},e.id)})}),y&&s.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-end sm:items-center justify-center sm:p-4",children:s.jsxs("div",{className:"bg-[#1a1a24] rounded-t-2xl sm:rounded-2xl w-full sm:max-w-lg max-h-[85vh] sm:max-h-[90vh] flex flex-col",children:[s.jsxs("div",{className:"p-3 sm:p-4 border-b border-white/10 flex items-center justify-between flex-shrink-0",children:[s.jsx("h3",{className:"font-bold text-base sm:text-lg",children:z(C?"kigurumi.editTitle":"kigurumi.addTitle")}),s.jsx("button",{onClick:function(){k(!1),be()},className:"w-8 h-8 rounded-full bg-white/5 hover:bg-white/10 flex items-center justify-center",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto overscroll-contain p-3 sm:p-4 space-y-3 sm:space-y-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-white/60 mb-2",children:z("kigurumi.nameLabel")}),s.jsx("input",{type:"text",value:D,onChange:function(e){return I(e.target.value)},placeholder:z("kigurumi.namePlaceholder"),className:"w-full px-4 py-2.5 bg-white/5 border border-white/10 rounded-xl text-white placeholder-white/30 outline-none focus:border-purple-500/50"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-white/60 mb-2",children:z("kigurumi.sourceLabel")}),s.jsxs("div",{className:"flex gap-2 mb-3",children:[s.jsx("button",{type:"button",onClick:function(){return J("shop")},className:"flex-1 py-2 rounded-lg text-sm transition ".concat("shop"===_?"bg-purple-500 text-white":"bg-white/5 text-white/70"),children:z("kigurumi.sourceShop")}),s.jsx("button",{type:"button",onClick:function(){return J("handmade")},className:"flex-1 py-2 rounded-lg text-sm transition ".concat("handmade"===_?"bg-purple-500 text-white":"bg-white/5 text-white/70"),children:z("kigurumi.sourceHandmade")}),s.jsx("button",{type:"button",onClick:function(){return J("other")},className:"flex-1 py-2 rounded-lg text-sm transition ".concat("other"===_?"bg-purple-500 text-white":"bg-white/5 text-white/70"),children:z("kigurumi.sourceOther")})]}),"shop"===_&&s.jsxs("div",{ref:me,className:"relative",children:[s.jsx("div",{className:"w-full px-3 py-2.5 bg-white/5 border rounded-xl text-sm cursor-pointer transition flex items-center gap-2 ".concat(ue?"border-purple-500/50":"border-white/10"),onClick:function(){return he(!ue)},children:ke?s.jsxs(s.Fragment,{children:[ke.logo&&s.jsx("img",{src:b(ke.logo),alt:"",className:"w-5 h-5 rounded object-cover flex-shrink-0"}),s.jsx("span",{className:"flex-1 text-white truncate",children:ke.name}),s.jsx("button",{onClick:function(e){e.stopPropagation(),X(""),ce("")},className:"w-5 h-5 rounded-full bg-white/10 hover:bg-white/20 flex items-center justify-center flex-shrink-0",children:s.jsx("svg",{className:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-4 h-4 text-white/30 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),s.jsx("span",{className:"text-white/30 flex-1",children:z("kigurumi.searchShop")}),s.jsx("svg",{className:"w-4 h-4 text-white/30 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]})}),ue&&s.jsxs("div",{className:"absolute top-full left-0 right-0 mt-1 bg-[#1e1e2e] border border-white/10 rounded-xl shadow-2xl z-10 overflow-hidden",children:[s.jsx("div",{className:"p-2",children:s.jsx("input",{type:"text",value:le,onChange:function(e){return ce(e.target.value)},placeholder:z("kigurumi.searchShop"),className:"w-full px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-white placeholder-white/30 outline-none text-sm",autoFocus:!0,onClick:function(e){return e.stopPropagation()}})}),s.jsx("div",{className:"max-h-48 overflow-y-auto",children:0===ye.length?s.jsx("div",{className:"px-3 py-4 text-center text-white/30 text-sm",children:z("kigurumi.noShopFound")}):ye.map(function(e){return s.jsxs("button",{type:"button",onClick:function(){X(e.id),he(!1),ce("")},className:"w-full flex items-center gap-2.5 px-3 py-2 text-left text-sm transition ".concat(Q===e.id?"bg-purple-500/20 text-purple-300":"hover:bg-white/5 text-white/80"),children:[e.logo?s.jsx("img",{src:b(e.logo),alt:"",className:"w-6 h-6 rounded object-cover flex-shrink-0"}):s.jsx("div",{className:"w-6 h-6 rounded bg-white/10 flex items-center justify-center flex-shrink-0 text-xs",children:"üè™"}),s.jsx("span",{className:"flex-1 truncate",children:e.name}),Q===e.id&&s.jsx("svg",{className:"w-4 h-4 text-purple-400 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:s.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]},e.id)})})]})]}),"other"===_&&s.jsx("input",{type:"text",value:Z,onChange:function(e){return ee(e.target.value)},placeholder:z("kigurumi.sourcePlaceholder"),className:"w-full px-4 py-2.5 bg-white/5 border border-white/10 rounded-xl text-white placeholder-white/30 outline-none"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-white/60 mb-2",children:z("kigurumi.imageLabel")}),K?s.jsxs("div",{className:"relative inline-block",children:[s.jsx("img",{src:K.startsWith("blob:")?K:p(K)||b(K)||K,alt:"",className:"w-32 h-32 object-cover rounded-xl"}),s.jsx("button",{onClick:function(){F(null),K&&!K.startsWith("http")&&URL.revokeObjectURL(K),V(""),H("")},className:"absolute -top-2 -right-2 w-6 h-6 bg-red-500 hover:bg-red-600 rounded-full flex items-center justify-center transition shadow-lg",children:s.jsx("svg",{className:"w-3 h-3 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}):s.jsxs("button",{onClick:function(){var e;return null===(e=xe.current)||void 0===e?void 0:e.click()},className:"flex items-center gap-2 px-4 py-2.5 bg-white/5 border border-dashed border-white/20 hover:border-purple-500/50 rounded-xl text-sm text-white/40 hover:text-white/60 transition",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),z("kigurumi.clickUpload")]}),s.jsx("input",{ref:xe,type:"file",accept:"image/*",onChange:ve,className:"hidden"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"block text-sm text-white/60 mb-2",children:z("kigurumi.descLabel")}),s.jsx("textarea",{value:se,onChange:function(e){return ae(e.target.value)},placeholder:z("kigurumi.descPlaceholder"),rows:2,className:"w-full px-4 py-2.5 bg-white/5 border border-white/10 rounded-xl text-white placeholder-white/30 outline-none resize-none"})]}),s.jsxs("div",{className:"flex items-center justify-between p-3 bg-white/5 rounded-xl",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-sm font-medium",children:z("kigurumi.publicDisplay")}),s.jsx("div",{className:"text-xs text-white/50",children:z("kigurumi.publicDisplayDesc")})]}),s.jsx("button",{type:"button",onClick:function(){return ie(!ne)},className:"w-12 h-6 rounded-full transition-colors ".concat(ne?"bg-green-500":"bg-white/20"),children:s.jsx("div",{className:"w-5 h-5 bg-white rounded-full shadow transition-transform ".concat(ne?"translate-x-6":"translate-x-0.5")})})]}),O&&s.jsx("div",{className:"p-3 bg-red-500/20 border border-red-500/30 rounded-xl text-sm text-red-300",children:O})]}),s.jsx("div",{className:"p-3 sm:p-4 border-t border-white/10 flex-shrink-0 bg-[#1a1a24]",children:s.jsx("button",{onClick:ge,disabled:S,className:"w-full py-2.5 sm:py-3 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-400 hover:to-pink-400 disabled:opacity-50 rounded-xl font-medium transition text-sm sm:text-base",children:z(S?"kigurumi.saving":"kigurumi.save")})})]})})]})}function P(e){var t=e.imageUrl,n=e.initialPosition,i=void 0===n?{x:50,y:50}:n,r=e.onSave,a=e.onCancel,o=u(x.useState(i),2),l=o[0],d=o[1],h=u(x.useState(!1),2),m=h[0],f=h[1],p=u(x.useState(0),2),b=p[0],v=p[1],g=u(x.useState(i.y),2),w=g[0],j=g[1],y=x.useRef(null),k=x.useCallback(function(e){f(!0),v(e),j(l.y)},[l.y]),N=x.useCallback(function(e){if(m&&y.current){var t=y.current.clientHeight,n=(e-b)/t*100,i=Math.max(0,Math.min(100,w-n));d(function(e){return c(c({},e),{},{y:i})})}},[m,b,w]),C=x.useCallback(function(){f(!1)},[]);x.useEffect(function(){var e=function(e){return N(e.clientY)},t=function(e){e.touches.length>0&&N(e.touches[0].clientY)},n=function(){return C()};return m&&(window.addEventListener("mousemove",e),window.addEventListener("mouseup",n),window.addEventListener("touchmove",t,{passive:!0}),window.addEventListener("touchend",n)),function(){window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",n),window.removeEventListener("touchmove",t),window.removeEventListener("touchend",n)}},[m,N,C]);return s.jsxs("div",{className:"fixed inset-0 z-[100] bg-black/95 flex flex-col",children:[s.jsxs("div",{className:"flex items-center justify-between px-4 py-3 bg-black/50 backdrop-blur-sm border-b border-white/10",children:[s.jsx("button",{onClick:a,className:"px-4 py-2 text-white/70 hover:text-white transition-colors",children:"ÂèñÊ∂à"}),s.jsxs("div",{className:"text-center",children:[s.jsx("h3",{className:"text-white font-medium",children:"Ë∞ÉÊï¥Â∞ÅÈù¢‰ΩçÁΩÆ"}),s.jsx("p",{className:"text-white/50 text-xs mt-0.5",children:"‰∏ä‰∏ãÊãñÂä®ÂõæÁâáË∞ÉÊï¥ÊòæÁ§∫Âå∫Âüü"})]}),s.jsx("button",{onClick:function(){return r(l)},className:"px-4 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-lg font-medium hover:opacity-90 transition-opacity",children:"‰øùÂ≠ò"})]}),s.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-4 overflow-hidden",children:[s.jsxs("div",{className:"w-full max-w-2xl",children:[s.jsx("p",{className:"text-white/40 text-xs text-center mb-2",children:"È¢ÑËßàÊïàÊûú"}),s.jsxs("div",{ref:y,className:"relative w-full aspect-[16/9] md:aspect-[21/9] rounded-xl overflow-hidden cursor-grab active:cursor-grabbing select-none",onMouseDown:function(e){e.preventDefault(),k(e.clientY)},onTouchStart:function(e){k(e.touches[0].clientY)},children:[s.jsx("img",{src:t,alt:"Â∞ÅÈù¢È¢ÑËßà",className:"w-full h-full object-cover pointer-events-none",style:{objectPosition:"".concat(l.x,"% ").concat(l.y,"%")},draggable:!1}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center transition-opacity ".concat(m?"opacity-0":"opacity-100"),children:s.jsxs("div",{className:"bg-black/60 backdrop-blur-sm px-4 py-2 rounded-full flex items-center gap-2",children:[s.jsx("svg",{className:"w-5 h-5 text-white/70 animate-bounce",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})}),s.jsx("span",{className:"text-white/70 text-sm",children:"ÊãñÂä®Ë∞ÉÊï¥"})]})}),s.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[s.jsx("div",{className:"absolute top-1/3 left-0 right-0 border-t border-white/20 border-dashed"}),s.jsx("div",{className:"absolute top-2/3 left-0 right-0 border-t border-white/20 border-dashed"})]})]})]}),s.jsx("div",{className:"flex items-center gap-3 mt-6",children:[{label:"È°∂ÈÉ®",y:0},{label:"‰∏≠Èó¥",y:50},{label:"Â∫ïÈÉ®",y:100}].map(function(e){return s.jsx("button",{onClick:function(){return d(function(t){return c(c({},t),{},{y:e.y})})},className:"px-4 py-2 rounded-lg text-sm font-medium transition-all ".concat(Math.abs(l.y-e.y)<5?"bg-purple-500 text-white":"bg-white/10 text-white/70 hover:bg-white/20 hover:text-white"),children:e.label},e.label)})}),s.jsxs("div",{className:"w-full max-w-md mt-6 px-4",children:[s.jsxs("div",{className:"flex items-center justify-between text-xs text-white/50 mb-2",children:[s.jsx("span",{children:"È°∂ÈÉ®"}),s.jsxs("span",{children:["ÂûÇÁõ¥‰ΩçÁΩÆ: ",Math.round(l.y),"%"]}),s.jsx("span",{children:"Â∫ïÈÉ®"})]}),s.jsx("input",{type:"range",min:"0",max:"100",value:l.y,onChange:function(e){return d(function(t){return c(c({},t),{},{y:Number(e.target.value)})})},className:"w-full h-2 bg-white/10 rounded-full appearance-none cursor-pointer\n              [&::-webkit-slider-thumb]:appearance-none\n              [&::-webkit-slider-thumb]:w-5\n              [&::-webkit-slider-thumb]:h-5\n              [&::-webkit-slider-thumb]:rounded-full\n              [&::-webkit-slider-thumb]:bg-gradient-to-r\n              [&::-webkit-slider-thumb]:from-purple-500\n              [&::-webkit-slider-thumb]:to-pink-500\n              [&::-webkit-slider-thumb]:cursor-pointer\n              [&::-webkit-slider-thumb]:shadow-lg\n              [&::-webkit-slider-thumb]:shadow-purple-500/30\n              [&::-moz-range-thumb]:w-5\n              [&::-moz-range-thumb]:h-5\n              [&::-moz-range-thumb]:rounded-full\n              [&::-moz-range-thumb]:bg-gradient-to-r\n              [&::-moz-range-thumb]:from-purple-500\n              [&::-moz-range-thumb]:to-pink-500\n              [&::-moz-range-thumb]:cursor-pointer\n              [&::-moz-range-thumb]:border-0"})]})]}),s.jsx("div",{className:"px-4 py-3 bg-black/50 backdrop-blur-sm border-t border-white/10",children:s.jsx("p",{className:"text-white/40 text-xs text-center",children:"üí° ÊèêÁ§∫ÔºöË∞ÉÊï¥ÂêéÁöÑ‰ΩçÁΩÆÂ∞ÜÂ∫îÁî®Âà∞‰Ω†ÁöÑ‰∏™‰∫∫‰∏ªÈ°µÂ∞ÅÈù¢"})})]})}function S(e){var t=e.imageFile,n=e.onCrop,i=e.onCancel,r=x.useRef(null),a=x.useRef(null),o=u(x.useState(null),2),l=o[0],c=o[1],d=u(x.useState(1),2),h=d[0],m=d[1],f=u(x.useState(0),2),p=f[0],b=f[1],v=u(x.useState(0),2),g=v[0],w=v[1],j=u(x.useState(200),2),y=j[0],k=j[1],N=u(x.useState(!1),2),C=N[0],L=N[1],P=u(x.useState(!1),2),S=P[0],M=P[1],E=u(x.useState(0),2),O=E[0],W=E[1],z=u(x.useState(0),2),B=z[0],D=z[1],I=u(x.useState(0),2),R=I[0],T=I[1],H=u(x.useState(0),2),U=H[0],A=H[1],F=u(x.useState(0),2),q=F[0],K=F[1];x.useEffect(function(){var e=new Image,n=URL.createObjectURL(t);return e.onload=function(){c(e);var t=.9*Math.min(e.width,e.height);b((e.width-t)/2),w((e.height-t)/2),k(t)},e.src=n,function(){return URL.revokeObjectURL(n)}},[t]),x.useEffect(function(){if(l&&r.current&&a.current){var e=r.current,t=e.getContext("2d");if(t){var n=a.current.clientWidth-32,i=Math.min(n/l.width,400/l.height,1);m(i),e.width=l.width*i,e.height=l.height*i,t.drawImage(l,0,0,e.width,e.height),t.fillStyle="rgba(0, 0, 0, 0.6)",t.fillRect(0,0,e.width,e.height);var s=p*i,o=g*i,c=y*i;t.save(),t.beginPath(),t.rect(s,o,c,c),t.clip(),t.drawImage(l,0,0,e.width,e.height),t.restore(),t.strokeStyle="#a855f7",t.lineWidth=2,t.strokeRect(s,o,c,c);t.fillStyle="#a855f7",[{x:s+c,y:o+c/2},{x:s+c/2,y:o+c},{x:s,y:o+c/2},{x:s+c/2,y:o}].forEach(function(e){t.beginPath(),t.arc(e.x,e.y,8,0,2*Math.PI),t.fill()})}}},[l,p,g,y]);var V=x.useCallback(function(e){if(!r.current)return{x:0,y:0};var t=r.current.getBoundingClientRect();return{x:(e.clientX-t.left)/h,y:(e.clientY-t.top)/h}},[h]),G=x.useCallback(function(e,t){var n=20/h,i=p+y/2,r=g+y/2;return[{x:p+y,y:r},{x:i,y:g+y},{x:p,y:r},{x:i,y:g}].some(function(i){return Math.sqrt(Math.pow(e-i.x,2)+Math.pow(t-i.y,2))<n})},[p,g,y,h]),_=x.useCallback(function(e,t){return e>=p&&e<=p+y&&t>=g&&t<=g+y},[p,g,y]),J=x.useCallback(function(e){e.preventDefault();var t=V(e),n=t.x,i=t.y;G(n,i)?(M(!0),W(n),D(i),K(y),T(p),A(g)):_(n,i)&&(L(!0),W(n),D(i),T(p),A(g))},[V,G,_,p,g,y]),Y=x.useCallback(function(e){if(l){var t=V(e),n=t.x,i=t.y;if(C){var r=n-O,s=i-B,a=Math.max(0,Math.min(l.width-y,R+r)),o=Math.max(0,Math.min(l.height-y,U+s));b(a),w(o)}else if(S){var c=R+q/2,d=U+q/2,u=Math.max(Math.abs(n-c),Math.abs(i-d)),h=Math.max(50,Math.min(2*u,Math.min(l.width,l.height))),x=Math.max(0,Math.min(l.width-h,c-h/2)),m=Math.max(0,Math.min(l.height-h,d-h/2));k(h),b(x),w(m)}}},[l,C,S,O,B,R,U,q,y]),Q=x.useCallback(function(){L(!1),M(!1)},[]),X=x.useCallback(function(){if(l){var e=400,t=document.createElement("canvas");t.width=e,t.height=e;var i=t.getContext("2d");i&&(i.drawImage(l,p,g,y,y,0,0,e,e),t.toBlob(function(e){e&&n(e)},"image/jpeg",.9))}},[l,p,g,y,n]);return l?s.jsx("div",{className:"fixed inset-0 z-[100] bg-black/90 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-[#1a1a24] rounded-2xl max-w-lg w-full overflow-hidden",children:[s.jsxs("div",{className:"px-6 py-4 border-b border-white/10",children:[s.jsx("h3",{className:"text-lg font-semibold text-white",children:"Ë£ÅÂâ™Â§¥ÂÉè"}),s.jsx("p",{className:"text-sm text-white/50 mt-1",children:"ÊãñÂä®Ë∞ÉÊï¥‰ΩçÁΩÆÔºåÊãñÂä®ËæπÁºòÂúÜÁÇπË∞ÉÊï¥Â§ßÂ∞è"})]}),s.jsx("div",{ref:a,className:"relative bg-black flex items-center justify-center p-4",children:s.jsx("canvas",{ref:r,className:"max-w-full cursor-move touch-none select-none",style:{maxHeight:400},onPointerDown:J,onPointerMove:Y,onPointerUp:Q,onPointerLeave:Q})}),s.jsxs("div",{className:"px-6 py-4 border-t border-white/10 flex justify-end gap-3",children:[s.jsx("button",{onClick:i,className:"px-5 py-2.5 text-sm font-medium text-white/70 hover:text-white bg-white/5 hover:bg-white/10 rounded-xl transition",children:"ÂèñÊ∂à"}),s.jsx("button",{onClick:X,className:"px-5 py-2.5 text-sm font-medium text-white bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-400 hover:to-pink-400 rounded-xl transition",children:"Á°ÆËÆ§Ë£ÅÂâ™"})]})]})}):s.jsx("div",{className:"fixed inset-0 z-[100] bg-black/90 flex items-center justify-center",children:s.jsx("div",{className:"w-10 h-10 border-2 border-purple-500 border-t-transparent rounded-full animate-spin"})})}function M(e){var t=e.src,n=e.isCover,i=e.isNew,r=e.onSetCover,a=e.onDelete,o=e.onMoveUp,l=e.onMoveDown,c=u(x.useState(!1),2),d=c[0],h=c[1];return s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"relative aspect-square group rounded-xl overflow-hidden bg-white/5",children:[s.jsx("img",{src:t,className:"w-full h-full object-cover",alt:""}),n&&s.jsx("div",{className:"absolute top-2 left-2 px-2 py-0.5 bg-gradient-to-r from-purple-500 to-pink-500 rounded text-[10px] font-medium",children:"Â∞ÅÈù¢"}),i&&s.jsx("div",{className:"absolute top-2 left-2 px-2 py-0.5 bg-green-500/80 rounded text-[10px] font-medium",children:"Êñ∞"}),s.jsx("button",{onClick:function(){return h(!0)},className:"absolute top-2 right-2 w-7 h-7 bg-black/60 backdrop-blur-sm text-white rounded-full flex items-center justify-center md:hidden","aria-label":"ÁºñËæë",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z"})})}),s.jsxs("div",{className:"absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition hidden md:flex items-center justify-center gap-2",children:[r&&s.jsx("button",{onClick:r,className:"w-8 h-8 rounded-full flex items-center justify-center transition ".concat(n?"bg-purple-500 text-white":"bg-white/20 hover:bg-purple-500 text-white"),title:"ËÆæ‰∏∫Â∞ÅÈù¢",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),o&&s.jsx("button",{onClick:o,className:"w-8 h-8 bg-white/20 hover:bg-white/40 text-white rounded-full flex items-center justify-center transition",title:"ÂâçÁßª",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),l&&s.jsx("button",{onClick:l,className:"w-8 h-8 bg-white/20 hover:bg-white/40 text-white rounded-full flex items-center justify-center transition",title:"ÂêéÁßª",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),s.jsx("button",{onClick:a,className:"w-8 h-8 bg-white/20 hover:bg-red-500 text-white rounded-full flex items-center justify-center transition",title:"Âà†Èô§",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),d&&s.jsxs("div",{className:"fixed inset-0 z-[100] md:hidden",onClick:function(){return h(!1)},children:[s.jsx("div",{className:"absolute inset-0 bg-black/60"}),s.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-[#1a1a24] rounded-t-2xl p-4 pb-8 animate-in slide-in-from-bottom duration-200",onClick:function(e){return e.stopPropagation()},children:[s.jsxs("div",{className:"flex items-center gap-3 mb-4 pb-4 border-b border-white/10",children:[s.jsx("img",{src:t,className:"w-14 h-14 rounded-lg object-cover",alt:""}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm text-white/80",children:"ÁÖßÁâáÊìç‰Ωú"}),n&&s.jsx("span",{className:"text-xs text-purple-400",children:"ÂΩìÂâçÂ∞ÅÈù¢"})]})]}),s.jsxs("div",{className:"space-y-2",children:[r&&!n&&s.jsxs("button",{onClick:function(){r(),h(!1)},className:"w-full py-3 bg-white/5 hover:bg-white/10 text-white rounded-xl text-sm font-medium flex items-center justify-center gap-2 transition",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"ËÆæ‰∏∫Â∞ÅÈù¢"]}),s.jsxs("div",{className:"flex gap-2",children:[o&&s.jsxs("button",{onClick:function(){o(),h(!1)},className:"flex-1 py-3 bg-white/5 hover:bg-white/10 text-white rounded-xl text-sm font-medium flex items-center justify-center gap-2 transition",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"ÂâçÁßª"]}),l&&s.jsxs("button",{onClick:function(){l(),h(!1)},className:"flex-1 py-3 bg-white/5 hover:bg-white/10 text-white rounded-xl text-sm font-medium flex items-center justify-center gap-2 transition",children:["ÂêéÁßª",s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),s.jsxs("button",{onClick:function(){a(),h(!1)},className:"w-full py-3 bg-red-500/20 hover:bg-red-500/30 text-red-400 rounded-xl text-sm font-medium flex items-center justify-center gap-2 transition",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Âà†Èô§ÁÖßÁâá"]})]}),s.jsx("button",{onClick:function(){return h(!1)},className:"w-full mt-3 py-3 bg-white/10 text-white/60 rounded-xl text-sm font-medium transition hover:bg-white/15",children:"ÂèñÊ∂à"})]})]})]})}e("default",function(){var e,c,d,f=N(),p=l(),M=v(),E=M.isAuthenticated,O=M.fetchUser,z=M.user,B=m().t,D=u(x.useState("profile"),2),I=D[0],R=D[1],T=u(x.useState(""),2),H=T[0],U=T[1],A=u(x.useState(null),2),F=A[0],q=A[1],K=u(x.useState(null),2),V=K[0],G=K[1],_=u(x.useState(null),2),J=_[0],Y=_[1],Q=u(x.useState(!1),2),X=Q[0],$=Q[1],Z=u(x.useState(null),2),ee=Z[0],te=Z[1],ne=u(x.useState(null),2),ie=ne[0],re=ne[1],se=u(x.useState({x:50,y:50}),2),ae=se[0],oe=se[1],le=u(x.useState(!1),2),ce=le[0],de=le[1],ue=u(x.useState(""),2),he=ue[0],xe=ue[1],me=u(x.useState([]),2),fe=me[0],pe=me[1],be=u(x.useState([]),2),ve=be[0],ge=be[1],we=u(x.useState([]),2),je=we[0],ye=we[1],ke=u(x.useState(void 0),2),Ne=ke[0],Ce=ke[1],Le=u(x.useState(!1),2),Pe=Le[0],Se=Le[1],Me=u(x.useState(!1),2),Ee=Me[0],Oe=Me[1],We=u(x.useState(!1),2),ze=We[0],Be=We[1],De=u(x.useState(""),2),Ie=De[0],Re=De[1],Te=u(x.useState(""),2),He=Te[0],Ue=Te[1],Ae=u(x.useState(!1),2),Fe=Ae[0],qe=Ae[1],Ke=u(x.useState(!1),2),Ve=Ke[0],Ge=Ke[1],_e=u(x.useState({}),2),Je=_e[0],Ye=_e[1],Qe=u(x.useState(null),2),Xe=Qe[0],$e=Qe[1],Ze=u(x.useState(""),2),et=Ze[0],tt=Ze[1],nt=u(x.useState(null),2),it=nt[0],rt=nt[1],st=x.useRef(null),at=x.useRef(null),ot=h({queryKey:["profile"],queryFn:function(){return w.getProfile().then(function(e){return e.data})},enabled:E}),lt=ot.data,ct=ot.isLoading,dt=null==lt?void 0:lt.profile;x.useEffect(function(){dt&&(U(dt.cnName||""),q(dt.avatar||null),re(dt.coverImage||null),oe(dt.coverPosition||{x:50,y:50}),xe(dt.introduction||""),ye(dt.photos||[]),dt.location&&(dt.location.lat||dt.location.lng)&&Ce({lat:dt.location.lat,lng:dt.location.lng,country:dt.location.country||"",province:dt.location.province,city:dt.location.city}),Ye(dt.socialLinks||{}),$e(dt.aiPersonality||null),tt(dt.id||""),Se(dt.hideLocation||!1),Ge(!0),rt({cnName:dt.cnName||"",introduction:dt.introduction||"",avatar:dt.avatar||null,coverImage:dt.coverImage||null,coverPosition:dt.coverPosition||{x:50,y:50},photos:dt.photos||[],location:dt.location&&(dt.location.lat||dt.location.lng)?{lat:dt.location.lat,lng:dt.location.lng,country:dt.location.country||"",province:dt.location.province,city:dt.location.city}:void 0,hideLocation:dt.hideLocation||!1,socialLinks:dt.socialLinks||{},aiPersonality:dt.aiPersonality||null}))},[dt]),x.useEffect(function(){E||f("/login")},[E,f]);var ut=J||F||je[0],ht=je.length+fe.length,xt=x.useCallback(function(){return!!it&&(H!==it.cnName||(he!==it.introduction||(null!==V||(fe.length>0||(je.length!==it.photos.length||(!!je.some(function(e,t){return e!==it.photos[t]})||(ie!==it.coverImage||(ae.x!==it.coverPosition.x||ae.y!==it.coverPosition.y||(JSON.stringify(Ne)!==JSON.stringify(it.location)||(Pe!==it.hideLocation||(JSON.stringify(Je)!==JSON.stringify(it.socialLinks)||JSON.stringify(Xe)!==JSON.stringify(it.aiPersonality))))))))))))},[H,he,V,fe,je,ie,ae,Ne,Pe,Je,Xe,it]),mt=u(x.useState(!1),2),ft=mt[0],pt=mt[1],bt=u(x.useState(null),2),vt=bt[0],gt=bt[1];x.useEffect(function(){var e=function(e){if(xt())return e.preventDefault(),e.returnValue="",""};return window.addEventListener("beforeunload",e),function(){return window.removeEventListener("beforeunload",e)}},[xt]);var wt=x.useCallback(function(e){e.preventDefault(),xt()?(gt("/"),pt(!0)):f("/")},[xt,f]),jt=x.useCallback(function(){pt(!1),vt&&(f(vt),gt(null))},[f,vt]),yt=x.useCallback(a(i().m(function e(){return i().w(function(e){for(;;)switch(e.n){case 0:return pt(!1),gt(null),e.n=1,Pt();case 1:return e.a(2)}},e)})),[]),kt=x.useCallback(function(){pt(!1),gt(null)},[]),Nt=function(){var e=a(i().m(function e(t){var n,r,s;return i().w(function(e){for(;;)switch(e.n){case 0:if(r=null===(n=t.target.files)||void 0===n?void 0:n[0]){e.n=1;break}return e.a(2);case 1:if(!(s=j(r))){e.n=2;break}return Re(s),e.a(2);case 2:te(r),$(!0);case 3:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),Ct=function(){var e=a(i().m(function e(t){var n;return i().w(function(e){for(;;)switch(e.n){case 0:$(!1),te(null),n=new File([t],"avatar.png",{type:"image/png"}),G(n),Y(URL.createObjectURL(t));case 1:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),Lt=function(){var e=a(i().m(function e(t){var r,s,a,l,c;return i().w(function(e){for(;;)switch(e.n){case 0:if(r=Array.from(t.target.files||[]),!(ht+r.length>30)){e.n=1;break}return Re(B("editProfile.errPhotoMax")),e.a(2);case 1:Re(""),s=i().m(function e(){var t,n;return i().w(function(e){for(;;)switch(e.n){case 0:if(t=c[l],!(n=j(t))){e.n=1;break}return Re(n),e.a(2,{v:void 0});case 1:pe(function(e){return[].concat(o(e),[t])}),ge(function(e){return[].concat(o(e),[URL.createObjectURL(t)])});case 2:return e.a(2)}},e)}),l=0,c=r;case 2:if(!(l<c.length)){e.n=5;break}return e.d(n(s()),3);case 3:if(!(a=e.v)){e.n=4;break}return e.a(2,a.v);case 4:l++,e.n=2;break;case 5:return e.a(2)}},e)}));return function(t){return e.apply(this,arguments)}}(),Pt=function(){var e=a(i().m(function e(){var n,r,s,a,l,c,d,u,h,x,m,b,v,j;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:if(Re(""),Ue(""),H.trim()){e.n=1;break}return Re(B("editProfile.errCnName")),R("profile"),e.a(2);case 1:if(he.trim()){e.n=2;break}return Re(B("editProfile.errIntro")),R("profile"),e.a(2);case 2:if(0!==ht){e.n=3;break}return Re(B("editProfile.errPhoto")),R("media"),e.a(2);case 3:if(Ne){e.n=4;break}return Re(B("editProfile.errLocation")),R("profile"),e.a(2);case 4:if(Oe(!0),e.p=5,s=o(je),a=F,!(fe.length>0||V)){e.n=15;break}l=t(fe),e.p=6,l.s();case 7:if((c=l.n()).done){e.n=10;break}return d=c.value,e.n=8,g(d);case 8:u=e.v,s.push(u);case 9:e.n=7;break;case 10:e.n=12;break;case 11:e.p=11,v=e.v,l.e(v);case 12:return e.p=12,l.f(),e.f(12);case 13:if(!V){e.n=15;break}return e.n=14,g(V);case 14:a=e.v;case 15:return h={cnName:H,introduction:he,photos:s,avatar:a,coverImage:ie,coverPosition:ae,location:{lat:Ne.lat,lng:Ne.lng,country:Ne.country,province:Ne.province,city:Ne.city},hideLocation:Pe,socialLinks:Je,aiPersonality:Xe},e.n=16,w.updateProfile(h);case 16:return x=e.v,Ue(B("editProfile.saveSuccess")),e.n=17,O();case 17:return e.n=18,p.invalidateQueries({queryKey:["profile"]});case 18:return e.n=19,p.invalidateQueries({queryKey:["users"]});case 19:return e.n=20,p.invalidateQueries({queryKey:["stats"]});case 20:localStorage.setItem("profile_updated_at",Date.now().toString()),m=(null===(n=x.data)||void 0===n||null===(n=n.profile)||void 0===n?void 0:n.shareCode)||(null===(r=x.data)||void 0===r?void 0:r.shareCode),setTimeout(function(){f(m?"/u/".concat(m):"/")},1500),e.n=22;break;case 21:e.p=21,j=e.v,Re((null===(b=j.response)||void 0===b||null===(b=b.data)||void 0===b?void 0:b.error)||j.message||B("editProfile.saveFailed"));case 22:return e.p=22,Oe(!1),e.f(22);case 23:return e.a(2)}},e,null,[[6,11,12,13],[5,21,22,23]])}));return function(){return e.apply(this,arguments)}}(),St=function(){var e=a(i().m(function e(){var t,n;return i().w(function(e){for(;;)switch(e.p=e.n){case 0:return Be(!0),e.p=1,e.n=2,w.deleteProfile();case 2:return e.n=3,O();case 3:f("/"),e.n=5;break;case 4:e.p=4,n=e.v,Re((null===(t=n.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.error)||B("editProfile.deleteFailed")),qe(!1);case 5:return e.p=5,Be(!1),e.f(5);case 6:return e.a(2)}},e,null,[[1,4,5,6]])}));return function(){return e.apply(this,arguments)}}(),Mt=[{id:"profile",label:B("editProfile.sectionProfile"),icon:"üë§",desc:B("editProfile.sectionProfileDesc")},{id:"media",label:B("editProfile.sectionMedia"),icon:"üì∑",desc:B("editProfile.sectionMediaDesc")},{id:"social",label:B("editProfile.sectionSocial"),icon:"üîó",desc:B("editProfile.sectionSocialDesc")},{id:"ai",label:B("editProfile.sectionAI"),icon:"ü§ñ",desc:B("editProfile.sectionAIDesc")}].concat(o(Ve?[{id:"kigurumi",label:B("editProfile.sectionKigurumi"),icon:"üé≠",desc:B("editProfile.sectionKigurumiDesc")}]:[]),o(null!=z&&z.managedShops&&z.managedShops.length>0?[{id:"shop",label:B("editProfile.sectionShop"),icon:"üè™",desc:B("editProfile.sectionShopDesc")}]:[]),o(Ve?[{id:"danger",label:B("editProfile.sectionDanger"),icon:"‚ö†Ô∏è",desc:B("editProfile.sectionDangerDesc")}]:[]));if(ct)return s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#0a0a0f]",children:s.jsx("div",{className:"w-10 h-10 border-2 border-purple-500 border-t-transparent rounded-full animate-spin"})});return s.jsxs("div",{className:"min-h-screen bg-[#0a0a0f]",children:[s.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-purple-900/10 via-transparent to-cyan-900/10 pointer-events-none"}),s.jsx("header",{className:"sticky top-0 z-50 backdrop-blur-xl bg-[#0a0a0f]/80 border-b border-white/[0.06]",children:s.jsxs("div",{className:"max-w-5xl mx-auto px-4 h-16 flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("button",{onClick:wt,className:"flex items-center gap-2 text-white/60 hover:text-white transition-colors",children:[s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),s.jsx("span",{className:"hidden sm:inline text-sm",children:B("editProfile.back")})]}),s.jsx("div",{className:"h-6 w-px bg-white/10 hidden sm:block"}),s.jsx("h1",{className:"text-lg font-semibold",children:B(Ve?"editProfile.title":"editProfile.createTitle")}),xt()&&s.jsx("span",{className:"ml-2 px-2 py-0.5 text-xs font-medium text-amber-400 bg-amber-500/20 rounded",children:B("editProfile.unsaved")})]}),s.jsx("button",{onClick:Pt,disabled:Ee,className:"px-5 py-2 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-400 hover:to-pink-400 disabled:opacity-50 rounded-xl text-sm font-medium transition-all hover:shadow-lg hover:shadow-purple-500/25",children:B(Ee?"editProfile.saving":"editProfile.save")})]})}),s.jsx("main",{className:"relative max-w-5xl mx-auto px-4 py-6 pb-32 md:pb-8",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[s.jsx("aside",{className:"hidden md:block w-64 flex-shrink-0",children:s.jsx("div",{className:"sticky top-24 bg-white/[0.02] border border-white/[0.06] rounded-2xl p-2 space-y-1",children:Mt.map(function(e){return s.jsxs("button",{onClick:function(){return R(e.id)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-left transition-all ".concat(I===e.id?"bg-gradient-to-r from-purple-500/20 to-pink-500/20 text-white border border-purple-500/30":"text-white/60 hover:text-white hover:bg-white/[0.04]"),children:[s.jsx("span",{className:"text-lg",children:e.icon}),s.jsx("span",{className:"text-sm font-medium",children:e.label})]},e.id)})})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"mb-6",children:[s.jsxs("h2",{className:"text-xl font-semibold text-white flex items-center gap-2",children:[s.jsx("span",{children:null===(e=Mt.find(function(e){return e.id===I}))||void 0===e?void 0:e.icon}),null===(c=Mt.find(function(e){return e.id===I}))||void 0===c?void 0:c.label]}),s.jsx("p",{className:"text-sm text-white/50 mt-1",children:null===(d=Mt.find(function(e){return e.id===I}))||void 0===d?void 0:d.desc})]}),"profile"===I&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-start gap-6 p-6 bg-white/[0.02] border border-white/[0.06] rounded-2xl",children:[s.jsxs("button",{onClick:function(){var e;return null===(e=at.current)||void 0===e?void 0:e.click()},className:"relative group flex-shrink-0",children:[s.jsx("div",{className:"w-24 h-24 rounded-2xl overflow-hidden bg-white/5 ring-2 ring-white/10 group-hover:ring-purple-500/50 transition-all",children:ut?s.jsx("img",{src:ut,alt:"",className:"w-full h-full object-cover"}):s.jsx("div",{className:"w-full h-full flex items-center justify-center text-white/20",children:s.jsx("svg",{className:"w-10 h-10",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})})})}),s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 opacity-0 group-hover:opacity-100 rounded-2xl transition",children:s.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"})})})]}),s.jsx("input",{ref:at,type:"file",accept:"image/*",onChange:Nt,className:"hidden"}),s.jsxs("div",{className:"flex-1 space-y-1",children:[s.jsx("h3",{className:"text-sm font-medium text-white",children:B("editProfile.avatar")}),s.jsx("p",{className:"text-xs text-white/40",children:B("editProfile.avatarHint")}),s.jsx("button",{onClick:function(){var e;return null===(e=at.current)||void 0===e?void 0:e.click()},className:"mt-3 px-4 py-2 text-sm text-purple-400 hover:text-purple-300 bg-purple-500/10 hover:bg-purple-500/20 rounded-lg transition",children:B("editProfile.changeAvatar")})]})]}),s.jsxs("div",{className:"p-6 bg-white/[0.02] border border-white/[0.06] rounded-2xl space-y-5",children:[s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-white/80 mb-2",children:[B("editProfile.cnName")," ",s.jsx("span",{className:"text-pink-400",children:B("editProfile.required")})]}),s.jsx("input",{type:"text",value:H,onChange:function(e){return U(e.target.value)},placeholder:B("editProfile.cnNamePlaceholder"),className:"w-full px-4 py-3 bg-white/[0.03] border border-white/[0.08] rounded-xl text-white placeholder-white/30 outline-none focus:border-purple-500/50 focus:bg-white/[0.05] transition-all",maxLength:30}),s.jsx("p",{className:"text-xs text-white/30 mt-1.5",children:B("editProfile.cnNameHint")})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-white/80 mb-2",children:[B("editProfile.introduction")," ",s.jsx("span",{className:"text-pink-400",children:B("editProfile.required")})]}),s.jsx("textarea",{value:he,onChange:function(e){return xe(e.target.value)},placeholder:B("editProfile.introPlaceholder"),rows:4,className:"w-full px-4 py-3 bg-white/[0.03] border border-white/[0.08] rounded-xl text-white placeholder-white/30 outline-none focus:border-purple-500/50 focus:bg-white/[0.05] transition-all resize-none",maxLength:500}),s.jsxs("div",{className:"flex justify-between text-xs text-white/30 mt-1.5",children:[s.jsx("span",{children:B("editProfile.introHint")}),s.jsxs("span",{children:[he.length,"/500"]})]})]}),s.jsxs("div",{children:[s.jsxs("label",{className:"block text-sm font-medium text-white/80 mb-2",children:[B("editProfile.location")," ",s.jsx("span",{className:"text-pink-400",children:B("editProfile.required")})]}),s.jsx(y,{value:Ne,onChange:Ce}),s.jsx("p",{className:"text-xs text-white/30 mt-1.5",children:B("editProfile.locationHint")})]}),s.jsxs("div",{className:"flex items-center justify-between py-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("label",{className:"block text-sm font-medium text-white/80",children:B("editProfile.hideLocation")}),s.jsx("p",{className:"text-xs text-white/30 mt-1",children:B("editProfile.hideLocationHint")})]}),s.jsx("button",{type:"button",role:"switch","aria-checked":Pe,onClick:function(){return Se(!Pe)},className:"relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 focus:ring-offset-[#0a0a0f] ".concat(Pe?"bg-purple-500":"bg-white/10"),children:s.jsx("span",{className:"pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out ".concat(Pe?"translate-x-5":"translate-x-0")})})]})]})]}),"media"===I&&s.jsx(W,{existingPhotos:je,previews:ve,coverImage:ie,coverPosition:ae,totalPhotos:ht,onSetCover:re,onRemovePhoto:function(e,t){t?ye(function(t){return t.filter(function(t,n){return n!==e})}):(URL.revokeObjectURL(ve[e]),pe(function(t){return t.filter(function(t,n){return n!==e})}),ge(function(t){return t.filter(function(t,n){return n!==e})}))},onReorderPhotos:ye,onAddPhotos:function(){var e;return null===(e=st.current)||void 0===e?void 0:e.click()},onAdjustCoverPosition:function(){return de(!0)},fileInputRef:st,handlePhotoSelect:Lt}),"social"===I&&s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"p-6 bg-white/[0.02] border border-white/[0.06] rounded-2xl",children:[s.jsxs("h3",{className:"text-sm font-medium text-white mb-4 flex items-center gap-2",children:[s.jsx("span",{className:"w-1.5 h-1.5 bg-cyan-500 rounded-full"}),B("editProfile.socialMediaTitle")]}),s.jsx(k,{value:Je,onChange:Ye})]})}),"ai"===I&&s.jsx("div",{className:"space-y-6",children:s.jsxs("div",{className:"p-6 bg-white/[0.02] border border-white/[0.06] rounded-2xl",children:[s.jsxs("h3",{className:"text-sm font-medium text-white mb-4 flex items-center gap-2",children:[s.jsx("span",{className:"w-1.5 h-1.5 bg-purple-500 rounded-full"}),B("editProfile.aiTitle")]}),s.jsx("p",{className:"text-sm text-white/50 mb-4",children:B("editProfile.aiDesc")}),s.jsx(r,{value:Xe,onChange:$e})]})}),"kigurumi"===I&&et&&s.jsx("div",{className:"space-y-6",children:s.jsx("div",{className:"p-6 bg-white/[0.02] border border-white/[0.06] rounded-2xl",children:s.jsx(L,{profileId:et})})}),"shop"===I&&(null==z?void 0:z.managedShops)&&z.managedShops.length>0&&s.jsxs("div",{className:"space-y-4",children:[s.jsx("p",{className:"text-sm text-white/50 mb-4",children:B("editProfile.shopManageDesc")}),z.managedShops.map(function(e){return s.jsx(C,{to:"/edit-shop/".concat(e.slug),className:"block p-6 bg-gradient-to-r from-purple-500/10 to-pink-500/10 border border-purple-500/20 rounded-2xl hover:border-purple-500/40 transition group",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx("div",{className:"w-16 h-16 bg-white/5 rounded-2xl flex items-center justify-center flex-shrink-0 overflow-hidden",children:e.logo?s.jsx("img",{src:b(e.logo),alt:"",className:"w-full h-full object-cover"}):s.jsx("span",{className:"text-3xl",children:"üè™"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"text-lg font-semibold text-white mb-1",children:e.name}),s.jsxs("p",{className:"text-sm text-white/50",children:["/",e.slug]})]}),s.jsx("svg",{className:"w-6 h-6 text-white/30 group-hover:text-white/60 group-hover:translate-x-1 transition-all",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})},e.id)})]}),"danger"===I&&s.jsx("div",{className:"p-6 bg-white/[0.02] border border-red-500/20 rounded-2xl",children:s.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center justify-between gap-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-red-400",children:B("editProfile.deleteProfile")}),s.jsx("p",{className:"text-xs text-white/40 mt-1",children:B("editProfile.deleteProfileDesc")})]}),s.jsx("button",{onClick:function(){return qe(!0)},className:"px-5 py-2.5 text-sm font-medium text-red-400 bg-red-500/10 hover:bg-red-500/20 border border-red-500/20 hover:border-red-500/40 rounded-xl transition-all",children:B("editProfile.deleteProfile")})]})})]})]})}),s.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 z-40 bg-[#0a0a0f]/95 backdrop-blur-xl border-t border-white/[0.06]",children:s.jsx("div",{className:"flex overflow-x-auto scrollbar-hide",children:Mt.map(function(e){return s.jsxs("button",{onClick:function(){return R(e.id)},className:"flex-1 min-w-[60px] flex flex-col items-center gap-1 py-3 px-2 transition-all ".concat(I===e.id?"text-purple-400":"text-white/40"),children:[s.jsx("span",{className:"text-lg",children:e.icon}),s.jsx("span",{className:"text-[10px] font-medium truncate",children:e.label.split(" ")[0]})]},e.id)})})}),(Ie||He)&&s.jsx("div",{className:"fixed top-20 left-4 right-4 max-w-md mx-auto p-4 rounded-2xl shadow-2xl z-50 ".concat(Ie?"bg-red-500/20 border border-red-500/30 text-red-300":"bg-green-500/20 border border-green-500/30 text-green-300"),children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("span",{className:"text-sm",children:Ie||He}),s.jsx("button",{onClick:function(){Re(""),Ue("")},className:"ml-auto text-white/50 hover:text-white",children:s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),Fe&&s.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-[#1a1a24] rounded-2xl p-6 max-w-sm w-full",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl bg-red-500/20 flex items-center justify-center",children:s.jsx("svg",{className:"w-8 h-8 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),s.jsx("h3",{className:"text-xl font-bold mb-2",children:B("editProfile.deleteConfirmTitle")}),s.jsx("p",{className:"text-white/60 text-sm",children:B("editProfile.deleteConfirmDesc")})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsx("button",{onClick:function(){return qe(!1)},className:"flex-1 py-3 bg-white/5 hover:bg-white/10 rounded-xl font-medium transition",children:B("editProfile.cancel")}),s.jsx("button",{onClick:St,disabled:ze,className:"flex-1 py-3 bg-red-500 hover:bg-red-600 text-white rounded-xl font-medium transition disabled:opacity-50",children:B(ze?"editProfile.deleting":"editProfile.confirmDelete")})]})]})}),ce&&ie&&s.jsx(P,{imageUrl:b(ie)||ie,initialPosition:ae,onSave:function(e){oe(e),de(!1)},onCancel:function(){return de(!1)}}),X&&ee&&s.jsx(S,{imageFile:ee,onCrop:Ct,onCancel:function(){$(!1),te(null),at.current&&(at.current.value="")}}),ft&&s.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-4",children:s.jsxs("div",{className:"bg-[#1a1a24] rounded-2xl p-6 max-w-sm w-full",children:[s.jsxs("div",{className:"text-center mb-6",children:[s.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl bg-amber-500/20 flex items-center justify-center",children:s.jsx("svg",{className:"w-8 h-8 text-amber-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),s.jsx("h3",{className:"text-xl font-bold mb-2",children:B("editProfile.unsavedTitle")}),s.jsx("p",{className:"text-white/60 text-sm",children:B("editProfile.unsavedDesc")})]}),s.jsxs("div",{className:"flex flex-col gap-2",children:[s.jsx("button",{onClick:yt,className:"w-full py-3 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-400 hover:to-pink-400 text-white rounded-xl font-medium transition",children:B("editProfile.saveAndLeave")}),s.jsx("button",{onClick:jt,className:"w-full py-3 bg-red-500/20 hover:bg-red-500/30 text-red-400 rounded-xl font-medium transition",children:B("editProfile.dontSave")}),s.jsx("button",{onClick:kt,className:"w-full py-3 bg-white/5 hover:bg-white/10 text-white/60 rounded-xl font-medium transition",children:B("editProfile.cancel")})]})]})})]})});var E=12,O=30;function W(e){var t=e.existingPhotos,n=e.previews,i=e.coverImage,r=e.coverPosition,a=e.totalPhotos,l=e.onSetCover,c=e.onRemovePhoto,d=e.onReorderPhotos,h=e.onAddPhotos,f=e.onAdjustCoverPosition,p=e.fileInputRef,v=e.handlePhotoSelect,g=m().t,w=u(x.useState(!1),2),j=w[0],y=w[1],k=u(x.useState(!1),2),N=k[0],C=k[1],L=u(x.useState(0),2),P=L[0],S=L[1];x.useEffect(function(){var e=function(){return C(window.innerWidth<768)};return e(),window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}},[]);var W=[].concat(o(t.map(function(e,t){return{src:b(e)||e,isExisting:!0,index:t,originalSrc:e}})),o(n.map(function(e,t){return{src:e,isExisting:!1,index:t,originalSrc:e}}))),z=j||a<=E?W:W.slice(0,E),B=a>E,D=a-E;return s.jsxs("div",{className:"space-y-6",children:[i&&s.jsxs("div",{className:"p-6 bg-white/[0.02] border border-white/[0.06] rounded-2xl",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-white",children:g("media.coverImage")}),s.jsx("p",{className:"text-xs text-white/40 mt-0.5",children:g("media.coverHint")})]}),s.jsxs("button",{onClick:f,className:"px-4 py-2 text-sm font-medium text-purple-400 bg-purple-500/10 hover:bg-purple-500/20 rounded-lg transition-all flex items-center gap-2",children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16V4m0 0L3 8m4-4l4 4m6 0v12m0 0l4-4m-4 4l-4-4"})}),g("media.adjustPosition")]})]}),s.jsxs("div",{className:"relative w-full aspect-[21/9] rounded-xl overflow-hidden bg-white/5",children:[s.jsx("img",{src:b(i)||i,alt:g("media.coverPreview"),className:"w-full h-full object-cover",style:{objectPosition:"".concat(r.x,"% ").concat(r.y,"%")}}),s.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"}),s.jsx("div",{className:"absolute bottom-3 left-3 text-xs text-white/60",children:g("media.currentPosition").replace("{n}",String(Math.round(r.y)))})]})]}),s.jsxs("div",{className:"p-6 bg-white/[0.02] border border-white/[0.06] rounded-2xl",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-sm font-medium text-white",children:g("media.photoWall")}),s.jsx("p",{className:"text-xs text-white/40 mt-0.5",children:g("media.photoWallHint").replace("{max}",String(O))})]}),s.jsxs("span",{className:"text-sm text-white/40 bg-white/5 px-3 py-1 rounded-full",children:[a,"/",O]})]}),N&&a>0?s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"relative aspect-square rounded-xl overflow-hidden bg-white/5",children:W[P]&&s.jsxs(s.Fragment,{children:[s.jsx("img",{src:W[P].src,className:"w-full h-full object-cover",alt:""}),W[P].isExisting&&i===W[P].originalSrc&&s.jsx("div",{className:"absolute top-3 left-3 px-2 py-1 bg-gradient-to-r from-purple-500 to-pink-500 rounded text-xs font-medium",children:g("media.cover")}),!W[P].isExisting&&s.jsx("div",{className:"absolute top-3 left-3 px-2 py-1 bg-green-500/80 rounded text-xs font-medium",children:g("media.new")}),s.jsxs("div",{className:"absolute bottom-3 left-3 right-3 flex justify-center gap-2",children:[W[P].isExisting&&s.jsx("button",{onClick:function(){return l(W[P].originalSrc)},className:"px-3 py-2 rounded-lg text-xs font-medium transition ".concat(i===W[P].originalSrc?"bg-purple-500 text-white":"bg-black/60 backdrop-blur-sm text-white hover:bg-purple-500"),children:g("media.setCover")}),s.jsx("button",{onClick:function(){var e=W[P];e.isExisting&&i===e.originalSrc&&l(null),c(e.index,e.isExisting),P>=W.length-1&&P>0&&S(P-1)},className:"px-3 py-2 bg-red-500/80 backdrop-blur-sm text-white rounded-lg text-xs font-medium",children:g("media.delete")})]})]})}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("button",{onClick:function(){S(function(e){return Math.max(0,e-1)})},disabled:0===P,className:"w-10 h-10 rounded-full bg-white/10 hover:bg-white/20 disabled:opacity-30 disabled:cursor-not-allowed flex items-center justify-center transition",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),s.jsxs("span",{className:"text-sm text-white/60",children:[P+1," / ",W.length]}),s.jsx("button",{onClick:function(){S(function(e){return Math.min(W.length-1,e+1)})},disabled:P>=W.length-1,className:"w-10 h-10 rounded-full bg-white/10 hover:bg-white/20 disabled:opacity-30 disabled:cursor-not-allowed flex items-center justify-center transition",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),s.jsxs("div",{className:"flex gap-2 overflow-x-auto pb-2 scrollbar-hide",children:[W.map(function(e,t){return s.jsx("button",{onClick:function(){return S(t)},className:"flex-shrink-0 w-14 h-14 rounded-lg overflow-hidden transition ".concat(t===P?"ring-2 ring-purple-500":"opacity-60 hover:opacity-100"),children:s.jsx("img",{src:e.src,className:"w-full h-full object-cover",alt:""})},"thumb-".concat(e.isExisting?"e":"n","-").concat(e.index))}),a<O&&s.jsx("button",{onClick:h,className:"flex-shrink-0 w-14 h-14 border-2 border-dashed border-white/20 hover:border-purple-500/50 rounded-lg flex items-center justify-center text-white/40 hover:text-purple-400 transition",children:s.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})})]})]}):s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 lg:grid-cols-6 gap-3",children:[z.map(function(e){return s.jsx(M,{src:e.src,isCover:e.isExisting&&i===e.originalSrc,isNew:!e.isExisting,onSetCover:e.isExisting?function(){return l(e.originalSrc)}:void 0,onDelete:function(){e.isExisting&&i===e.originalSrc&&l(null),c(e.index,e.isExisting)},onMoveUp:e.isExisting&&e.index>0?function(){var n=o(t),i=[n[e.index],n[e.index-1]];n[e.index-1]=i[0],n[e.index]=i[1],d(n)}:void 0,onMoveDown:e.isExisting&&e.index<t.length-1?function(){var n=o(t),i=[n[e.index+1],n[e.index]];n[e.index]=i[0],n[e.index+1]=i[1],d(n)}:void 0},"".concat(e.isExisting?"e":"n","-").concat(e.index))}),a<O&&(j||a<=E)&&s.jsxs("button",{onClick:h,className:"aspect-square border-2 border-dashed border-white/10 hover:border-purple-500/50 rounded-xl flex flex-col items-center justify-center text-white/30 hover:text-purple-400 transition-all hover:bg-purple-500/5",children:[s.jsx("svg",{className:"w-6 h-6 mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12 4v16m8-8H4"})}),s.jsx("span",{className:"text-xs",children:g("media.add")})]})]}),B&&s.jsx("div",{className:"mt-4 text-center",children:s.jsx("button",{onClick:function(){return y(!j)},className:"inline-flex items-center gap-2 px-4 py-2 bg-white/5 hover:bg-white/10 border border-white/10 hover:border-white/20 rounded-xl text-sm text-white/70 hover:text-white transition-all",children:j?s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})}),g("media.collapsePhotos")]}):s.jsxs(s.Fragment,{children:[s.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),g("media.viewAll").replace("{n}",String(D))]})})})]}),s.jsx("input",{ref:p,type:"file",accept:"image/*",multiple:!0,onChange:v,className:"hidden"})]})]})}}}})}();
