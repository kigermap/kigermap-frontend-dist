import{j as e,u as t,b as l}from"./query-DSsWWIdM.js";import{a as s}from"./sentry-DvvTOdwe.js";import{e as r,s as a,u as i,g as n,v as o,n as c,b as d}from"./index-D0yqgRjz.js";import{L as x}from"./LocationPicker-BaOIu6uD.js";import{C as m}from"./CustomSelect-B-AWyF9k.js";import{d as h,a as p,L as u}from"./router-jbVFofSC.js";import"./store-BXxpTH1V.js";function b({value:t,onChange:l,placeholder:i="è¯·è¾“å…¥å†…å®¹...",maxLength:n=5e4}){const o=s.useRef(null),{showNotification:c,NotificationComponent:d}=r({position:"center"}),[x,m]=s.useState(!1),h=s.useCallback((e,t)=>{var l;document.execCommand(e,!1,t),null==(l=o.current)||l.focus(),p()},[]),p=s.useCallback(()=>{if(o.current){const e=o.current.innerHTML;e.length<=n&&l(e)}},[l,n]),u=s.useCallback(e=>{e.preventDefault();const t=e.clipboardData.getData("text/plain");document.execCommand("insertText",!1,t),p()},[p]),b=[{icon:"B",command:"bold",title:"ç²—ä½“"},{icon:"I",command:"italic",title:"æ–œä½“"},{icon:"U",command:"underline",title:"ä¸‹åˆ’çº¿"},{icon:"S",command:"strikeThrough",title:"åˆ é™¤çº¿"},{type:"divider"},{icon:"H1",command:"formatBlock",value:"h1",title:"æ ‡é¢˜1"},{icon:"H2",command:"formatBlock",value:"h2",title:"æ ‡é¢˜2"},{icon:"H3",command:"formatBlock",value:"h3",title:"æ ‡é¢˜3"},{type:"divider"},{icon:"â€¢",command:"insertUnorderedList",title:"æ— åºåˆ—è¡¨"},{icon:"1.",command:"insertOrderedList",title:"æœ‰åºåˆ—è¡¨"},{type:"divider"},{icon:'""',command:"formatBlock",value:"blockquote",title:"å¼•ç”¨"},{icon:"ğŸ”—",command:"link",title:"æ’å…¥é“¾æ¥",action:s.useCallback(()=>{const e=prompt("è¯·è¾“å…¥é“¾æ¥åœ°å€ï¼š","https://");e&&"https://"!==e&&(e.startsWith("http://")||e.startsWith("https://")?h("createLink",e):c("è¯·è¾“å…¥æœ‰æ•ˆçš„é“¾æ¥åœ°å€ï¼ˆä»¥ http:// æˆ– https:// å¼€å¤´ï¼‰","error"))},[h])},{icon:"ğŸ–¼ï¸",command:"image",title:"æ’å…¥å›¾ç‰‡",action:s.useCallback(()=>{const e=prompt("è¯·è¾“å…¥å›¾ç‰‡åœ°å€ï¼š","https://");e&&"https://"!==e&&(e.startsWith("http://")||e.startsWith("https://")?h("insertImage",e):c("è¯·è¾“å…¥æœ‰æ•ˆçš„å›¾ç‰‡åœ°å€","error"))},[h])},{type:"divider"},{icon:"â¬…",command:"justifyLeft",title:"å·¦å¯¹é½"},{icon:"â˜°",command:"justifyCenter",title:"å±…ä¸­"},{icon:"â¡",command:"justifyRight",title:"å³å¯¹é½"}];return e.jsxs("div",{className:"border border-white/10 rounded-xl overflow-hidden bg-white/[0.02]",children:[d,e.jsx("div",{className:"flex flex-wrap items-center gap-1 p-2 border-b border-white/10 bg-white/[0.02]",children:b.map((t,l)=>{if("type"in t&&"divider"===t.type)return e.jsx("div",{className:"w-px h-6 bg-white/10 mx-1"},l);const s=t;return e.jsx("button",{type:"button",onClick:()=>{s.action?s.action():s.value?h(s.command,s.value):h(s.command)},className:"w-8 h-8 flex items-center justify-center rounded hover:bg-white/10 text-white/70 hover:text-white transition text-sm font-medium",title:s.title,children:s.icon},l)})}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{ref:o,contentEditable:!0,onInput:p,onPaste:u,onFocus:()=>m(!0),onBlur:()=>m(!1),dangerouslySetInnerHTML:{__html:a(t)},className:"min-h-[200px] max-h-[500px] overflow-y-auto p-4 outline-none text-white/90 prose prose-invert prose-sm max-w-none\n            prose-headings:text-white prose-p:my-2 prose-a:text-purple-400 prose-blockquote:border-purple-500\n            ".concat(t||x?"":"text-white/30"),style:{wordBreak:"break-word"}}),!t&&!x&&e.jsx("div",{className:"absolute top-4 left-4 text-white/30 pointer-events-none",children:i})]}),e.jsxs("div",{className:"flex justify-between items-center px-4 py-2 border-t border-white/10 text-xs text-white/40",children:[e.jsx("span",{children:"æ”¯æŒå¯Œæ–‡æœ¬æ ¼å¼"}),e.jsxs("span",{children:[t.length," / ",n]})]})]})}function g(){var r,a,g,v,j,w;const{slug:f}=h(),N=p(),y=t(),{isAuthenticated:k}=i(),[C,M]=s.useState("basic"),[I,T]=s.useState(!1),[q,S]=s.useState(""),[E,L]=s.useState(""),[O,F]=s.useState(""),[B,z]=s.useState({name:"",nameEn:"",description:"",descriptionHtml:"",logo:"",coverImage:"",gallery:[],priceMin:"",priceMax:"",leadTimeMin:"",leadTimeMax:"",leadTimeNote:"",country:"ä¸­å›½",region:"",website:"",twitter:"",weibo:"",taobao:"",qq:"",wechat:"",xianyu:"",email:"",tags:[],features:"",acceptingOrders:!0,lat:null,lng:null,address:""}),[H,R]=s.useState(!1),[W,X]=s.useState(null),[D,K]=s.useState({name:"",nameEn:"",description:"",sortOrder:0}),[Q,P]=s.useState(!1),[A,_]=s.useState(null),[U,G]=s.useState({name:"",nameEn:"",description:"",coverImage:"",price:"",priceNote:"",leadTime:"",categoryId:"",isFeatured:!1,isNew:!0,sortOrder:0,tags:[],images:[]}),[J,V]=s.useState(""),[Y,Z]=s.useState(!1),[$,ee]=s.useState(!1),te=s.useRef(null),le=s.useRef(null),se=s.useRef(null),re=s.useRef(null),ae=s.useRef(null),{data:ie}=l({queryKey:["my-shops"],queryFn:async()=>(await d.get("/my/shops")).data,enabled:k}),ne=(null==ie?void 0:ie.shops)||[],{data:oe,isLoading:ce}=l({queryKey:["my-shop",f],queryFn:async()=>(await d.get("/my/shops/".concat(f))).data,enabled:!!f&&k}),{data:de,refetch:xe}=l({queryKey:["shop-categories",null==(r=null==oe?void 0:oe.shop)?void 0:r.id],queryFn:async()=>{var e;return(await d.get("/my/shops/".concat(null==(e=null==oe?void 0:oe.shop)?void 0:e.id,"/categories"))).data},enabled:!!(null==(a=null==oe?void 0:oe.shop)?void 0:a.id)}),{data:me,refetch:he}=l({queryKey:["shop-products",null==(g=null==oe?void 0:oe.shop)?void 0:g.id],queryFn:async()=>{var e;return(await d.get("/my/shops/".concat(null==(e=null==oe?void 0:oe.shop)?void 0:e.id,"/products"))).data},enabled:!!(null==(v=null==oe?void 0:oe.shop)?void 0:v.id)}),pe=(null==de?void 0:de.categories)||[],ue=(null==me?void 0:me.products)||[];s.useEffect(()=>{var e,t,l,s,r,a,i;if(null==oe?void 0:oe.shop){const n=oe.shop;z({name:n.name||"",nameEn:n.nameEn||"",description:n.description||"",descriptionHtml:n.descriptionHtml||"",logo:n.logo||"",coverImage:n.coverImage||"",gallery:n.gallery||[],priceMin:(null==(e=n.priceMin)?void 0:e.toString())||"",priceMax:(null==(t=n.priceMax)?void 0:t.toString())||"",leadTimeMin:(null==(l=n.leadTimeMin)?void 0:l.toString())||"",leadTimeMax:(null==(s=n.leadTimeMax)?void 0:s.toString())||"",leadTimeNote:n.leadTimeNote||"",country:n.country||"ä¸­å›½",region:n.region||"",website:n.website||"",twitter:n.twitter||"",weibo:n.weibo||"",taobao:n.taobao||"",qq:n.qq||"",wechat:n.wechat||"",xianyu:n.xianyu||"",email:n.email||"",tags:n.tags||[],features:n.features||"",acceptingOrders:null==(r=n.acceptingOrders)||r,lat:null!=(a=n.lat)?a:null,lng:null!=(i=n.lng)?i:null,address:n.address||""})}},[oe]),s.useEffect(()=>{k||N("/login")},[k,N]);const be=async(e,t)=>{var l;const s=o(e);if(s)return S(s),null;if(!(null==(l=null==oe?void 0:oe.shop)?void 0:l.id))return S("å·¥åŠä¿¡æ¯æœªåŠ è½½"),null;try{return await c(e,oe.shop.id)}catch(r){return S(r.message||"å›¾ç‰‡ä¸Šä¼ å¤±è´¥"),null}},ge=()=>{O.trim()&&!B.tags.includes(O.trim())&&(z(e=>({...e,tags:[...e.tags,O.trim()]})),F(""))},ve=()=>{J.trim()&&U.tags.length<5&&!U.tags.includes(J.trim())&&(G(e=>({...e,tags:[...e.tags,J.trim()]})),V(""))};if(!f)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#0a0a0f]",children:e.jsx("p",{className:"text-white/50",children:"è¯·é€‰æ‹©è¦ç¼–è¾‘çš„å·¥åŠ"})});if(ce)return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-[#0a0a0f]",children:e.jsx("div",{className:"w-10 h-10 border-2 border-purple-500 border-t-transparent rounded-full animate-spin"})});if(!(null==oe?void 0:oe.shop))return e.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-[#0a0a0f] px-4",children:[e.jsx("div",{className:"w-24 h-24 mb-6 rounded-full bg-white/5 flex items-center justify-center",children:e.jsx("span",{className:"text-5xl",children:"ğŸª"})}),e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"æ— å·¥åŠæƒé™"}),e.jsx("p",{className:"text-white/50 mb-6 text-center",children:"æ‚¨æ²¡æœ‰æƒé™ç®¡ç†æ­¤å·¥åŠ"}),e.jsx(u,{to:"/profile/edit",className:"px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl font-medium",children:"è¿”å›ä¸ªäººè®¾ç½®"})]});const je=[{id:"basic",label:"åŸºæœ¬ä¿¡æ¯",icon:"ğŸ“"},{id:"description",label:"è¯¦ç»†ä»‹ç»",icon:"ğŸ“–"},{id:"media",label:"å›¾ç‰‡ç®¡ç†",icon:"ğŸ–¼ï¸"},{id:"contact",label:"è”ç³»æ–¹å¼",icon:"ğŸ“"},{id:"categories",label:"ä½œå“åˆ†ç±»",icon:"ğŸ“‚"},{id:"products",label:"ä½œå“ç®¡ç†",icon:"ğŸ¨"}];return e.jsxs("div",{className:"min-h-screen bg-[#0a0a0f]",children:[e.jsx("div",{className:"fixed inset-0 bg-gradient-to-br from-purple-900/10 via-transparent to-cyan-900/10 pointer-events-none"}),e.jsx("header",{className:"sticky top-0 z-50 backdrop-blur-xl bg-[#0a0a0f]/80 border-b border-white/[0.06]",children:e.jsxs("div",{className:"max-w-6xl mx-auto px-4 h-16 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(u,{to:"/profile/edit",className:"flex items-center gap-2 text-white/60 hover:text-white transition-colors",children:[e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),e.jsx("span",{className:"hidden sm:inline text-sm",children:"è¿”å›"})]}),e.jsx("div",{className:"h-6 w-px bg-white/10 hidden sm:block"}),e.jsxs("h1",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx("span",{children:"ğŸª"})," å·¥åŠç®¡ç†"]}),ne.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"h-6 w-px bg-white/10 hidden sm:block"}),e.jsxs("div",{className:"relative group",children:[e.jsxs("button",{className:"flex items-center gap-2 px-3 py-1.5 bg-white/5 hover:bg-white/10 border border-white/10 rounded-lg transition",children:[(null==(j=null==oe?void 0:oe.shop)?void 0:j.logo)?e.jsx("img",{src:n(oe.shop.logo),alt:"",className:"w-5 h-5 rounded object-cover"}):e.jsx("span",{className:"text-sm",children:"ğŸª"}),e.jsx("span",{className:"text-sm font-medium max-w-[100px] truncate",children:(null==(w=null==oe?void 0:oe.shop)?void 0:w.name)||"é€‰æ‹©å·¥åŠ"}),e.jsx("svg",{className:"w-4 h-4 text-white/50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),e.jsx("div",{className:"absolute top-full left-0 mt-1 w-56 bg-[#1a1a24] border border-white/10 rounded-xl shadow-2xl opacity-0 invisible group-hover:opacity-100 group-hover:visible transition-all duration-200 z-50",children:e.jsx("div",{className:"p-2 space-y-1",children:ne.map(t=>e.jsxs(u,{to:"/edit-shop/".concat(t.slug),className:"flex items-center gap-3 px-3 py-2 rounded-lg transition ".concat(t.slug===f?"bg-purple-500/20 text-purple-300":"hover:bg-white/5 text-white/70 hover:text-white"),children:[t.logo?e.jsx("img",{src:n(t.logo),alt:"",className:"w-8 h-8 rounded-lg object-cover"}):e.jsx("div",{className:"w-8 h-8 rounded-lg bg-purple-500/20 flex items-center justify-center text-sm",children:"ğŸª"}),e.jsx("span",{className:"text-sm font-medium truncate",children:t.name}),t.slug===f&&e.jsx("svg",{className:"w-4 h-4 ml-auto text-purple-400",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]},t.id))})})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(u,{to:"/shops/".concat(f),target:"_blank",className:"px-4 py-2 text-sm text-white/60 hover:text-white transition",children:"é¢„è§ˆå·¥åŠ"}),e.jsx("button",{onClick:async()=>{var e,t;S(""),L(""),T(!0);try{const e={...B,priceMin:B.priceMin?parseInt(B.priceMin):null,priceMax:B.priceMax?parseInt(B.priceMax):null,leadTimeMin:B.leadTimeMin?parseInt(B.leadTimeMin):null,leadTimeMax:B.leadTimeMax?parseInt(B.leadTimeMax):null};await d.put("/shops/".concat(f),e),L("ä¿å­˜æˆåŠŸï¼"),y.invalidateQueries({queryKey:["my-shop",f]}),setTimeout(()=>L(""),3e3)}catch(l){S((null==(t=null==(e=l.response)?void 0:e.data)?void 0:t.error)||"ä¿å­˜å¤±è´¥")}finally{T(!1)}},disabled:I,className:"px-5 py-2 bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-400 hover:to-pink-400 disabled:opacity-50 rounded-xl text-sm font-medium transition-all",children:I?"ä¿å­˜ä¸­...":"ä¿å­˜"})]})]})}),e.jsx("main",{className:"relative max-w-6xl mx-auto px-4 py-6 pb-32 md:pb-8",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsx("aside",{className:"hidden md:block w-56 flex-shrink-0",children:e.jsx("div",{className:"sticky top-24 bg-white/[0.02] border border-white/[0.06] rounded-2xl p-2 space-y-1",children:je.map(t=>e.jsxs("button",{onClick:()=>M(t.id),className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-left transition-all ".concat(C===t.id?"bg-gradient-to-r from-purple-500/20 to-pink-500/20 text-white border border-purple-500/30":"text-white/60 hover:text-white hover:bg-white/[0.04]"),children:[e.jsx("span",{className:"text-lg",children:t.icon}),e.jsx("span",{className:"text-sm font-medium",children:t.label})]},t.id))})}),e.jsxs("div",{className:"flex-1 min-w-0",children:["basic"===C&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"p-6 bg-white/[0.02] border border-white/[0.06] rounded-2xl space-y-5",children:[e.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx("span",{children:"ğŸ“"})," åŸºæœ¬ä¿¡æ¯"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-2",children:"å·¥åŠåç§°"}),e.jsx("input",{type:"text",value:B.name,onChange:e=>z(t=>({...t,name:e.target.value})),className:"w-full px-4 py-3 bg-white/[0.03] border border-white/[0.08] rounded-xl text-white outline-none focus:border-purple-500/50",placeholder:"å·¥åŠåç§°"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-2",children:"è‹±æ–‡åç§°"}),e.jsx("input",{type:"text",value:B.nameEn,onChange:e=>z(t=>({...t,nameEn:e.target.value})),className:"w-full px-4 py-3 bg-white/[0.03] border border-white/[0.08] rounded-xl text-white outline-none focus:border-purple-500/50",placeholder:"English Name"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-2",children:"ç®€çŸ­ä»‹ç»"}),e.jsx("textarea",{value:B.description,onChange:e=>z(t=>({...t,description:e.target.value})),rows:3,className:"w-full px-4 py-3 bg-white/[0.03] border border-white/[0.08] rounded-xl text-white outline-none focus:border-purple-500/50 resize-none",placeholder:"ç®€çŸ­ä»‹ç»ä½ çš„å·¥åŠ..."})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-2",children:"æœ€ä½ä»·æ ¼"}),e.jsx("input",{type:"number",value:B.priceMin,onChange:e=>z(t=>({...t,priceMin:e.target.value})),className:"w-full px-4 py-3 bg-white/[0.03] border border-white/[0.08] rounded-xl text-white outline-none focus:border-purple-500/50",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-2",children:"æœ€é«˜ä»·æ ¼"}),e.jsx("input",{type:"number",value:B.priceMax,onChange:e=>z(t=>({...t,priceMax:e.target.value})),className:"w-full px-4 py-3 bg-white/[0.03] border border-white/[0.08] rounded-xl text-white outline-none focus:border-purple-500/50",placeholder:"10000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-2",children:"æœ€çŸ­å·¥æœŸ(å¤©)"}),e.jsx("input",{type:"number",value:B.leadTimeMin,onChange:e=>z(t=>({...t,leadTimeMin:e.target.value})),className:"w-full px-4 py-3 bg-white/[0.03] border border-white/[0.08] rounded-xl text-white outline-none focus:border-purple-500/50",placeholder:"30"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-2",children:"æœ€é•¿å·¥æœŸ(å¤©)"}),e.jsx("input",{type:"number",value:B.leadTimeMax,onChange:e=>z(t=>({...t,leadTimeMax:e.target.value})),className:"w-full px-4 py-3 bg-white/[0.03] border border-white/[0.08] rounded-xl text-white outline-none focus:border-purple-500/50",placeholder:"90"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-2",children:"å·¥æœŸå¤‡æ³¨"}),e.jsx("input",{type:"text",value:B.leadTimeNote,onChange:e=>z(t=>({...t,leadTimeNote:e.target.value})),className:"w-full px-4 py-3 bg-white/[0.03] border border-white/[0.08] rounded-xl text-white outline-none focus:border-purple-500/50",placeholder:"å¦‚ï¼šå…·ä½“å·¥æœŸè§†è®¢å•æƒ…å†µè€Œå®š"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-2",children:"å›½å®¶/åœ°åŒº"}),e.jsx(m,{value:B.country,onChange:e=>z(t=>({...t,country:e})),options:[{value:"ä¸­å›½",label:"ä¸­å›½"},{value:"æ—¥æœ¬",label:"æ—¥æœ¬"},{value:"å°æ¹¾",label:"å°æ¹¾"},{value:"é¦™æ¸¯",label:"é¦™æ¸¯"},{value:"å…¶ä»–",label:"å…¶ä»–"}]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-2",children:"çœä»½/åŸå¸‚"}),e.jsx("input",{type:"text",value:B.region,onChange:e=>z(t=>({...t,region:e.target.value})),className:"w-full px-4 py-3 bg-white/[0.03] border border-white/[0.08] rounded-xl text-white outline-none focus:border-purple-500/50",placeholder:"å¦‚ï¼šå¹¿ä¸œ"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-2",children:"æ ‡ç­¾"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:B.tags.map(t=>e.jsxs("span",{className:"px-3 py-1 bg-purple-500/20 text-purple-300 rounded-full text-sm flex items-center gap-1",children:[t,e.jsx("button",{onClick:()=>(e=>z(t=>({...t,tags:t.tags.filter(t=>t!==e)})))(t),className:"hover:text-white",children:"Ã—"})]},t))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:O,onChange:e=>F(e.target.value),onKeyDown:e=>"Enter"===e.key&&(e.preventDefault(),ge()),className:"flex-1 px-4 py-2 bg-white/[0.03] border border-white/[0.08] rounded-xl text-white outline-none focus:border-purple-500/50",placeholder:"æ·»åŠ æ ‡ç­¾..."}),e.jsx("button",{onClick:ge,className:"px-4 py-2 bg-purple-500/20 text-purple-300 rounded-xl hover:bg-purple-500/30",children:"æ·»åŠ "})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/[0.02] rounded-xl",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"æ¥å•çŠ¶æ€"}),e.jsx("div",{className:"text-sm text-white/50",children:"æ˜¯å¦æ­£åœ¨æ¥å—æ–°è®¢å•"})]}),e.jsx("button",{onClick:()=>z(e=>({...e,acceptingOrders:!e.acceptingOrders})),className:"w-14 h-8 rounded-full transition-colors ".concat(B.acceptingOrders?"bg-green-500":"bg-white/20"),children:e.jsx("div",{className:"w-6 h-6 bg-white rounded-full transition-transform ".concat(B.acceptingOrders?"translate-x-7":"translate-x-1")})})]})]}),e.jsxs("div",{className:"p-6 bg-white/[0.02] border border-white/[0.06] rounded-2xl space-y-5",children:[e.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx("span",{children:"ğŸ“"})," å·¥åŠå®šä½"]}),e.jsx("p",{className:"text-sm text-white/50",children:"è®¾ç½®å·¥åŠä½ç½®åï¼Œå°†åœ¨é¦–é¡µåœ°å›¾ä¸Šæ˜¾ç¤ºæ‚¨çš„å·¥åŠæ ‡è®°"}),e.jsx(x,{value:B.lat&&B.lng?{lat:B.lat,lng:B.lng,country:B.country,province:B.region||void 0}:void 0,onChange:e=>{z(e?t=>({...t,lat:e.lat,lng:e.lng,country:e.country||t.country,region:e.province||e.city||t.region}):e=>({...e,lat:null,lng:null}))}}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-2",children:"è¯¦ç»†åœ°å€ï¼ˆå¯é€‰ï¼‰"}),e.jsx("input",{type:"text",value:B.address,onChange:e=>z(t=>({...t,address:e.target.value})),className:"w-full px-4 py-3 bg-white/[0.03] border border-white/[0.08] rounded-xl text-white outline-none focus:border-purple-500/50",placeholder:"å¦‚ï¼šXXå¸‚XXåŒºXXè·¯XXå·"})]}),B.lat&&B.lng&&e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-green-500/10 border border-green-500/20 rounded-xl",children:[e.jsx("span",{className:"text-green-400",children:"âœ“"}),e.jsx("span",{className:"text-sm text-green-300",children:"å·²è®¾ç½®å®šä½ï¼Œå·¥åŠå°†æ˜¾ç¤ºåœ¨é¦–é¡µåœ°å›¾ä¸Š"})]})]})]}),"description"===C&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"p-6 bg-white/[0.02] border border-white/[0.06] rounded-2xl space-y-5",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx("span",{children:"ğŸ“–"})," è¯¦ç»†ä»‹ç»"]}),e.jsx("p",{className:"text-sm text-white/50 mt-1",children:"ä½¿ç”¨å¯Œæ–‡æœ¬ç¼–è¾‘å™¨ç¼–è¾‘å·¥åŠçš„è¯¦ç»†ä»‹ç»ï¼Œæ”¯æŒå›¾æ–‡æ··æ’"})]})}),e.jsx(b,{value:B.descriptionHtml,onChange:e=>z(t=>({...t,descriptionHtml:e})),placeholder:"åœ¨è¿™é‡Œç¼–è¾‘æ‚¨çš„å·¥åŠè¯¦ç»†ä»‹ç»...\n\nå¯ä»¥æ·»åŠ ï¼š\nâ€¢ å·¥åŠå†å²å’Œæ•…äº‹\nâ€¢ åˆ¶ä½œå·¥è‰ºä»‹ç»\nâ€¢ å›¢é˜Ÿå¨ƒå¨ƒä»‹ç»\nâ€¢ ä½œå“é£æ ¼è¯´æ˜\nâ€¢ å®šåˆ¶æµç¨‹è¯´æ˜",maxLength:5e4}),e.jsx("div",{className:"p-4 bg-amber-500/10 border border-amber-500/20 rounded-xl",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-amber-400 text-lg",children:"ğŸ’¡"}),e.jsxs("div",{className:"text-sm text-amber-200/80",children:[e.jsx("p",{className:"font-medium mb-1",children:"ç¼–è¾‘æç¤º"}),e.jsxs("ul",{className:"space-y-1 text-amber-200/60",children:[e.jsx("li",{children:"â€¢ æ”¯æŒç²—ä½“ã€æ–œä½“ã€æ ‡é¢˜ã€åˆ—è¡¨ç­‰æ ¼å¼"}),e.jsx("li",{children:"â€¢ å¯ä»¥æ’å…¥å›¾ç‰‡é“¾æ¥å±•ç¤ºä½œå“"}),e.jsx("li",{children:'â€¢ å†…å®¹ä¼šåœ¨å·¥åŠè¯¦æƒ…é¡µçš„"ä»‹ç»"æ ‡ç­¾ä¸­å±•ç¤º'}),e.jsx("li",{children:"â€¢ ç³»ç»Ÿä¼šè‡ªåŠ¨è¿‡æ»¤ä¸å®‰å…¨çš„å†…å®¹"})]})]})]})})]})}),"media"===C&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"p-6 bg-white/[0.02] border border-white/[0.06] rounded-2xl space-y-6",children:[e.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx("span",{children:"ğŸ–¼ï¸"})," å›¾ç‰‡ç®¡ç†"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-3",children:"å·¥åŠLogo"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-24 h-24 rounded-2xl bg-white/5 overflow-hidden flex items-center justify-center",children:B.logo?e.jsx("img",{src:n(B.logo),alt:"Logo",className:"w-full h-full object-cover"}):e.jsx("span",{className:"text-3xl",children:"ğŸª"})}),e.jsxs("div",{children:[e.jsx("button",{onClick:()=>{var e;return null==(e=te.current)?void 0:e.click()},className:"px-4 py-2 bg-purple-500/20 text-purple-300 rounded-xl hover:bg-purple-500/30",children:"ä¸Šä¼ Logo"}),e.jsx("p",{className:"text-xs text-white/40 mt-2",children:"å»ºè®® 400x400 åƒç´ "})]}),e.jsx("input",{ref:te,type:"file",accept:"image/*",onChange:async e=>{var t;const l=null==(t=e.target.files)?void 0:t[0];if(!l)return;const s=await be(l);s&&z(e=>({...e,logo:s}))},className:"hidden"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-3",children:"å°é¢å›¾"}),e.jsxs("div",{className:"relative aspect-[3/1] rounded-2xl bg-white/5 overflow-hidden",children:[B.coverImage?e.jsx("img",{src:n(B.coverImage),alt:"Cover",className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-white/30",children:e.jsx("span",{children:"ç‚¹å‡»ä¸Šä¼ å°é¢å›¾"})}),e.jsx("button",{onClick:()=>{var e;return null==(e=le.current)?void 0:e.click()},className:"absolute inset-0 bg-black/50 opacity-0 hover:opacity-100 transition flex items-center justify-center",children:e.jsx("span",{className:"px-4 py-2 bg-white/20 rounded-xl",children:"æ›´æ¢å°é¢"})})]}),e.jsx("input",{ref:le,type:"file",accept:"image/*",onChange:async e=>{var t;const l=null==(t=e.target.files)?void 0:t[0];if(!l)return;const s=await be(l);s&&z(e=>({...e,coverImage:s}))},className:"hidden"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-3",children:"ä½œå“å±•ç¤ºå›¾ï¼ˆæœ€å¤š20å¼ ï¼‰"}),e.jsxs("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-3",children:[B.gallery.map((t,l)=>e.jsxs("div",{className:"relative aspect-square rounded-xl overflow-hidden bg-white/5 group",children:[e.jsx("img",{src:n(t),alt:"",className:"w-full h-full object-cover"}),e.jsx("button",{onClick:()=>{return e=l,z(t=>({...t,gallery:t.gallery.filter((t,l)=>l!==e)}));var e},className:"absolute top-2 right-2 w-6 h-6 bg-red-500 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition",children:"Ã—"})]},l)),B.gallery.length<20&&e.jsxs("button",{onClick:()=>{var e;return null==(e=se.current)?void 0:e.click()},className:"aspect-square border-2 border-dashed border-white/10 rounded-xl flex flex-col items-center justify-center text-white/30 hover:border-purple-500/50 hover:text-purple-400 transition",children:[e.jsx("span",{className:"text-2xl",children:"+"}),e.jsx("span",{className:"text-xs",children:"æ·»åŠ "})]})]}),e.jsx("input",{ref:se,type:"file",accept:"image/*",multiple:!0,onChange:async e=>{const t=Array.from(e.target.files||[]);for(const l of t){if(B.gallery.length>=20)break;const e=await be(l);e&&z(t=>({...t,gallery:[...t.gallery,e]}))}},className:"hidden"})]})]})}),"contact"===C&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"p-6 bg-white/[0.02] border border-white/[0.06] rounded-2xl space-y-5",children:[e.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx("span",{children:"ğŸ“"})," è”ç³»æ–¹å¼"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-2",children:"ğŸŒ å®˜ç½‘"}),e.jsx("input",{type:"url",value:B.website,onChange:e=>z(t=>({...t,website:e.target.value})),className:"w-full px-4 py-3 bg-white/[0.03] border border-white/[0.08] rounded-xl text-white outline-none focus:border-purple-500/50",placeholder:"https://..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-2",children:"ğŸ›’ æ·˜å®å·¥åŠ"}),e.jsx("input",{type:"url",value:B.taobao,onChange:e=>z(t=>({...t,taobao:e.target.value})),className:"w-full px-4 py-3 bg-white/[0.03] border border-white/[0.08] rounded-xl text-white outline-none focus:border-purple-500/50",placeholder:"æ·˜å®å·¥åŠé“¾æ¥"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-2",children:"ğŸŸ é—²é±¼"}),e.jsx("input",{type:"url",value:B.xianyu,onChange:e=>z(t=>({...t,xianyu:e.target.value})),className:"w-full px-4 py-3 bg-white/[0.03] border border-white/[0.08] rounded-xl text-white outline-none focus:border-purple-500/50",placeholder:"é—²é±¼ä¸»é¡µé“¾æ¥"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-2",children:"ğ• Twitter"}),e.jsx("input",{type:"text",value:B.twitter,onChange:e=>z(t=>({...t,twitter:e.target.value})),className:"w-full px-4 py-3 bg-white/[0.03] border border-white/[0.08] rounded-xl text-white outline-none focus:border-purple-500/50",placeholder:"@username"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-2",children:"ğŸ“± å¾®åš"}),e.jsx("input",{type:"url",value:B.weibo,onChange:e=>z(t=>({...t,weibo:e.target.value})),className:"w-full px-4 py-3 bg-white/[0.03] border border-white/[0.08] rounded-xl text-white outline-none focus:border-purple-500/50",placeholder:"å¾®åšä¸»é¡µé“¾æ¥"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-2",children:"ğŸ’¬ QQ"}),e.jsx("input",{type:"text",value:B.qq,onChange:e=>z(t=>({...t,qq:e.target.value})),className:"w-full px-4 py-3 bg-white/[0.03] border border-white/[0.08] rounded-xl text-white outline-none focus:border-purple-500/50",placeholder:"QQå·"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-2",children:"ğŸ’š å¾®ä¿¡"}),e.jsx("input",{type:"text",value:B.wechat,onChange:e=>z(t=>({...t,wechat:e.target.value})),className:"w-full px-4 py-3 bg-white/[0.03] border border-white/[0.08] rounded-xl text-white outline-none focus:border-purple-500/50",placeholder:"å¾®ä¿¡å·"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-2",children:"ğŸ“§ é‚®ç®±"}),e.jsx("input",{type:"email",value:B.email,onChange:e=>z(t=>({...t,email:e.target.value})),className:"w-full px-4 py-3 bg-white/[0.03] border border-white/[0.08] rounded-xl text-white outline-none focus:border-purple-500/50",placeholder:"contact@example.com"})]})]})]})}),"categories"===C&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"p-6 bg-white/[0.02] border border-white/[0.06] rounded-2xl space-y-5",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx("span",{children:"ğŸ“‚"})," ä½œå“åˆ†ç±»"]}),e.jsx("button",{onClick:()=>{X(null),K({name:"",nameEn:"",description:"",sortOrder:0}),R(!0)},className:"px-4 py-2 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl text-sm font-medium",children:"+ æ–°å»ºåˆ†ç±»"})]}),e.jsx("p",{className:"text-sm text-white/50",children:"åˆ›å»ºåˆ†ç±»æ¥ç»„ç»‡æ‚¨çš„ä½œå“ï¼Œæ–¹ä¾¿å®¢æˆ·æµè§ˆ"}),0===pe.length?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-4xl mb-4",children:"ğŸ“‚"}),e.jsx("p",{className:"text-white/50",children:"æš‚æ— åˆ†ç±»ï¼Œç‚¹å‡»ä¸Šæ–¹æŒ‰é’®åˆ›å»º"})]}):e.jsx("div",{className:"space-y-3",children:pe.map(t=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-white/[0.03] rounded-xl border border-white/[0.06] hover:border-purple-500/30 transition",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-purple-500/20 flex items-center justify-center text-xl",children:"ğŸ“"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:t.name}),e.jsxs("div",{className:"text-sm text-white/50",children:[t.productCount||0," ä¸ªä½œå“"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>(e=>{X(e),K({name:e.name,nameEn:e.nameEn||"",description:e.description||"",sortOrder:e.sortOrder}),R(!0)})(t),className:"px-3 py-1.5 text-sm text-white/60 hover:text-white hover:bg-white/10 rounded-lg transition",children:"ç¼–è¾‘"}),e.jsx("button",{onClick:()=>(async e=>{var t,l;if(confirm("ç¡®å®šåˆ é™¤æ­¤åˆ†ç±»ï¼Ÿ"))try{await d.delete("/my/categories/".concat(e)),xe(),L("åˆ†ç±»å·²åˆ é™¤")}catch(s){S((null==(l=null==(t=s.response)?void 0:t.data)?void 0:l.error)||"åˆ é™¤å¤±è´¥")}})(t.id),className:"px-3 py-1.5 text-sm text-red-400 hover:text-red-300 hover:bg-red-500/10 rounded-lg transition",children:"åˆ é™¤"})]})]},t.id))})]})}),"products"===C&&e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"p-6 bg-white/[0.02] border border-white/[0.06] rounded-2xl space-y-5",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx("span",{children:"ğŸ¨"})," ä½œå“ç®¡ç†"]}),e.jsx("button",{onClick:()=>{_(null),G({name:"",nameEn:"",description:"",coverImage:"",price:"",priceNote:"",leadTime:"",categoryId:"",isFeatured:!1,isNew:!0,sortOrder:0,tags:[],images:[]}),P(!0)},className:"px-4 py-2 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl text-sm font-medium",children:"+ æ·»åŠ ä½œå“"})]}),e.jsx("p",{className:"text-sm text-white/50",children:"å±•ç¤ºæ‚¨çš„ä½œå“ï¼Œå¸å¼•æ›´å¤šå®¢æˆ·"}),0===ue.length?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-4xl mb-4",children:"ğŸ¨"}),e.jsx("p",{className:"text-white/50",children:"æš‚æ— ä½œå“ï¼Œç‚¹å‡»ä¸Šæ–¹æŒ‰é’®æ·»åŠ "})]}):e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:ue.map(t=>e.jsxs("div",{className:"bg-white/[0.03] rounded-xl border border-white/[0.06] overflow-hidden hover:border-purple-500/30 transition group",children:[e.jsxs("div",{className:"aspect-square bg-white/5 relative",children:[t.coverImage?e.jsx("img",{src:n(t.coverImage),alt:t.name,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-4xl",children:"ğŸ­"}),t.isNew&&e.jsx("span",{className:"absolute top-2 left-2 px-2 py-0.5 bg-green-500 text-xs rounded-full",children:"NEW"}),t.isFeatured&&e.jsx("span",{className:"absolute top-2 right-2 px-2 py-0.5 bg-yellow-500 text-xs rounded-full",children:"ç²¾é€‰"})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"font-medium truncate",children:t.name}),e.jsx("div",{className:"text-sm text-white/50 mt-1",children:t.categoryName||"æœªåˆ†ç±»"}),t.price&&e.jsxs("div",{className:"text-purple-400 font-medium mt-2",children:["Â¥",t.price.toLocaleString()]}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsx("button",{onClick:()=>(e=>{var t;_(e),G({name:e.name,nameEn:e.nameEn||"",description:e.description||"",coverImage:e.coverImage||"",price:(null==(t=e.price)?void 0:t.toString())||"",priceNote:e.priceNote||"",leadTime:e.leadTime||"",categoryId:e.categoryId||"",isFeatured:e.isFeatured,isNew:e.isNew,sortOrder:e.sortOrder,tags:e.tags||[],images:e.images||[]}),V(""),P(!0)})(t),className:"flex-1 py-2 text-sm text-center bg-white/10 hover:bg-white/20 rounded-lg transition",children:"ç¼–è¾‘"}),e.jsx("button",{onClick:()=>(async e=>{var t,l;if(confirm("ç¡®å®šåˆ é™¤æ­¤ä½œå“ï¼Ÿ"))try{await d.delete("/my/products/".concat(e)),he(),L("ä½œå“å·²åˆ é™¤")}catch(s){S((null==(l=null==(t=s.response)?void 0:t.data)?void 0:l.error)||"åˆ é™¤å¤±è´¥")}})(t.id),className:"px-3 py-2 text-sm text-red-400 hover:bg-red-500/10 rounded-lg transition",children:"åˆ é™¤"})]})]})]},t.id))})]})})]})]})}),e.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 z-40 bg-[#0a0a0f]/95 backdrop-blur-xl border-t border-white/[0.06]",children:e.jsx("div",{className:"flex overflow-x-auto scrollbar-hide",children:je.map(t=>e.jsxs("button",{onClick:()=>M(t.id),className:"flex-1 min-w-[60px] flex flex-col items-center gap-1 py-3 px-2 transition-all ".concat(C===t.id?"text-purple-400":"text-white/40"),children:[e.jsx("span",{className:"text-lg",children:t.icon}),e.jsx("span",{className:"text-[10px] font-medium truncate",children:t.label.slice(0,4)})]},t.id))})}),(q||E)&&e.jsx("div",{className:"fixed top-20 left-4 right-4 max-w-md mx-auto p-4 rounded-2xl shadow-2xl z-50 ".concat(q?"bg-red-500/20 border border-red-500/30 text-red-300":"bg-green-500/20 border border-green-500/30 text-green-300"),children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm",children:q||E}),e.jsx("button",{onClick:()=>{S(""),L("")},className:"ml-auto text-white/50 hover:text-white",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),H&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>R(!1),children:e.jsxs("div",{className:"bg-[#12141a] border border-white/10 rounded-2xl w-full max-w-md p-6 space-y-5",onClick:e=>e.stopPropagation(),children:[e.jsx("h3",{className:"text-lg font-semibold",children:W?"ç¼–è¾‘åˆ†ç±»":"æ–°å»ºåˆ†ç±»"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-2",children:"åˆ†ç±»åç§° *"}),e.jsx("input",{type:"text",value:D.name,onChange:e=>K(t=>({...t,name:e.target.value})),className:"w-full px-4 py-3 bg-white/[0.03] border border-white/[0.08] rounded-xl text-white outline-none focus:border-purple-500/50",placeholder:"å¦‚ï¼šåŸåˆ›è§’è‰²"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-2",children:"è‹±æ–‡åç§°"}),e.jsx("input",{type:"text",value:D.nameEn,onChange:e=>K(t=>({...t,nameEn:e.target.value})),className:"w-full px-4 py-3 bg-white/[0.03] border border-white/[0.08] rounded-xl text-white outline-none focus:border-purple-500/50",placeholder:"Original Characters"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-2",children:"æè¿°"}),e.jsx("textarea",{value:D.description,onChange:e=>K(t=>({...t,description:e.target.value})),rows:2,className:"w-full px-4 py-3 bg-white/[0.03] border border-white/[0.08] rounded-xl text-white outline-none focus:border-purple-500/50 resize-none",placeholder:"åˆ†ç±»æè¿°..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-2",children:"æ’åº"}),e.jsx("input",{type:"number",value:D.sortOrder,onChange:e=>K(t=>({...t,sortOrder:parseInt(e.target.value)||0})),className:"w-full px-4 py-3 bg-white/[0.03] border border-white/[0.08] rounded-xl text-white outline-none focus:border-purple-500/50",placeholder:"0"})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{onClick:()=>R(!1),className:"flex-1 py-3 bg-white/10 hover:bg-white/20 rounded-xl transition",children:"å–æ¶ˆ"}),e.jsx("button",{onClick:async()=>{var e,t,l;try{W?await d.put("/my/categories/".concat(W.id),D):await d.post("/my/shops/".concat(null==(e=null==oe?void 0:oe.shop)?void 0:e.id,"/categories"),D),xe(),R(!1),X(null),K({name:"",nameEn:"",description:"",sortOrder:0}),L("åˆ†ç±»ä¿å­˜æˆåŠŸ")}catch(s){S((null==(l=null==(t=s.response)?void 0:t.data)?void 0:l.error)||"ä¿å­˜å¤±è´¥")}},className:"flex-1 py-3 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl font-medium",children:"ä¿å­˜"})]})]})}),Q&&e.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm z-50 flex items-center justify-center p-4",onClick:()=>P(!1),children:e.jsxs("div",{className:"bg-[#12141a] border border-white/10 rounded-2xl w-full max-w-lg max-h-[90vh] overflow-y-auto p-6 space-y-5",onClick:e=>e.stopPropagation(),children:[e.jsx("h3",{className:"text-lg font-semibold",children:A?"ç¼–è¾‘ä½œå“":"æ·»åŠ ä½œå“"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm text-white/60 mb-2",children:"ä½œå“åç§° *"}),e.jsx("input",{type:"text",value:U.name,onChange:e=>G(t=>({...t,name:e.target.value})),className:"w-full px-4 py-3 bg-white/[0.03] border border-white/[0.08] rounded-xl text-white outline-none focus:border-purple-500/50",placeholder:"ä½œå“åç§°"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm text-white/60 mb-2",children:"æ‰€å±åˆ†ç±»"}),e.jsx(m,{value:U.categoryId,onChange:e=>G(t=>({...t,categoryId:e})),options:[{value:"",label:"æœªåˆ†ç±»"},...pe.map(e=>({value:e.id,label:e.name}))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-2",children:"ä»·æ ¼"}),e.jsx("input",{type:"number",value:U.price,onChange:e=>G(t=>({...t,price:e.target.value})),className:"w-full px-4 py-3 bg-white/[0.03] border border-white/[0.08] rounded-xl text-white outline-none focus:border-purple-500/50",placeholder:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-white/60 mb-2",children:"å·¥æœŸ"}),e.jsx("input",{type:"text",value:U.leadTime,onChange:e=>G(t=>({...t,leadTime:e.target.value})),className:"w-full px-4 py-3 bg-white/[0.03] border border-white/[0.08] rounded-xl text-white outline-none focus:border-purple-500/50",placeholder:"å¦‚ï¼š30-60å¤©"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm text-white/60 mb-2",children:"æè¿°"}),e.jsx("textarea",{value:U.description,onChange:e=>G(t=>({...t,description:e.target.value})),rows:3,className:"w-full px-4 py-3 bg-white/[0.03] border border-white/[0.08] rounded-xl text-white outline-none focus:border-purple-500/50 resize-none",placeholder:"ä½œå“æè¿°..."})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm text-white/60 mb-2",children:"å¤´å£³å°é¢å›¾"}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-32 h-32 rounded-xl bg-white/5 overflow-hidden flex items-center justify-center border border-white/[0.08] flex-shrink-0",children:U.coverImage?e.jsx("img",{src:n(U.coverImage),alt:"å°é¢",className:"w-full h-full object-cover"}):e.jsx("span",{className:"text-4xl",children:"ğŸ­"})}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("button",{type:"button",onClick:()=>{var e;return null==(e=re.current)?void 0:e.click()},disabled:Y,className:"px-4 py-2 bg-purple-500/20 text-purple-300 rounded-xl hover:bg-purple-500/30 disabled:opacity-50 transition",children:Y?"ä¸Šä¼ ä¸­...":"ä¸Šä¼ å°é¢"}),U.coverImage&&e.jsx("button",{type:"button",onClick:()=>G(e=>({...e,coverImage:""})),className:"ml-2 px-3 py-2 text-sm text-red-400 hover:bg-red-500/10 rounded-lg transition",children:"ç§»é™¤"}),e.jsx("p",{className:"text-xs text-white/40",children:"å°é¢å›¾å»ºè®® 800x800 åƒç´ "})]})]}),e.jsx("input",{ref:re,type:"file",accept:"image/*",onChange:async e=>{var t,l;const s=null==(t=e.target.files)?void 0:t[0];if(!s)return;const r=o(s);if(r)S(r);else if(null==(l=null==oe?void 0:oe.shop)?void 0:l.id){Z(!0);try{const e=await c(s,oe.shop.id);G(t=>({...t,coverImage:e}))}catch(a){S(a.message||"å›¾ç‰‡ä¸Šä¼ å¤±è´¥")}finally{Z(!1)}}else S("å·¥åŠä¿¡æ¯æœªåŠ è½½")},className:"hidden"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm text-white/60 mb-2",children:"ä½œå“å›¾åº“ï¼ˆæœ€å¤š10å¼ ï¼‰"}),e.jsxs("div",{className:"grid grid-cols-4 gap-2 mb-3",children:[U.images.map((t,l)=>e.jsxs("div",{className:"relative aspect-square rounded-lg overflow-hidden bg-white/5 group",children:[e.jsx("img",{src:n(t),alt:"",className:"w-full h-full object-cover"}),e.jsx("button",{type:"button",onClick:()=>{return e=l,void G(t=>({...t,images:t.images.filter((t,l)=>l!==e)}));var e},className:"absolute top-1 right-1 w-5 h-5 bg-red-500/80 rounded-full flex items-center justify-center opacity-0 group-hover:opacity-100 transition text-xs",children:"Ã—"})]},l)),U.images.length<10&&e.jsx("button",{type:"button",onClick:()=>{var e;return null==(e=ae.current)?void 0:e.click()},disabled:$,className:"aspect-square border-2 border-dashed border-white/10 rounded-lg flex flex-col items-center justify-center text-white/30 hover:border-purple-500/50 hover:text-purple-400 transition disabled:opacity-50",children:$?e.jsx("div",{className:"w-5 h-5 border-2 border-purple-500 border-t-transparent rounded-full animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-xl",children:"+"}),e.jsx("span",{className:"text-[10px]",children:"æ·»åŠ "})]})})]}),e.jsx("p",{className:"text-xs text-white/30",children:"å¯ä¸Šä¼ å¤šå¼ ä½œå“å±•ç¤ºå›¾ï¼Œåœ¨è¯¦æƒ…é¡µå±•ç¤º"}),e.jsx("input",{ref:ae,type:"file",accept:"image/*",multiple:!0,onChange:async e=>{var t;const l=Array.from(e.target.files||[]);if(0!==l.length)if(null==(t=null==oe?void 0:oe.shop)?void 0:t.id){for(const e of l){const t=o(e);if(t)return void S(t)}ee(!0);try{for(const e of l){if(U.images.length>=10)break;const t=await c(e,oe.shop.id);G(e=>({...e,images:[...e.images,t]}))}}catch(s){S(s.message||"å›¾ç‰‡ä¸Šä¼ å¤±è´¥")}finally{ee(!1),e.target&&(e.target.value="")}}else S("å·¥åŠä¿¡æ¯æœªåŠ è½½")},className:"hidden"})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:U.isNew,onChange:e=>G(t=>({...t,isNew:e.target.checked})),className:"w-4 h-4 rounded"}),e.jsx("span",{className:"text-sm",children:"æ–°å“"})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:U.isFeatured,onChange:e=>G(t=>({...t,isFeatured:e.target.checked})),className:"w-4 h-4 rounded"}),e.jsx("span",{className:"text-sm",children:"ç²¾é€‰"})]})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm text-white/60 mb-2",children:"ä½œå“æ ‡ç­¾ï¼ˆæœ€å¤š5ä¸ªï¼‰"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:U.tags.map(t=>e.jsxs("span",{className:"px-3 py-1 bg-purple-500/20 text-purple-300 rounded-full text-sm flex items-center gap-1",children:[t,e.jsx("button",{type:"button",onClick:()=>(e=>{G(t=>({...t,tags:t.tags.filter(t=>t!==e)}))})(t),className:"hover:text-white ml-1",children:"Ã—"})]},t))}),U.tags.length<5&&e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:J,onChange:e=>V(e.target.value),onKeyDown:e=>"Enter"===e.key&&(e.preventDefault(),ve()),className:"flex-1 px-4 py-2 bg-white/[0.03] border border-white/[0.08] rounded-xl text-white outline-none focus:border-purple-500/50",placeholder:"è¾“å…¥æ ‡ç­¾ï¼Œå¦‚ï¼šåŸåˆ›ã€äºŒåˆ›ã€åŠ¨æ¼«..."}),e.jsx("button",{type:"button",onClick:ve,className:"px-4 py-2 bg-purple-500/20 text-purple-300 rounded-xl hover:bg-purple-500/30",children:"æ·»åŠ "})]}),e.jsx("p",{className:"text-xs text-white/30 mt-1",children:"æ ‡ç­¾å¯å¸®åŠ©ç”¨æˆ·æ›´å¥½åœ°äº†è§£ä½œå“ç‰¹ç‚¹"})]})]}),e.jsxs("div",{className:"flex gap-3 pt-2",children:[e.jsx("button",{onClick:()=>P(!1),className:"flex-1 py-3 bg-white/10 hover:bg-white/20 rounded-xl transition",children:"å–æ¶ˆ"}),e.jsx("button",{onClick:async()=>{var e,t,l;try{const t={...U,price:U.price?parseInt(U.price):null,categoryId:U.categoryId||null,tags:U.tags,images:U.images};A?await d.put("/my/products/".concat(A.id),t):await d.post("/my/shops/".concat(null==(e=null==oe?void 0:oe.shop)?void 0:e.id,"/products"),t),he(),P(!1),_(null),G({name:"",nameEn:"",description:"",coverImage:"",price:"",priceNote:"",leadTime:"",categoryId:"",isFeatured:!1,isNew:!0,sortOrder:0,tags:[],images:[]}),V(""),L("ä½œå“ä¿å­˜æˆåŠŸ")}catch(s){S((null==(l=null==(t=s.response)?void 0:t.data)?void 0:l.error)||"ä¿å­˜å¤±è´¥")}},className:"flex-1 py-3 bg-gradient-to-r from-purple-500 to-pink-500 rounded-xl font-medium",children:"ä¿å­˜"})]})]})})]})}export{g as default};
