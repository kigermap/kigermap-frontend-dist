!function(){function e(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var r,n,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.toStringTag||"@@toStringTag";function l(e,a,o,i){var l=a&&a.prototype instanceof s?a:s,u=Object.create(l.prototype);return t(u,"_invoke",function(e,t,a){var o,i,l,s=0,u=a||[],d=!1,f={p:0,n:0,v:r,a:m,f:m.bind(r,4),d:function(e,t){return o=e,i=0,l=r,f.n=t,c}};function m(e,t){for(i=e,l=t,n=0;!d&&s&&!a&&n<u.length;n++){var a,o=u[n],m=f.p,h=o[2];e>3?(a=h===t)&&(l=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=r):o[0]<=m&&((a=e<2&&m<o[1])?(i=0,f.v=t,f.n=o[1]):m<h&&(a=e<3||o[0]>t||t>h)&&(o[4]=e,o[5]=t,f.n=h,i=0))}if(a||e>1)return c;throw d=!0,t}return function(a,u,h){if(s>1)throw TypeError("Generator is already running");for(d&&1===u&&m(u,h),i=u,l=h;(n=i<2?r:l)||!d;){o||(i?i<3?(i>1&&(f.n=-1),m(i,l)):f.n=l:f.v=l);try{if(s=2,o){if(i||(a="next"),n=o[a]){if(!(n=n.call(o,l)))throw TypeError("iterator result is not an object");if(!n.done)return n;l=n.value,i<2&&(i=0)}else 1===i&&(n=o.return)&&n.call(o),i<2&&(l=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=r}else if((n=(d=f.n<0)?l:e.call(t,f))!==c)break}catch(n){o=r,i=1,l=n}finally{s=1}}return{value:n,done:d}}}(e,o,i),!0),u}var c={};function s(){}function u(){}function d(){}n=Object.getPrototypeOf;var f=[][o]?n(n([][o]())):(t(n={},o,function(){return this}),n),m=d.prototype=s.prototype=Object.create(f);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,t(e,i,"GeneratorFunction")),e.prototype=Object.create(m),e}return u.prototype=d,t(m,"constructor",d),t(d,"constructor",u),u.displayName="GeneratorFunction",t(d,i,"GeneratorFunction"),t(m),t(m,i,"Generator"),t(m,o,function(){return this}),t(m,"toString",function(){return"[object Generator]"}),(e=function(){return{w:l,m:h}})()}function t(e,r,n,a){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}t=function(e,r,n,a){function i(r,n){t(e,r,function(e){return this._invoke(r,n,e)})}r?o?o(e,r,{value:n,enumerable:!a,configurable:!a,writable:!a}):e[r]=n:(i("next",0),i("throw",1),i("return",2))},t(e,r,n,a)}function r(e,t,r,n,a,o,i){try{var l=e[o](i),c=l.value}catch(e){return void r(e)}l.done?t(c):Promise.resolve(c).then(n,a)}function n(e){return function(){var t=this,n=arguments;return new Promise(function(a,o){var i=e.apply(t,n);function l(e){r(i,a,o,l,c,"next",e)}function c(e){r(i,a,o,l,c,"throw",e)}l(void 0)})}}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,l=[],c=!0,s=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(e){s=!0,a=e}finally{try{if(!c&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(s)throw a}}return l}}(e,t)||function(e,t){if(e){if("string"==typeof e)return o(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}System.register(["./query-legacy-CLxXWLnl.js","./sentry-legacy-CTr2CudU.js","./index-legacy-DVoFAd51.js","./AliyunCaptcha-legacy-DY0FTlyp.js","./router-legacy-9xrJEksD.js","./store-legacy-Bt3CCSnU.js"],function(t,r){"use strict";var o,i,l,c,s,u,d,f,m;return{setters:[function(e){o=e.j},function(e){i=e.a},function(e){l=e.a,c=e.u,s=e.L,u=e.l},function(e){d=e.A},function(e){f=e.a,m=e.L},null],execute:function(){t("default",function(){var t=f(),r=l().t,h=c(),p=h.sendCode,x=h.resetPassword,v=h.isLoading,b=h.error,g=h.clearError,y=a(i.useState(""),2),w=y[0],j=y[1],N=a(i.useState(""),2),S=N[0],T=N[1],k=a(i.useState(""),2),I=k[0],O=k[1],C=a(i.useState(""),2),P=C[0],L=C[1],A=a(i.useState(""),2),E=A[0],G=A[1],R=a(i.useState(0),2),_=R[0],q=R[1],M=a(i.useState(0),2),W=M[0],F=M[1],z=a(i.useState(""),2),D=z[0],V=z[1],H=i.useRef(null),U=i.useRef(null);i.useEffect(function(){return _>0&&!H.current&&(H.current=setInterval(function(){q(function(e){return e<=1?(H.current&&(clearInterval(H.current),H.current=null),0):e-1})},1e3)),function(){H.current&&0===_&&(clearInterval(H.current),H.current=null)}},[_>0]),i.useEffect(function(){return W>0&&!U.current&&(U.current=setInterval(function(){F(function(e){return e<=1?(U.current&&(clearInterval(U.current),U.current=null),0):e-1})},1e3)),function(){U.current&&0===W&&(clearInterval(U.current),U.current=null)}},[W>0]),i.useEffect(function(){return function(){H.current&&clearInterval(H.current),U.current&&clearInterval(U.current)}},[]);var $=function(){var t=n(e().m(function t(n){var a,o,i;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:if(w&&!(_>0)){e.n=1;break}return e.a(2,{captchaVerifyResult:!0,bizResult:!1});case 1:return g(),G(""),e.p=2,e.n=3,p(w,n,"reset");case 3:return H.current&&(clearInterval(H.current),H.current=null),U.current&&(clearInterval(U.current),U.current=null),q(60),F(600),V(r("auth.codeSent")),setTimeout(function(){return V("")},3e3),e.a(2,{captchaVerifyResult:!0,bizResult:!0});case 4:throw e.p=4,i=e.v,(o=null==i||null===(a=i.response)||void 0===a||null===(a=a.data)||void 0===a?void 0:a.retryAfter)&&o>0&&(H.current&&(clearInterval(H.current),H.current=null),q(Math.min(o,600))),i;case 5:return e.a(2)}},t,null,[[2,4]])}));return function(e){return t.apply(this,arguments)}}(),B=function(){var a=n(e().m(function n(a){return e().w(function(e){for(;;)switch(e.p=e.n){case 0:if(a.preventDefault(),g(),G(""),V(""),I===P){e.n=1;break}return G(r("resetPassword.error.passwordMismatch")),e.a(2);case 1:return e.p=1,e.n=2,x(w,I,S);case 2:V(r("resetPassword.success")),setTimeout(function(){t("/login")},2e3),e.n=4;break;case 3:e.p=3,e.v;case 4:return e.a(2)}},n,null,[[1,3]])}));return function(e){return a.apply(this,arguments)}}();return o.jsxs("div",{className:"min-h-screen flex items-center justify-center p-4 relative",children:[o.jsx("div",{className:"bg-animated"}),o.jsxs("div",{className:"glass-dark rounded-3xl p-8 w-full max-w-md",children:[o.jsx("div",{className:"flex justify-end mb-4",children:o.jsx(s,{})}),o.jsxs("div",{className:"text-center mb-8",children:[o.jsxs("div",{className:"inline-flex items-center gap-3 cursor-pointer select-none",onClick:function(e){e.currentTarget.classList.remove("animate-seesaw"),e.currentTarget.offsetWidth,e.currentTarget.classList.add("animate-seesaw"),setTimeout(function(){e.currentTarget.classList.remove("animate-seesaw")},600)},children:[o.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-primary to-secondary flex items-center justify-center",children:o.jsx("img",{src:u,alt:"Logo",className:"w-10 h-10"})}),o.jsx("span",{className:"text-2xl font-bold text-gradient",children:r("app.name")})]}),o.jsx("p",{className:"text-white/50 mt-2",children:r("resetPassword.title")})]}),o.jsxs("form",{onSubmit:B,className:"space-y-5",children:[(b||E)&&o.jsx("div",{className:"p-3 bg-red-500/20 border border-red-500/30 rounded-xl text-red-300 text-sm",children:b||E}),D&&o.jsx("div",{className:"p-3 bg-green-500/20 border border-green-500/30 rounded-xl text-green-300 text-sm",children:D}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:r("login.email")}),o.jsx("input",{type:"email",value:w,onChange:function(e){return j(e.target.value)},placeholder:r("login.email.placeholder"),required:!0,className:"w-full max-w-full px-4 py-3.5 input-modern rounded-xl text-white placeholder-white/30 outline-none box-border",style:{minWidth:0},disabled:_>0})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-sm font-medium text-white/80 mb-2",children:[r("login.verificationCode"),W>0&&o.jsxs("span",{className:"ml-2 text-xs text-primary",children:[r("login.verificationCode.expires")," ",Math.floor(W/60),":",(W%60).toString().padStart(2,"0")]})]}),o.jsxs("div",{className:"flex gap-3",children:[o.jsx("input",{type:"text",value:S,onChange:function(e){return T(e.target.value.replace(/\D/g,"").slice(0,6))},placeholder:r("login.verificationCode.placeholder"),required:!0,maxLength:6,className:"flex-1 min-w-0 px-4 py-3.5 input-modern rounded-xl text-white placeholder-white/30 outline-none box-border"}),o.jsx(d,{onSuccess:$,onError:function(e){return c.setState({error:e})},buttonText:v?r("login.sending"):_>0?_>=60?"".concat(Math.floor(_/60),":").concat((_%60).toString().padStart(2,"0")):"".concat(_,"s"):r("login.sendCode"),buttonClassName:"px-4 py-3.5 btn-gradient rounded-xl font-medium text-white transition whitespace-nowrap disabled:opacity-50 disabled:cursor-not-allowed",disabled:v||_>0||!w})]})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:r("login.password")}),o.jsx("input",{type:"password",value:I,onChange:function(e){return O(e.target.value)},placeholder:r("login.password.placeholder"),required:!0,minLength:6,className:"w-full max-w-full px-4 py-3.5 input-modern rounded-xl text-white placeholder-white/30 outline-none box-border",style:{minWidth:0}})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-sm font-medium text-white/80 mb-2",children:r("login.confirmPassword")}),o.jsx("input",{type:"password",value:P,onChange:function(e){return L(e.target.value)},placeholder:r("login.confirmPassword.placeholder"),required:!0,minLength:6,className:"w-full max-w-full px-4 py-3.5 input-modern rounded-xl text-white placeholder-white/30 outline-none box-border",style:{minWidth:0}})]}),o.jsx("button",{type:"submit",disabled:v||!S,className:"w-full py-3.5 btn-gradient rounded-xl font-medium text-white transition touch-target disabled:opacity-50",children:r(v?"login.submitting":"resetPassword.submit")})]}),o.jsx("div",{className:"mt-6 text-center",children:o.jsx(m,{to:"/login",className:"text-white/60 hover:text-white transition text-sm",children:r("login.switchToLogin")})}),o.jsx("div",{className:"mt-6 pt-6 border-t border-white/10 text-center",children:o.jsx(m,{to:"https://kighub.cn/",className:"text-white/50 hover:text-white transition text-sm",children:r("login.backHome")})})]})]})})}}})}();
