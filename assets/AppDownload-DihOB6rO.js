import{b as s,j as e}from"./query-DSsWWIdM.js";import{a}from"./sentry-DvvTOdwe.js";import{x as l,k as t,l as n,b as o}from"./index-D0yqgRjz.js";import{L as c}from"./router-jbVFofSC.js";import"./store-BXxpTH1V.js";const r=Object.assign({"/src/assets/app/screenshots/app1.webp":"https://cdn-frontend-static.kigermap.com/assets/app1-28-FLdNl.webp","/src/assets/app/screenshots/app2.webp":"https://cdn-frontend-static.kigermap.com/assets/app2-DAmTKvnI.webp","/src/assets/app/screenshots/app3.webp":"https://cdn-frontend-static.kigermap.com/assets/app3-CQ2VjwC3.webp","/src/assets/app/screenshots/app4.webp":"https://cdn-frontend-static.kigermap.com/assets/app4-BFIko3LO.webp","/src/assets/app/screenshots/app5.webp":"https://cdn-frontend-static.kigermap.com/assets/app5-DABqyBaf.webp","/src/assets/app/screenshots/app6.webp":"https://cdn-frontend-static.kigermap.com/assets/app6-CyS6wVst.webp"}),d=Object.values(r),i=["ðŸ—ºï¸","ðŸª","ðŸŽ­","âœ¨"];function p(){const{resolvedTheme:r}=l(),{t:p}=t(),h="light"===r,{data:m,isLoading:j}=s({queryKey:["users"],queryFn:()=>o.get("/users").then(s=>s.data),staleTime:12e4,gcTime:3e5,refetchOnMount:"always",refetchOnWindowFocus:!0}),{data:x}=s({queryKey:["stats"],queryFn:()=>o.get("/stats").then(s=>s.data),staleTime:12e4,gcTime:3e5,refetchOnMount:"always",enabled:!j}),{data:u}=s({queryKey:["shops-locations"],queryFn:()=>o.get("/shops/locations").then(s=>s.data),staleTime:6e5,enabled:!j}),{data:f}=s({queryKey:["latest-apk"],queryFn:async()=>{var s;const e=await fetch("https://gitee.com/api/v5/repos/kigermap/kigermap_app/releases/latest");if(!e.ok)throw new Error("Failed to fetch latest release");const a=null==(s=(await e.json()).assets)?void 0:s.find(s=>{var e;return null==(e=s.name)?void 0:e.endsWith(".apk")});if(!a||!a.browser_download_url)throw new Error("No APK found in latest release");return a.browser_download_url.replace(/^https?:\/\/(?:[^\/]+)/,"https://dl.kigermap.cn")},staleTime:3e5,gcTime:6e5}),N=(null==m?void 0:m.users)||[],w=(null==u?void 0:u.total)||0,b=N.length||600,g=w||21,v=(null==x?void 0:x.totalPhotos)||1982,D=a.useRef(null),[k,y]=a.useState(0),[T,M]=a.useState(!1),K=a.useRef(null),F=[p("appDownload.shot1"),p("appDownload.shot2"),p("appDownload.shot3"),p("appDownload.shot4"),p("appDownload.shot5"),p("appDownload.shot6")],q=i.map((s,e)=>({icon:s,title:p("appDownload.feature".concat(e+1,"Title")),desc:p("appDownload.feature".concat(e+1,"Desc"))}));a.useEffect(()=>(document.title=p("appDownload.pageTitle"),M(!0),()=>{document.title="KigerMap"}),[p]),a.useEffect(()=>{const s=setInterval(()=>y(s=>(s+1)%d.length),4e3);return()=>clearInterval(s)},[]),a.useEffect(()=>{if(!K.current)return;const s=K.current.children[k];if(!s)return;const e=K.current,a=s.offsetLeft-e.offsetWidth/2+s.offsetWidth/2;e.scrollTo({left:a,behavior:"smooth"})},[k]);const S=f||"https://dl.kigermap.cn/mobile/latest/android",C=e.jsxs("a",{href:S,target:"_blank",className:"dl-btn dl-btn-android",rel:"noopener noreferrer",children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"dl-btn-icon",children:e.jsx("path",{d:"M17.523 2.236a.5.5 0 0 0-.862.013L14.857 5.57a9.97 9.97 0 0 0-5.714 0L7.34 2.25a.5.5 0 0 0-.862-.013.5.5 0 0 0-.013.512l1.71 3.08A9.922 9.922 0 0 0 2 14h20a9.922 9.922 0 0 0-6.175-8.172l1.71-3.08a.5.5 0 0 0-.012-.512zM7 11.5a1 1 0 1 1 2 0 1 1 0 0 1-2 0zm8 0a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM2 16v4a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-4H2z"})}),e.jsxs("div",{className:"dl-btn-text",children:[e.jsx("span",{className:"dl-btn-label",children:p("appDownload.androidDownload")}),e.jsx("span",{className:"dl-btn-sub",children:p("appDownload.androidSub")})]})]}),A=e.jsxs("a",{href:"https://testflight.apple.com/join/gkpFN19D",target:"_blank",rel:"noopener noreferrer",className:"dl-btn dl-btn-ios",children:[e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:"dl-btn-icon",children:e.jsx("path",{d:"M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31.05-2.3-1.32-3.14-2.53C4.25 17 2.94 12.45 4.7 9.39c.87-1.52 2.43-2.48 4.12-2.51 1.28-.02 2.5.87 3.29.87.78 0 2.26-1.07 3.8-.91.65.03 2.47.26 3.64 1.98-.09.06-2.17 1.28-2.15 3.81.03 3.02 2.65 4.03 2.68 4.04-.03.07-.42 1.44-1.38 2.83M13 3.5c.73-.83 1.94-1.46 2.94-1.5.13 1.17-.34 2.35-1.04 3.19-.69.85-1.83 1.51-2.95 1.42-.15-1.15.41-2.35 1.05-3.11z"})}),e.jsxs("div",{className:"dl-btn-text",children:[e.jsx("span",{className:"dl-btn-label",children:"iOS TestFlight"}),e.jsx("span",{className:"dl-btn-sub",children:p("appDownload.iosSub")})]})]});return e.jsxs("div",{className:"app-download-page ".concat(h?"light":"dark"),children:[e.jsxs("nav",{className:"dl-nav",children:[e.jsxs(c,{to:"https://kighub.cn/",className:"dl-nav-logo",children:[e.jsx("img",{src:n,alt:"KigerMap",className:"dl-logo-img"}),e.jsx("span",{className:"dl-logo-text",children:"KigerMap"})]}),e.jsx(c,{to:"https://kighub.cn/",className:"dl-nav-back",children:p("appDownload.backHome")})]}),e.jsxs("section",{className:"dl-hero",ref:D,children:[e.jsx("div",{className:"dl-hero-glow"}),e.jsxs("div",{className:"dl-hero-content ".concat(T?"visible":""),children:[e.jsx("div",{className:"dl-hero-badge",children:"Kigurumi Map App"}),e.jsx("h1",{className:"dl-hero-title",children:p("appDownload.heroTitle")}),e.jsx("p",{className:"dl-hero-tagline",children:p("appDownload.heroTagline")}),e.jsxs("p",{className:"dl-hero-subtitle",children:[p("appDownload.heroSubtitle"),e.jsx("br",{}),p("appDownload.heroSubtitle2")]}),e.jsxs("div",{className:"dl-hero-buttons",children:[C,A]}),e.jsx("p",{className:"dl-hero-note",children:p("appDownload.heroNote")})]})]}),e.jsxs("section",{className:"dl-screenshots",children:[e.jsx("h2",{className:"dl-section-title",children:p("appDownload.screenshotsTitle")}),e.jsx("p",{className:"dl-section-desc",children:p("appDownload.screenshotsDesc")}),e.jsxs("div",{className:"dl-carousel-wrap",children:[e.jsx("div",{className:"dl-carousel",ref:K,children:d.map((s,a)=>e.jsx("div",{className:"dl-shot ".concat(a===k?"active":""),onClick:()=>y(a),children:e.jsx("img",{src:s,alt:F[a],loading:"lazy"})},a))}),e.jsx("div",{className:"dl-dots",children:d.map((s,a)=>e.jsx("button",{className:"dl-dot ".concat(a===k?"active":""),onClick:()=>y(a),"aria-label":p("appDownload.screenshotAria").replace("{n}",String(a+1))},a))})]})]}),e.jsxs("section",{className:"dl-features",children:[e.jsx("h2",{className:"dl-section-title",children:p("appDownload.featuresTitle")}),e.jsx("p",{className:"dl-section-desc",children:p("appDownload.featuresDesc")}),e.jsx("div",{className:"dl-features-grid",children:q.map((s,a)=>e.jsxs("div",{className:"dl-feature-card",children:[e.jsx("span",{className:"dl-feature-icon",children:s.icon}),e.jsx("h3",{className:"dl-feature-title",children:s.title}),e.jsx("p",{className:"dl-feature-desc",children:s.desc})]},a))})]}),e.jsx("section",{className:"dl-stats",children:e.jsxs("div",{className:"dl-stats-inner",children:[e.jsxs("div",{className:"dl-stat",children:[e.jsxs("span",{className:"dl-stat-num",children:[b,"+"]}),e.jsx("span",{className:"dl-stat-label",children:p("appDownload.statUsers")})]}),e.jsx("div",{className:"dl-stat-divider"}),e.jsxs("div",{className:"dl-stat",children:[e.jsxs("span",{className:"dl-stat-num",children:[g,"+"]}),e.jsx("span",{className:"dl-stat-label",children:p("appDownload.statShops")})]}),e.jsx("div",{className:"dl-stat-divider"}),e.jsxs("div",{className:"dl-stat",children:[e.jsxs("span",{className:"dl-stat-num",children:[v,"+"]}),e.jsx("span",{className:"dl-stat-label",children:p("appDownload.statImages")})]})]})}),e.jsxs("section",{className:"dl-cta",children:[e.jsx("div",{className:"dl-cta-glow"}),e.jsx("h2",{className:"dl-cta-title",children:p("appDownload.ctaTitle")}),e.jsx("p",{className:"dl-cta-desc",children:p("appDownload.ctaDesc")}),e.jsxs("div",{className:"dl-hero-buttons",style:{justifyContent:"center"},children:[C,A]}),e.jsx("p",{className:"dl-cta-store-note",children:p("appDownload.storeNote")})]}),e.jsx("footer",{className:"dl-footer",children:e.jsxs("div",{className:"dl-footer-inner",children:[e.jsxs(c,{to:"https://kighub.cn/",className:"dl-footer-logo",children:[e.jsx("img",{src:n,alt:"",className:"dl-logo-img"}),e.jsx("span",{children:"KigerMap"})]}),e.jsxs("div",{className:"dl-footer-links",children:[e.jsx(c,{to:"/about",children:p("appDownload.footerAbout")}),e.jsx(c,{to:"/privacy",children:p("appDownload.footerPrivacy")}),e.jsx(c,{to:"/terms",children:p("appDownload.footerTerms")}),e.jsx(c,{to:"/feedback",children:p("appDownload.footerFeedback")})]}),e.jsx("p",{className:"dl-footer-copy",children:"Â© 2025 KigerMap. All rights reserved."})]})})]})}export{p as default};
