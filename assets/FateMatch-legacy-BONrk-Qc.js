!function(){function e(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var a,r,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.toStringTag||"@@toStringTag";function s(e,n,o,i){var s=n&&n.prototype instanceof c?n:c,f=Object.create(s.prototype);return t(f,"_invoke",function(e,t,n){var o,i,s,c=0,f=n||[],d=!1,m={p:0,n:0,v:a,a:u,f:u.bind(a,4),d:function(e,t){return o=e,i=0,s=a,m.n=t,l}};function u(e,t){for(i=e,s=t,r=0;!d&&c&&!n&&r<f.length;r++){var n,o=f[r],u=m.p,p=o[2];e>3?(n=p===t)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=a):o[0]<=u&&((n=e<2&&u<o[1])?(i=0,m.v=t,m.n=o[1]):u<p&&(n=e<3||o[0]>t||t>p)&&(o[4]=e,o[5]=t,m.n=p,i=0))}if(n||e>1)return l;throw d=!0,t}return function(n,f,p){if(c>1)throw TypeError("Generator is already running");for(d&&1===f&&u(f,p),i=f,s=p;(r=i<2?a:s)||!d;){o||(i?i<3?(i>1&&(m.n=-1),u(i,s)):m.n=s:m.v=s);try{if(c=2,o){if(i||(n="next"),r=o[n]){if(!(r=r.call(o,s)))throw TypeError("iterator result is not an object");if(!r.done)return r;s=r.value,i<2&&(i=0)}else 1===i&&(r=o.return)&&r.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+n+"' method"),i=1);o=a}else if((r=(d=m.n<0)?s:e.call(t,m))!==l)break}catch(r){o=a,i=1,s=r}finally{c=1}}return{value:r,done:d}}}(e,o,i),!0),f}var l={};function c(){}function f(){}function d(){}r=Object.getPrototypeOf;var m=[][o]?r(r([][o]())):(t(r={},o,function(){return this}),r),u=d.prototype=c.prototype=Object.create(m);function p(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,t(e,i,"GeneratorFunction")),e.prototype=Object.create(u),e}return f.prototype=d,t(u,"constructor",d),t(d,"constructor",f),f.displayName="GeneratorFunction",t(d,i,"GeneratorFunction"),t(u),t(u,i,"Generator"),t(u,o,function(){return this}),t(u,"toString",function(){return"[object Generator]"}),(e=function(){return{w:s,m:p}})()}function t(e,a,r,n){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}t=function(e,a,r,n){function i(a,r){t(e,a,function(e){return this._invoke(a,r,e)})}a?o?o(e,a,{value:r,enumerable:!n,configurable:!n,writable:!n}):e[a]=r:(i("next",0),i("throw",1),i("return",2))},t(e,a,r,n)}function a(e,t,a,r,n,o,i){try{var s=e[o](i),l=s.value}catch(e){return void a(e)}s.done?t(l):Promise.resolve(l).then(r,n)}function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=a){var r,n,o,i,s=[],l=!0,c=!1;try{if(o=(a=a.call(e)).next,0===t){if(Object(a)!==a)return;l=!1}else for(;!(l=(r=o.call(a)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,n=e}finally{try{if(!l&&null!=a.return&&(i=a.return(),Object(i)!==i))return}finally{if(c)throw n}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return n(e,t);var a={}.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?n(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=Array(t);a<t;a++)r[a]=e[a];return r}System.register(["./query-legacy-CLxXWLnl.js","./sentry-legacy-CTr2CudU.js","./index-legacy-DVoFAd51.js","./router-legacy-9xrJEksD.js","./store-legacy-Bt3CCSnU.js"],function(t,n){"use strict";var o,i,s,l,c,f;return{setters:[function(e){o=e.j},function(e){i=e.a},function(e){s=e.u,l=e.k,c=e.b},function(e){f=e.L},null],execute:function(){var n=document.createElement("style");n.textContent='.fate-match-page{min-height:100vh;position:relative;overflow:hidden;display:flex;flex-direction:column;align-items:center;padding:2rem 1rem 3rem;background:radial-gradient(ellipse at 50% 0%,rgba(139,92,246,.15) 0%,transparent 60%),radial-gradient(ellipse at 80% 80%,rgba(236,72,153,.1) 0%,transparent 50%),var(--color-background, #0a0a0f)}.fate-bg{position:fixed;top:0;right:0;bottom:0;left:0;pointer-events:none;z-index:0}.fate-particle{position:absolute;bottom:-10px;width:4px;height:4px;border-radius:50%;background:rgba(139,92,246,.6);animation:fate-float linear infinite}.fate-particle:nth-child(2n){background:rgba(236,72,153,.5);width:3px;height:3px}.fate-particle:nth-child(3n){background:rgba(6,182,212,.4);width:5px;height:5px}@keyframes fate-float{0%{transform:translateY(0) rotate(0);opacity:0}10%{opacity:1}90%{opacity:1}to{transform:translateY(-100vh) rotate(720deg);opacity:0}}.fate-content{position:relative;z-index:1;max-width:480px;width:100%;display:flex;flex-direction:column;align-items:center;gap:2rem}.fate-header{text-align:center}.fate-title{font-size:1.75rem;font-weight:800;background:linear-gradient(135deg,#8b5cf6,#ec4899,#06b6d4);-webkit-background-clip:text;-webkit-text-fill-color:transparent;display:flex;align-items:center;gap:.5rem;justify-content:center}.fate-title-emoji{font-size:1.5rem;-webkit-text-fill-color:initial;animation:fate-wobble 2s ease-in-out infinite}.fate-title-emoji:last-child{animation-delay:1s}.fate-subtitle{color:var(--color-text-muted);font-size:.875rem;margin-top:.5rem}.fate-match-count{color:var(--color-text-muted);font-size:.75rem;margin-top:.25rem;opacity:.6}@keyframes fate-wobble{0%,to{transform:rotate(0)}25%{transform:rotate(-10deg)}75%{transform:rotate(10deg)}}.fate-stage{width:100%;min-height:360px;display:flex;align-items:center;justify-content:center}.fate-idle{text-align:center;display:flex;flex-direction:column;align-items:center;gap:1.5rem}.fate-crystal-ball{position:relative;width:120px;height:120px;display:flex;align-items:center;justify-content:center}.fate-crystal-inner{font-size:4rem;animation:fate-pulse 3s ease-in-out infinite;position:relative;z-index:1}.fate-crystal-glow{position:absolute;top:-20px;right:-20px;bottom:-20px;left:-20px;border-radius:50%;background:radial-gradient(circle,rgba(139,92,246,.3) 0%,transparent 70%);animation:fate-glow 3s ease-in-out infinite}.fate-idle-text{color:var(--color-text-muted);font-size:.9rem}.fate-login-hint{color:var(--color-text-muted);font-size:.75rem;opacity:.7}.fate-link{color:#8b5cf6;text-decoration:underline}@keyframes fate-pulse{0%,to{transform:scale(1)}50%{transform:scale(1.1)}}@keyframes fate-glow{0%,to{opacity:.5;transform:scale(1)}50%{opacity:1;transform:scale(1.2)}}.fate-matching{text-align:center;display:flex;flex-direction:column;align-items:center;gap:2rem}.fate-spinner{position:relative;width:120px;height:120px;display:flex;align-items:center;justify-content:center}.fate-spinner-ring{position:absolute;top:0;right:0;bottom:0;left:0;border-radius:50%;border:3px solid transparent;border-top-color:#8b5cf6;animation:fate-spin 1.2s linear infinite}.fate-spinner-ring.delay-1{top:10px;right:10px;bottom:10px;left:10px;border-top-color:#ec4899;animation-duration:1.5s;animation-direction:reverse}.fate-spinner-ring.delay-2{top:20px;right:20px;bottom:20px;left:20px;border-top-color:#06b6d4;animation-duration:2s}.fate-spinner-emoji{font-size:2.5rem;z-index:1;animation:fate-slot .3s steps(1) infinite}.fate-loading-text{color:var(--color-text-muted);font-size:.9rem;animation:fate-text-fade 1.2s ease-in-out infinite}@keyframes fate-spin{to{transform:rotate(360deg)}}@keyframes fate-slot{0%{content:"üé∞"}25%{transform:translateY(-2px)}50%{transform:translateY(2px)}75%{transform:translateY(-1px)}}@keyframes fate-text-fade{0%,to{opacity:.5}50%{opacity:1}}.fate-result-card{width:100%;perspective:1000px}.fate-result-card.revealing .fate-card-front{animation:fate-card-enter 1.2s ease-out forwards}.fate-result-card.revealed .fate-card-front{animation:none;transform:rotateY(0) scale(1);opacity:1}@keyframes fate-card-enter{0%{transform:rotateY(180deg) scale(.5);opacity:0}60%{transform:rotateY(-10deg) scale(1.05);opacity:1}to{transform:rotateY(0) scale(1);opacity:1}}.fate-card-border{padding:3px;border-radius:1.25rem}.fate-card-inner{background:var(--color-surface, #1a1a2e);border-radius:1.125rem;padding:1.5rem;display:flex;flex-direction:column;align-items:center;gap:1rem}.fate-relationship-badge{display:flex;align-items:center;gap:.5rem;padding:.375rem 1rem;border-radius:999px;background:rgba(139,92,246,.15);border:1px solid rgba(139,92,246,.3)}.fate-rel-emoji{font-size:1.25rem}.fate-rel-text{font-size:.875rem;font-weight:700;color:#c4b5fd}.fate-avatar-wrap{width:80px;height:80px;border-radius:50%;overflow:hidden;border:3px solid rgba(139,92,246,.5);box-shadow:0 0 20px rgba(139,92,246,.3)}.fate-avatar{width:100%;height:100%;-o-object-fit:cover;object-fit:cover}.fate-avatar-placeholder{width:100%;height:100%;display:flex;align-items:center;justify-content:center;font-size:2.5rem;background:rgba(139,92,246,.1)}.fate-user-name{font-size:1.25rem;font-weight:700;color:var(--color-text, #fff)}.fate-user-location{font-size:.8rem;color:var(--color-text-muted)}.fate-score-section{width:100%;text-align:center}.fate-score-label{font-size:.75rem;color:var(--color-text-muted);margin-bottom:.25rem}.fate-score-number{font-size:3rem;font-weight:900;line-height:1;text-shadow:0 0 30px currentColor;animation:fate-score-pop .6s ease-out}.fate-score-bar-bg{width:100%;height:6px;border-radius:3px;background:rgba(255,255,255,.1);margin:.5rem 0;overflow:hidden}.fate-score-bar{height:100%;border-radius:3px;transition:width 1.5s cubic-bezier(.4,0,.2,1)}.fate-score-verdict{font-size:.875rem;font-weight:600}@keyframes fate-score-pop{0%{transform:scale(0);opacity:0}60%{transform:scale(1.2)}to{transform:scale(1);opacity:1}}.fate-analysis{width:100%;text-align:center;animation:fate-fade-up .6s ease-out;padding-top:.5rem;border-top:1px solid var(--color-border, rgba(255,255,255,.1))}.fate-analysis-title{font-size:1rem;font-weight:700;color:var(--color-text, #fff);margin-bottom:.5rem}.fate-analysis-desc{font-size:.85rem;color:var(--color-text-muted);line-height:1.6}.fate-advice{display:flex;align-items:flex-start;gap:.5rem;margin-top:.75rem;padding:.75rem;background:rgba(139,92,246,.08);border-radius:.75rem;font-size:.8rem;color:#c4b5fd;text-align:left}.fate-advice-icon{flex-shrink:0}@keyframes fate-fade-up{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.fate-view-profile{font-size:.8rem;color:#8b5cf6;text-decoration:none;padding:.5rem 1rem;border-radius:999px;border:1px solid rgba(139,92,246,.3);transition:all .2s}.fate-view-profile:hover{background:rgba(139,92,246,.1)}.fate-actions{width:100%;display:flex;flex-direction:column;align-items:center;gap:.75rem}.fate-error{color:#ef4444;font-size:.85rem}.fate-match-btn{width:100%;max-width:320px;padding:1rem 2rem;border:none;border-radius:1rem;cursor:pointer;font-size:1.1rem;font-weight:700;color:#fff;background:linear-gradient(135deg,#8b5cf6,#ec4899);box-shadow:0 4px 20px rgba(139,92,246,.4);transition:all .3s;position:relative;overflow:hidden}.fate-match-btn:hover:not(:disabled){transform:translateY(-2px);box-shadow:0 6px 30px rgba(139,92,246,.5)}.fate-match-btn:active:not(:disabled){transform:translateY(0)}.fate-match-btn.loading{opacity:.7;cursor:not-allowed}.fate-match-btn:after{content:"";position:absolute;top:0;right:0;bottom:0;left:0;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transform:translate(-100%)}.fate-match-btn:hover:not(:disabled):after{animation:fate-shimmer 1.5s infinite}@keyframes fate-shimmer{to{transform:translate(100%)}}.fate-disclaimer{text-align:center;font-size:.7rem;color:var(--color-text-muted);opacity:.5;max-width:360px}@media(max-width:480px){.fate-match-page{padding:1.5rem .75rem 2rem}.fate-title{font-size:1.35rem}.fate-stage{min-height:300px}.fate-score-number{font-size:2.5rem}.fate-card-inner{padding:1.25rem}}\n/*$vite$:1*/',document.head.appendChild(n),t("default",function(){var t=s().isAuthenticated,n=l().t,d=r(i.useState("idle"),2),m=d[0],u=d[1],p=r(i.useState(null),2),h=p[0],g=p[1],x=r(i.useState(""),2),b=x[0],v=x[1],y=r(i.useState(""),2),j=y[0],w=y[1],N=r(i.useState(0),2),k=N[0],M=N[1],z=i.useRef(null),S=[n("tools.fateMatch.loading1"),n("tools.fateMatch.loading2"),n("tools.fateMatch.loading3"),n("tools.fateMatch.loading4"),n("tools.fateMatch.loading5"),n("tools.fateMatch.loading6"),n("tools.fateMatch.loading7"),n("tools.fateMatch.loading8"),n("tools.fateMatch.loading9"),n("tools.fateMatch.loading10")];i.useEffect(function(){return document.title=n("tools.fateMatch.pageTitle"),function(){document.title="KigerMap"}},[]),i.useEffect(function(){if("matching"===m){var e=0;v(S[0]);var t=setInterval(function(){v(S[e=(e+1)%S.length])},1200);return function(){return clearInterval(t)}}},[m]);var O=function(){var t,r=(t=e().m(function t(){var a;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:return u("matching"),w(""),g(null),e.p=1,e.n=2,c.get("/fate/match");case 2:a=e.v,g(a.data),setTimeout(function(){return u("reveal")},800),setTimeout(function(){return u("result")},2e3),M(function(e){return e+1}),e.n=4;break;case 3:e.p=3,e.v,w(n("tools.fateMatch.error")),u("idle");case 4:return e.a(2)}},t,null,[[1,3]])}),function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function s(e){a(i,n,o,s,l,"next",e)}function l(e){a(i,n,o,s,l,"throw",e)}s(void 0)})});return function(){return r.apply(this,arguments)}}(),Y=h?function(e,t){return e>=90?{color:"#ff2d55",bg:"from-pink-500 to-red-500",label:t("tools.fateMatch.scoreExcellent"),glow:"shadow-pink-500/50"}:e>=70?{color:"#ff9500",bg:"from-orange-400 to-amber-500",label:t("tools.fateMatch.scoreGood"),glow:"shadow-orange-500/50"}:e>=50?{color:"#5856d6",bg:"from-violet-500 to-purple-500",label:t("tools.fateMatch.scoreOk"),glow:"shadow-violet-500/50"}:e>=30?{color:"#007aff",bg:"from-blue-500 to-cyan-500",label:t("tools.fateMatch.scoreLow"),glow:"shadow-blue-500/50"}:{color:"#34c759",bg:"from-green-500 to-emerald-500",label:t("tools.fateMatch.scoreBad"),glow:"shadow-green-500/50"}}(h.fate.score,n):null;return o.jsxs("div",{className:"fate-match-page",children:[o.jsx("div",{className:"fate-bg",children:Array.from({length:20}).map(function(e,t){return o.jsx("div",{className:"fate-particle",style:{left:"".concat(100*Math.random(),"%"),animationDelay:"".concat(5*Math.random(),"s"),animationDuration:"".concat(3+4*Math.random(),"s")}},t)})}),o.jsxs("div",{className:"fate-content",children:[o.jsxs("div",{className:"fate-header",children:[o.jsxs("h1",{className:"fate-title",children:[o.jsx("span",{className:"fate-title-emoji",children:"üîÆ"}),n("tools.fateMatch.title"),o.jsx("span",{className:"fate-title-emoji",children:"üé≠"})]}),o.jsx("p",{className:"fate-subtitle",children:n("tools.fateMatch.subtitle",{prefix:n(k>0?"tools.fateMatch.subtitleMany":"tools.fateMatch.subtitleFirst")})}),k>0&&o.jsx("p",{className:"fate-match-count",children:n("tools.fateMatch.matchCount",{count:k})})]}),o.jsxs("div",{className:"fate-stage",children:["idle"===m&&o.jsxs("div",{className:"fate-idle",children:[o.jsxs("div",{className:"fate-crystal-ball",children:[o.jsx("div",{className:"fate-crystal-inner",children:"üîÆ"}),o.jsx("div",{className:"fate-crystal-glow"})]}),o.jsx("p",{className:"fate-idle-text",children:n("tools.fateMatch.idleText")}),!t&&o.jsx("p",{className:"fate-login-hint",children:(T=n("tools.fateMatch.loginHint",{loginLink:"{{LINK}}"}).split("{{LINK}}"),o.jsxs(o.Fragment,{children:[T[0],o.jsx(f,{to:"/login",className:"fate-link",children:n("tools.fateMatch.loginText")}),T[1]]}))})]}),"matching"===m&&o.jsxs("div",{className:"fate-matching",children:[o.jsxs("div",{className:"fate-spinner",children:[o.jsx("div",{className:"fate-spinner-ring"}),o.jsx("div",{className:"fate-spinner-ring delay-1"}),o.jsx("div",{className:"fate-spinner-ring delay-2"}),o.jsx("span",{className:"fate-spinner-emoji",children:"üé∞"})]}),o.jsx("p",{className:"fate-loading-text",children:b})]}),("reveal"===m||"result"===m)&&h&&Y&&o.jsx("div",{className:"fate-result-card ".concat("result"===m?"revealed":"revealing"),ref:z,children:o.jsx("div",{className:"fate-card-front",children:o.jsx("div",{className:"fate-card-border bg-gradient-to-br ".concat(Y.bg),children:o.jsxs("div",{className:"fate-card-inner",children:[o.jsxs("div",{className:"fate-relationship-badge",children:[o.jsx("span",{className:"fate-rel-emoji",children:h.fate.emoji}),o.jsx("span",{className:"fate-rel-text",children:h.fate.relationship})]}),o.jsx("div",{className:"fate-avatar-wrap",children:h.user.avatar?o.jsx("img",{src:h.user.avatar,alt:"",className:"fate-avatar"}):o.jsx("div",{className:"fate-avatar-placeholder",children:"üé≠"})}),o.jsx("h2",{className:"fate-user-name",children:h.user.cnName}),(h.user.province||h.user.city)&&o.jsxs("p",{className:"fate-user-location",children:["üìç ",h.user.province,h.user.city?" ¬∑ ".concat(h.user.city):""]}),o.jsxs("div",{className:"fate-score-section",children:[o.jsx("div",{className:"fate-score-label",children:n("tools.fateMatch.fateIndex")}),o.jsx("div",{className:"fate-score-number ".concat(Y.glow),style:{color:Y.color},children:h.fate.score}),o.jsx("div",{className:"fate-score-bar-bg",children:o.jsx("div",{className:"fate-score-bar bg-gradient-to-r ".concat(Y.bg),style:{width:"result"===m?"".concat(h.fate.score,"%"):"0%"}})}),o.jsx("div",{className:"fate-score-verdict",style:{color:Y.color},children:Y.label})]}),"result"===m&&o.jsxs("div",{className:"fate-analysis",children:[o.jsx("h3",{className:"fate-analysis-title",children:h.fate.title}),o.jsx("p",{className:"fate-analysis-desc",children:h.fate.description}),o.jsxs("div",{className:"fate-advice",children:[o.jsx("span",{className:"fate-advice-icon",children:"üí°"}),o.jsx("span",{children:h.fate.advice})]})]}),"result"===m&&h.user.shareCode&&o.jsx(f,{to:"/u/".concat(h.user.shareCode),className:"fate-view-profile",children:n("tools.fateMatch.viewProfile")})]})})})})]}),o.jsxs("div",{className:"fate-actions",children:[j&&o.jsx("p",{className:"fate-error",children:j}),o.jsx("button",{onClick:O,disabled:"matching"===m,className:"fate-match-btn ".concat("matching"===m?"loading":""),children:n("matching"===m?"tools.fateMatch.matching":"result"===m?"tools.fateMatch.again":"tools.fateMatch.start")})]}),o.jsx("p",{className:"fate-disclaimer",children:n("tools.fateMatch.disclaimer")})]})]});var T})}}})}();
